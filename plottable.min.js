!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("d3")):"function"==typeof define&&define.amd?define(["d3"],b):"object"==typeof exports?exports.Plottable=b(require("d3")):a.Plottable=b(a.d3)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=113)}([function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=c(91);b.Array=e;var f=c(94);b.Color=f;var g=c(39);b.DOM=g;var h=c(27);b.Math=h;var i=c(97);b.Stacking=i;var j=c(98);b.Window=j,d(c(92)),d(c(93)),d(c(95)),d(c(96)),d(c(40))},function(b,c){b.exports=a},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(6),g=c(5),h=c(7),i=c(0),j=c(36),k=function(a){function b(){var c=this;a.call(this),this._dataChanged=!1,this._animate=!1,this._animators={},this._clipPathEnabled=!0,this.addClass("plot"),this._datasetToDrawer=new i.Map,this._attrBindings=e.map(),this._attrExtents=e.map(),this._includedValuesProvider=function(a){return c._includedValuesForScale(a)},this._renderCallback=function(a){return c.render()},this._onDatasetUpdateCallback=function(){return c._onDatasetUpdate()},this._propertyBindings=e.map(),this._propertyExtents=e.map();var d=(new f.Easing).maxTotalDuration(b._ANIMATION_MAX_DURATION);this.animator(j.Animator.MAIN,d),this.animator(j.Animator.RESET,new f.Null)}return d(b,a),b.prototype.anchor=function(b){return a.prototype.anchor.call(this,b),this._dataChanged=!0,this._cachedEntityStore=void 0,this._updateExtents(),this},b.prototype._setup=function(){var b=this;a.prototype._setup.call(this),this._renderArea=this.content().append("g").classed("render-area",!0),this.datasets().forEach(function(a){return b._createNodesForDataset(a)})},b.prototype.destroy=function(){var b=this;a.prototype.destroy.call(this),this._scales().forEach(function(a){return a.offUpdate(b._renderCallback)}),this.datasets([])},b.prototype._createNodesForDataset=function(a){var b=this._datasetToDrawer.get(a);return b.renderArea(this._renderArea.append("g")),b},b.prototype._createDrawer=function(a){return new h.Drawer(a)},b.prototype._getAnimator=function(a){return this._animateOnNextRender()?this._animators[a]||new f.Null:new f.Null},b.prototype._onDatasetUpdate=function(){this._updateExtents(),this._dataChanged=!0,this._cachedEntityStore=void 0,this.render()},b.prototype.attr=function(a,b,c){return null==b?this._attrBindings.get(a):(this._bindAttr(a,b,c),this.render(),this)},b.prototype._bindProperty=function(a,b,c){var d=this._propertyBindings.get(a),f=null!=d?d.scale:null;this._propertyBindings.set(a,{accessor:e.functor(b),scale:c}),this._updateExtentsForProperty(a),null!=f&&this._uninstallScaleForKey(f,a),null!=c&&this._installScaleForKey(c,a)},b.prototype._bindAttr=function(a,b,c){var d=this._attrBindings.get(a),f=null!=d?d.scale:null;this._attrBindings.set(a,{accessor:e.functor(b),scale:c}),this._updateExtentsForAttr(a),null!=f&&this._uninstallScaleForKey(f,a),null!=c&&this._installScaleForKey(c,a)},b.prototype._generateAttrToProjector=function(){var a={};this._attrBindings.forEach(function(b,c){var d=c.accessor,e=c.scale,f=e?function(a,b,c){return e.scale(d(a,b,c))}:d;a[b]=f});var b=this._propertyProjectors();return Object.keys(b).forEach(function(c){null==a[c]&&(a[c]=b[c])}),a},b.prototype.renderImmediately=function(){return a.prototype.renderImmediately.call(this),this._isAnchored&&(this._paint(),this._dataChanged=!1),this},b.prototype.animated=function(a){return null==a?this._animate:(this._animate=a,this)},b.prototype.detach=function(){return a.prototype.detach.call(this),this._updateExtents(),this},b.prototype._scales=function(){var a=[];return this._attrBindings.forEach(function(b,c){var d=c.scale;null!=d&&a.indexOf(d)===-1&&a.push(d)}),this._propertyBindings.forEach(function(b,c){var d=c.scale;null!=d&&a.indexOf(d)===-1&&a.push(d)}),a},b.prototype._updateExtents=function(){var a=this;this._attrBindings.forEach(function(b){return a._updateExtentsForAttr(b)}),this._propertyExtents.forEach(function(b){return a._updateExtentsForProperty(b)}),this._scales().forEach(function(b){return b.addIncludedValuesProvider(a._includedValuesProvider)})},b.prototype._updateExtentsForAttr=function(a){this._updateExtentsForKey(a,this._attrBindings,this._attrExtents,null)},b.prototype._updateExtentsForProperty=function(a){this._updateExtentsForKey(a,this._propertyBindings,this._propertyExtents,this._filterForProperty(a))},b.prototype._filterForProperty=function(a){return null},b.prototype._updateExtentsForKey=function(a,b,c,d){var e=this,f=b.get(a);null!=f&&null!=f.accessor&&c.set(a,this.datasets().map(function(a){return e._computeExtent(a,f,d)}))},b.prototype._computeExtent=function(a,b,c){var d=b.accessor,e=b.scale;if(null==e)return[];var f=a.data();null!=c&&(f=f.filter(function(b,d){return c(b,d,a)}));var g=function(b,c){return d(b,c,a)},h=f.map(g);return e.extentOfValues(h)},b.prototype._extentsForProperty=function(a){return this._propertyExtents.get(a)},b.prototype._includedValuesForScale=function(a){var b=this;if(!this._isAnchored)return[];var c=[];return this._attrBindings.forEach(function(d,f){if(f.scale===a){var g=b._attrExtents.get(d);null!=g&&(c=c.concat(e.merge(g)))}}),this._propertyBindings.forEach(function(d,f){if(f.scale===a){var g=b._extentsForProperty(d);null!=g&&(c=c.concat(e.merge(g)))}}),c},b.prototype.animator=function(a,b){return void 0===b?this._animators[a]:(this._animators[a]=b,this)},b.prototype.addDataset=function(a){return this._addDataset(a),this._onDatasetUpdate(),this},b.prototype._addDataset=function(a){this._removeDataset(a);var b=this._createDrawer(a);return this._datasetToDrawer.set(a,b),this._isSetup&&this._createNodesForDataset(a),a.onUpdate(this._onDatasetUpdateCallback),this},b.prototype.removeDataset=function(a){return this._removeDataset(a),this._onDatasetUpdate(),this},b.prototype._removeDataset=function(a){return this.datasets().indexOf(a)===-1?this:(this._removeDatasetNodes(a),a.offUpdate(this._onDatasetUpdateCallback),this._datasetToDrawer["delete"](a),this)},b.prototype._removeDatasetNodes=function(a){var b=this._datasetToDrawer.get(a);b.remove()},b.prototype.datasets=function(a){var b=this,c=[];return this._datasetToDrawer.forEach(function(a,b){return c.push(b)}),null==a?c:(c.forEach(function(a){return b._removeDataset(a)}),a.forEach(function(a){return b._addDataset(a)}),this._onDatasetUpdate(),this)},b.prototype._getDrawersInOrder=function(){var a=this;return this.datasets().map(function(b){return a._datasetToDrawer.get(b)})},b.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new f.Null}]},b.prototype._additionalPaint=function(a){},b.prototype._buildLightweightPlotEntities=function(a){var b=this,c=[];return a.forEach(function(a,d){var e=b._datasetToDrawer.get(a),f=0;a.data().forEach(function(g,h){var j=b._pixelPoint(g,h,a);i.Math.isNaN(j.x)||i.Math.isNaN(j.y)||(c.push({datum:g,position:j,index:h,dataset:a,datasetIndex:d,component:b,drawer:e,validDatumIndex:f}),f++)})}),c},b.prototype._getDataToDraw=function(){var a=new i.Map;return this.datasets().forEach(function(b){return a.set(b,b.data())}),a},b.prototype._paint=function(){var a=this._generateDrawSteps(),b=this._getDataToDraw(),c=this._getDrawersInOrder();this.datasets().forEach(function(d,e){return c[e].draw(b.get(d),a)});var d=this.datasets().map(function(d,e){return c[e].totalDrawTime(b.get(d),a)}),e=i.Math.max(d,0);this._additionalPaint(e)},b.prototype.selections=function(a){var b=this;void 0===a&&(a=this.datasets());var c=[];return a.forEach(function(a){var d=b._datasetToDrawer.get(a);null!=d&&d.renderArea().selectAll(d.selector()).each(function(){c.push(this)})}),e.selectAll(c)},b.prototype.entities=function(a){var b=this;return this._getEntityStore(a).map(function(a){return b._lightweightPlotEntityToPlotEntity(a)})},b.prototype._getEntityStore=function(a){var b=this;if(void 0!==a){var c=new i.EntityArray;return this._buildLightweightPlotEntities(a).forEach(function(a){c.add(a)}),c}return void 0===this._cachedEntityStore&&(this._cachedEntityStore=new i.EntityArray,this._buildLightweightPlotEntities(this.datasets()).forEach(function(a){b._cachedEntityStore.add(a)})),this._cachedEntityStore},b.prototype._lightweightPlotEntityToPlotEntity=function(a){var b={datum:a.datum,position:this._pixelPoint(a.datum,a.index,a.dataset),dataset:a.dataset,datasetIndex:a.datasetIndex,index:a.index,component:a.component,selection:a.drawer.selectionForIndex(a.validDatumIndex)};return b},b.prototype.entitiesAt=function(a){throw new Error("plots must implement entitiesAt")},b.prototype.entityNearest=function(a,b){var c=this;void 0===b&&(b=this.bounds());var d=this._getEntityStore().entityNearest(a,function(a){return c._entityVisibleOnPlot(a,b)});return void 0===d?void 0:this._lightweightPlotEntityToPlotEntity(d)},b.prototype._entityVisibleOnPlot=function(a,b){return!(a.position.x<b.topLeft.x||a.position.y<b.topLeft.y||a.position.x>b.bottomRight.x||a.position.y>b.bottomRight.y)},b.prototype._uninstallScaleForKey=function(a,b){a.offUpdate(this._renderCallback),a.removeIncludedValuesProvider(this._includedValuesProvider)},b.prototype._installScaleForKey=function(a,b){a.onUpdate(this._renderCallback),a.addIncludedValuesProvider(this._includedValuesProvider)},b.prototype._propertyProjectors=function(){return{}},b._scaledAccessor=function(a){return null==a.scale?a.accessor:function(b,c,d){return a.scale.scale(a.accessor(b,c,d))}},b.prototype._pixelPoint=function(a,b,c){return{x:0,y:0}},b.prototype._animateOnNextRender=function(){return this._animate&&this._dataChanged},b._ANIMATION_MAX_DURATION=600,b}(g.Component);b.Plot=k},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}function e(a){return a instanceof h.QuantitativeScale||a instanceof g.Category}var f=c(89);b.TickGenerators=f,d(c(38)),d(c(85)),d(c(86)),d(c(87)),d(c(88)),d(c(90));var g=c(38),h=c(10);b.isTransformable=e},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(99)),d(c(103)),d(c(13)),d(c(109)),d(c(111))},function(a,b,c){"use strict";var d=c(1),e=c(24),f=c(0),g=function(){function a(){this._clipPathEnabled=!1,this._origin={x:0,y:0},this._xAlignment="left",this._yAlignment="top",this._isSetup=!1,this._isAnchored=!1,this._boxes=[],this._isTopLevelComponent=!1,this._cssClasses=new f.Set,this._destroyed=!1,this._onAnchorCallbacks=new f.CallbackSet,this._onDetachCallbacks=new f.CallbackSet,this._cssClasses.add("component")}return a.prototype.anchor=function(b){if(this._destroyed)throw new Error("Can't reuse destroy()-ed Components!");if(this._isTopLevelComponent="svg"===b.node().nodeName.toLowerCase(),this._isTopLevelComponent){this._rootSVG=b,this._rootSVG.classed("plottable",!0),this._rootSVG.style("overflow","visible");var c=this._rootSVG.select("."+a._SAFARI_EVENT_BACKING_CLASS);c.empty()&&this._rootSVG.append("rect").classed(a._SAFARI_EVENT_BACKING_CLASS,!0).attr({x:0,y:0,width:"100%",height:"100%"}).style("opacity",0)}return null!=this._element?b.node().appendChild(this._element.node()):(this._element=b.append("g"),this._setup()),this._isAnchored=!0,this._onAnchorCallbacks.callCallbacks(this),this},a.prototype.onAnchor=function(a){return this._isAnchored&&a(this),this._onAnchorCallbacks.add(a),this},a.prototype.offAnchor=function(a){return this._onAnchorCallbacks["delete"](a),this},a.prototype._setup=function(){var a=this;this._isSetup||(this._cssClasses.forEach(function(b){a._element.classed(b,!0)}),this._cssClasses=new f.Set,this._backgroundContainer=this._element.append("g").classed("background-container",!0),this._addBox("background-fill",this._backgroundContainer),this._content=this._element.append("g").classed("content",!0),this._foregroundContainer=this._element.append("g").classed("foreground-container",!0),this._boxContainer=this._element.append("g").classed("box-container",!0),this._clipPathEnabled&&this._generateClipPath(),this._boundingBox=this._addBox("bounding-box"),this._isSetup=!0)},a.prototype.requestedSpace=function(a,b){return{minWidth:0,minHeight:0}},a.prototype.computeLayout=function(b,c,d){var e=this;if(null==b||null==c||null==d){if(null==this._element)throw new Error("anchor() must be called before computeLayout()");if(!this._isTopLevelComponent)throw new Error("null arguments cannot be passed to computeLayout() on a non-root node");b={x:0,y:0},null==this._rootSVG.attr("width")&&this._rootSVG.attr("width","100%"),null==this._rootSVG.attr("height")&&this._rootSVG.attr("height","100%");var g=this._rootSVG.node();c=f.DOM.elementWidth(g),d=f.DOM.elementHeight(g)}var h=this._sizeFromOffer(c,d);this._width=h.width,this._height=h.height;var i=a._xAlignToProportion[this._xAlignment],j=a._yAlignToProportion[this._yAlignment];return this._origin={x:b.x+(c-this.width())*i,y:b.y+(d-this.height())*j},this._element.attr("transform","translate("+this._origin.x+","+this._origin.y+")"),this._boxes.forEach(function(a){return a.attr("width",e.width()).attr("height",e.height())}),null!=this._resizeHandler&&this._resizeHandler(h),this},a.prototype._sizeFromOffer=function(a,b){var c=this.requestedSpace(a,b);return{width:this.fixedWidth()?Math.min(a,c.minWidth):a,height:this.fixedHeight()?Math.min(b,c.minHeight):b}},a.prototype.render=function(){return this._isAnchored&&this._isSetup&&this.width()>=0&&this.height()>=0&&e.registerToRender(this),this},a.prototype._scheduleComputeLayout=function(){this._isAnchored&&this._isSetup&&e.registerToComputeLayoutAndRender(this)},a.prototype.onResize=function(a){return this._resizeHandler=a,this},a.prototype.renderImmediately=function(){return this._clipPathEnabled&&this._updateClipPath(),this},a.prototype.redraw=function(){return this._isAnchored&&this._isSetup&&(this._isTopLevelComponent?this._scheduleComputeLayout():this.parent().redraw()),this},a.prototype.renderTo=function(a){if(this.detach(),null!=a){var b=void 0;if(b="string"==typeof a?d.select(a):a instanceof Element?d.select(a):a,!b.node()||"svg"!==b.node().nodeName.toLowerCase())throw new Error("Plottable requires a valid SVG to renderTo");this.anchor(b)}if(null==this._element)throw new Error("If a Component has never been rendered before, then renderTo must be given a node to render to, or a d3.Selection, or a selector string");return e.registerToComputeLayoutAndRender(this),e.flush(),this},a.prototype.xAlignment=function(b){if(null==b)return this._xAlignment;if(b=b.toLowerCase(),null==a._xAlignToProportion[b])throw new Error("Unsupported alignment: "+b);return this._xAlignment=b,this.redraw(),this},a.prototype.yAlignment=function(b){if(null==b)return this._yAlignment;if(b=b.toLowerCase(),null==a._yAlignToProportion[b])throw new Error("Unsupported alignment: "+b);return this._yAlignment=b,this.redraw(),this},a.prototype._addBox=function(a,b){if(null==this._element)throw new Error("Adding boxes before anchoring is currently disallowed");b=null==b?this._boxContainer:b;var c=b.append("rect");return null!=a&&c.classed(a,!0),this._boxes.push(c),null!=this.width()&&null!=this.height()&&c.attr("width",this.width()).attr("height",this.height()),c},a.prototype._generateClipPath=function(){this._clipPathID=f.DOM.generateUniqueClipPathId();var a=this._boxContainer.append("clipPath").attr("id",this._clipPathID);this._addBox("clip-rect",a),this._updateClipPath()},a.prototype._updateClipPath=function(){var a=/MSIE [5-9]/.test(navigator.userAgent)?"":document.location.href;a=a.split("#")[0],this._element.attr("clip-path",'url("'+a+"#"+this._clipPathID+'")')},a.prototype.hasClass=function(a){return null!=a&&(null==this._element?this._cssClasses.has(a):this._element.classed(a))},a.prototype.addClass=function(a){return null==a?this:(null==this._element?this._cssClasses.add(a):this._element.classed(a,!0),this)},a.prototype.removeClass=function(a){return null==a?this:(null==this._element?this._cssClasses["delete"](a):this._element.classed(a,!1),this)},a.prototype.fixedWidth=function(){return!1},a.prototype.fixedHeight=function(){return!1},a.prototype.detach=function(){return this.parent(null),this._isAnchored&&(this._element.remove(),this._isTopLevelComponent&&this._rootSVG.select("."+a._SAFARI_EVENT_BACKING_CLASS).remove()),this._isAnchored=!1,this._onDetachCallbacks.callCallbacks(this),this},a.prototype.onDetach=function(a){return this._onDetachCallbacks.add(a),this},a.prototype.offDetach=function(a){return this._onDetachCallbacks["delete"](a),this},a.prototype.parent=function(a){if(void 0===a)return this._parent;if(null!==a&&!a.has(this))throw new Error("Passed invalid parent");return this._parent=a,this},a.prototype.bounds=function(){var a=this.origin();return{topLeft:a,bottomRight:{x:a.x+this.width(),y:a.y+this.height()}}},a.prototype.destroy=function(){this._destroyed=!0,this.detach()},a.prototype.width=function(){return this._width},a.prototype.height=function(){return this._height},a.prototype.origin=function(){return{x:this._origin.x,y:this._origin.y}},a.prototype.originToSVG=function(){for(var a=this.origin(),b=this.parent();null!=b;){var c=b.origin();a.x+=c.x,a.y+=c.y,b=b.parent()}return a},a.prototype.foreground=function(){return this._foregroundContainer},a.prototype.content=function(){return this._content},a.prototype.background=function(){return this._backgroundContainer},a._xAlignToProportion={left:0,center:.5,right:1},a._yAlignToProportion={top:0,center:.5,bottom:1},a._SAFARI_EVENT_BACKING_CLASS="safari-event-backing",a}();b.Component=g},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(49)),d(c(50))},function(a,b,c){"use strict";var d=c(1),e=c(0),f=function(){function a(a){this._cachedSelectionValid=!1,this._dataset=a,this._svgElementName="path"}return a.prototype.renderArea=function(a){return null==a?this._renderArea:(this._renderArea=a,this._cachedSelectionValid=!1,this)},a.prototype.remove=function(){null!=this.renderArea()&&this.renderArea().remove()},a.prototype._bindSelectionData=function(a){var b=this.selection().data(a);b.enter().append(this._svgElementName),b.exit().remove(),this._applyDefaultAttributes(b)},a.prototype._applyDefaultAttributes=function(a){null!=this._className&&a.classed(this._className,!0)},a.prototype._drawStep=function(a){var b=this.selection(),c=["fill","stroke"];c.forEach(function(c){null!=a.attrToAppliedProjector[c]&&b.attr(c,a.attrToAppliedProjector[c])}),a.animator.animate(b,a.attrToAppliedProjector),null!=this._className&&this.selection().classed(this._className,!0)},a.prototype._appliedProjectors=function(a){var b=this,c={};return Object.keys(a).forEach(function(d){c[d]=function(c,e){return a[d](c,e,b._dataset)}}),c},a.prototype.totalDrawTime=function(a,b){var c=0;return b.forEach(function(b,d){c+=b.animator.totalTime(a.length)}),c},a.prototype.draw=function(a,b){var c=this,d=b.map(function(a){var b=c._appliedProjectors(a.attrToProjector);return{attrToAppliedProjector:b,animator:a.animator}});this._bindSelectionData(a),this._cachedSelectionValid=!1;var f=0;return d.forEach(function(b,d){e.Window.setTimeout(function(){return c._drawStep(b)},f),f+=b.animator.totalTime(a.length)}),this},a.prototype.selection=function(){return this._cachedSelectionValid||(this._cachedSelection=this.renderArea().selectAll(this.selector()),this._cachedSelectionValid=!0),this._cachedSelection},a.prototype.selector=function(){return this._svgElementName},a.prototype.selectionForIndex=function(a){return d.select(this.selection()[0][a])},a}();b.Drawer=f},function(a,b,c){"use strict";function d(a,b,c){void 0===a&&(a=2),void 0===b&&(b="$"),void 0===c&&(c=!0);var d=e(a);return function(a){var e=d(Math.abs(a));return""!==e&&(c?e=b+e:e+=b,a<0&&(e="-"+e)),e}}function e(a){return void 0===a&&(a=3),m(a),function(b){return b.toFixed(a)}}function f(a){return void 0===a&&(a=3),m(a),function(b){if("number"==typeof b){var c=Math.pow(10,a);return String(Math.round(b*c)/c)}return String(b)}}function g(){return function(a){return String(a)}}function h(a){void 0===a&&(a=0);var b=e(a);return function(a){var c=100*a,d=a.toString(),e=Math.pow(10,d.length-(d.indexOf(".")+1));return c=parseInt((c*e).toString(),10)/e,b(c)+"%"}}function i(a){return void 0===a&&(a=3),m(a),function(b){return n.format("."+a+"s")(b)}}function j(a){void 0===a&&(a=3),m(a);var b="KMBTQ",c=n.format("."+a+"e"),d=n.format("."+a+"f"),e=Math.pow(10,3*(b.length+1)),f=Math.pow(10,-a);return function(a){var g=Math.abs(a);if((g<f||g>=e)&&0!==g)return c(a);for(var h=-1;g>=Math.pow(1e3,h+2)&&h<b.length-1;)h++;var i="";return i=h===-1?d(a):d(a/Math.pow(1e3,h+1))+b[h],(a>0&&"1000"===i.substr(0,4)||a<0&&"-1000"===i.substr(0,5))&&(h<b.length-1?(h++,i=d(a/Math.pow(1e3,h+1))+b[h]):i=c(a)),i}}function k(){var a=[{specifier:".%L",predicate:function(a){return 0!==a.getMilliseconds()}},{specifier:":%S",predicate:function(a){return 0!==a.getSeconds()}},{specifier:"%I:%M",predicate:function(a){return 0!==a.getMinutes()}},{specifier:"%I %p",predicate:function(a){return 0!==a.getHours()}},{specifier:"%a %d",predicate:function(a){return 0!==a.getDay()&&1!==a.getDate()}},{specifier:"%b %d",predicate:function(a){return 1!==a.getDate()}},{specifier:"%b",predicate:function(a){return 0!==a.getMonth()}}];return function(b){var c=a.filter(function(a){return a.predicate(b)}),d=c.length>0?c[0].specifier:"%Y";return n.time.format(d)(b)}}function l(a){return n.time.format(a)}function m(a){if(a<0||a>20)throw new RangeError("Formatter precision must be between 0 and 20");if(a!==Math.floor(a))throw new RangeError("Formatter precision must be an integer")}var n=c(1);b.currency=d,b.fixed=e,b.general=f,b.identity=g,b.percentage=h,b.siSuffix=i,b.shortScale=j,b.multiTime=k,b.time=l},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(65)),d(c(66)),d(c(67)),d(c(68)),d(c(69)),d(c(70)),d(c(71))},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(14),g=c(0),h=c(17),i=function(a){function b(){a.call(this),this._tickGenerator=function(a){return a.defaultTicks()},this._padProportion=.05,this._snappingDomainEnabled=!0,this._paddingExceptionsProviders=new g.Set}return d(b,a),b.prototype.autoDomain=function(){return this._domainMin=null,this._domainMax=null,a.prototype.autoDomain.call(this),this},b.prototype._autoDomainIfAutomaticMode=function(){if(null!=this._domainMin&&null!=this._domainMax)return void this._setDomain([this._domainMin,this._domainMax]);var b=this._getExtent();if(null!=this._domainMin){var c=b[1];return this._domainMin>=c&&(c=this._expandSingleValueDomain([this._domainMin,this._domainMin])[1]),void this._setDomain([this._domainMin,c])}if(null!=this._domainMax){var d=b[0];return this._domainMax<=d&&(d=this._expandSingleValueDomain([this._domainMax,this._domainMax])[0]),void this._setDomain([d,this._domainMax])}a.prototype._autoDomainIfAutomaticMode.call(this)},b.prototype._getExtent=function(){var a=this._getAllIncludedValues(),b=this._defaultExtent();if(0!==a.length){var c=[g.Math.min(a,b[0]),g.Math.max(a,b[1])];b=this._padDomain(c)}return null!=this._domainMin&&(b[0]=this._domainMin),null!=this._domainMax&&(b[1]=this._domainMax),b},b.prototype.addPaddingExceptionsProvider=function(a){return this._paddingExceptionsProviders.add(a),this._autoDomainIfAutomaticMode(),this},b.prototype.removePaddingExceptionsProvider=function(a){return this._paddingExceptionsProviders["delete"](a),this._autoDomainIfAutomaticMode(),this},b.prototype.padProportion=function(a){if(null==a)return this._padProportion;if(a<0)throw new Error("padProportion must be non-negative");return this._padProportion=a,this._autoDomainIfAutomaticMode(),this},b.prototype._padDomain=function(a){var b=this;if(a[0].valueOf()===a[1].valueOf())return this._expandSingleValueDomain(a);if(0===this._padProportion)return a;var c=this._padProportion/2,d=a[0],e=a[1],f=!1,g=!1;this._paddingExceptionsProviders.forEach(function(a){var c=a(b);c.forEach(function(a){a.valueOf()===d.valueOf()&&(f=!0),a.valueOf()===e.valueOf()&&(g=!0)})});var h=this._backingScaleDomain();this._backingScaleDomain(a);var i=f?d:this.invert(this.scale(d)-(this.scale(e)-this.scale(d))*c),j=g?e:this.invert(this.scale(e)+(this.scale(e)-this.scale(d))*c);return this._backingScaleDomain(h),this._snappingDomainEnabled?this._niceDomain([i,j]):[i,j]},b.prototype.snappingDomainEnabled=function(a){return null==a?this._snappingDomainEnabled:(this._snappingDomainEnabled=a,this._autoDomainIfAutomaticMode(),this)},b.prototype._expandSingleValueDomain=function(a){return a},b.prototype.invert=function(a){throw new Error("Subclasses should override invert")},b.prototype.domain=function(b){return null!=b&&(this._domainMin=b[0],this._domainMax=b[1]),a.prototype.domain.call(this,b)},b.prototype.domainMin=function(a){return null==a?this.domain()[0]:(this._domainMin=a,this._autoDomainIfAutomaticMode(),this)},b.prototype.domainMax=function(a){return null==a?this.domain()[1]:(this._domainMax=a,this._autoDomainIfAutomaticMode(),this)},b.prototype.extentOfValues=function(a){var b=e.extent(a.filter(function(a){return g.Math.isValidNumber(+a)}));return null==b[0]||null==b[1]?[]:b},b.prototype.zoom=function(a,b){var c=this,d=function(d){return c.invert(f.zoomAt(d,a,b))};this.domain(this.range().map(d))},b.prototype.pan=function(a){var b=this,c=function(c){return b.invert(c+a)};this.domain(this.range().map(c))},b.prototype.scaleTransformation=function(a){throw new Error("Subclasses should override scaleTransformation")},b.prototype.invertedTransformation=function(a){throw new Error("Subclasses should override invertedTransformation")},b.prototype.getTransformationDomain=function(){throw new Error("Subclasses should override getTransformationDomain")},b.prototype._setDomain=function(b){var c=function(a){return g.Math.isNaN(a)||a===1/0||a===-(1/0)};return c(b[0])||c(b[1])?void g.Window.warn("Warning: QuantitativeScales cannot take NaN or Infinity as a domain value. Ignoring."):void a.prototype._setDomain.call(this,b)},b.prototype.defaultTicks=function(){throw new Error("Subclasses should override _getDefaultTicks")},b.prototype.ticks=function(){return this._tickGenerator(this)},b.prototype._niceDomain=function(a,b){throw new Error("Subclasses should override _niceDomain")},b.prototype._defaultExtent=function(){throw new Error("Subclasses should override _defaultExtent")},b.prototype.tickGenerator=function(a){return null==a?this._tickGenerator:(this._tickGenerator=a,this)},b._DEFAULT_NUM_TICKS=10,b}(h.Scale);b.QuantitativeScale=i},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(62)),d(c(63)),d(c(64))},function(a,b,c){"use strict";var d=function(){function a(){var a=this;this._anchorCallback=function(b){return a._anchor(b)},this._enabled=!0}return a.prototype._anchor=function(a){this._isAnchored=!0},a.prototype._unanchor=function(){this._isAnchored=!1},a.prototype.attachTo=function(a){return this._disconnect(),this._componentAttachedTo=a,this._connect(),this},a.prototype._connect=function(){this.enabled()&&null!=this._componentAttachedTo&&!this._isAnchored&&this._componentAttachedTo.onAnchor(this._anchorCallback)},a.prototype.detachFrom=function(a){return this._disconnect(),this._componentAttachedTo=null,this},a.prototype._disconnect=function(){this._isAnchored&&this._unanchor(),null!=this._componentAttachedTo&&this._componentAttachedTo.offAnchor(this._anchorCallback)},a.prototype.enabled=function(a){return null==a?this._enabled:(this._enabled=a,this._enabled?this._connect():this._disconnect(),this)},a.prototype._translateToComponentSpace=function(a){var b=this._componentAttachedTo.originToSVG();return{x:a.x-b.x,y:a.y-b.y}},a.prototype._isInsideComponent=function(a){return 0<=a.x&&0<=a.y&&a.x<=this._componentAttachedTo.width()&&a.y<=this._componentAttachedTo.height()},a}();b.Interaction=d},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(104)),d(c(105)),d(c(106)),d(c(107)),d(c(108))},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(72)),d(c(73)),d(c(74)),d(c(31)),d(c(75)),d(c(76))},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(3),f=c(0),g=c(2),h=function(a){function b(){var b=this;a.call(this),this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!1,this._deferredRendering=!1,this._cachedDomainX=[null,null],this._cachedDomainY=[null,null],this.addClass("xy-plot"),this._adjustYDomainOnChangeFromXCallback=function(a){return b._adjustYDomainOnChangeFromX()},this._adjustXDomainOnChangeFromYCallback=function(a){return b._adjustXDomainOnChangeFromY()};var c=0,d=0,e=1,f=1,g=[null,null],h=[null,null],i=0,j=500,k=function(){null!=b._renderArea&&(b._renderArea.attr("transform","translate("+c+", "+d+")scale("+e+", "+f+")"),clearTimeout(i),i=setTimeout(function(){b._cachedDomainX=g,b._cachedDomainY=h,c=0,d=0,e=1,f=1,b.render(),b._renderArea.attr("transform","translate(0, 0) scale(1, 1)")},j))},l=function(a){b._isAnchored&&(g=a.domain(),e=(a.scale(b._cachedDomainX[1])-a.scale(b._cachedDomainX[0]))/(a.scale(g[1])-a.scale(g[0]))||1,c=a.scale(b._cachedDomainX[0])-a.scale(g[0])||0,k())},m=function(a){b._isAnchored&&(h=a.domain(),f=(a.scale(b._cachedDomainY[1])-a.scale(b._cachedDomainY[0]))/(a.scale(h[1])-a.scale(h[0]))||1,d=a.scale(b._cachedDomainY[0])-a.scale(h[0])*f||0,k())};this._renderCallback=function(a){b.deferredRendering()&&b.x()&&b.x().scale===a?l(a):b.deferredRendering()&&b.y()&&b.y().scale===a?m(a):b.render()}}return d(b,a),b.prototype.entityNearest=function(b){var c=this._invertedBounds(),d=this._invertPixelPoint(b);return a.prototype.entityNearest.call(this,d,c)},b.prototype.deferredRendering=function(a){return null==a?this._deferredRendering:(a&&this._isAnchored&&(this.x()&&this.x().scale&&(this._cachedDomainX=this.x().scale.domain()),this.y()&&this.y().scale&&(this._cachedDomainY=this.y().scale.domain())),this._deferredRendering=a,this)},b.prototype.x=function(a,c){if(null==a)return this._propertyBindings.get(b._X_KEY);this._bindProperty(b._X_KEY,a,c);var d=this.width();return null!=c&&null!=d&&c.range([0,d]),this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain(),this.render(),this},b.prototype.y=function(a,c){if(null==a)return this._propertyBindings.get(b._Y_KEY);this._bindProperty(b._Y_KEY,a,c);var d=this.height();return null!=c&&null!=d&&(c instanceof e.Category?c.range([0,d]):c.range([d,0])),this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain(),this.render(),this},b.prototype._filterForProperty=function(a){return"x"===a&&this._autoAdjustXScaleDomain?this._makeFilterByProperty("y"):"y"===a&&this._autoAdjustYScaleDomain?this._makeFilterByProperty("x"):null},b.prototype._makeFilterByProperty=function(a){var b=this._propertyBindings.get(a);if(null!=b){var c=b.accessor,d=b.scale;if(null!=d)return function(a,b,e){var g=d.range();return f.Math.inRange(d.scale(c(a,b,e)),g[0],g[1])}}return null},b.prototype._uninstallScaleForKey=function(c,d){a.prototype._uninstallScaleForKey.call(this,c,d);var e=d===b._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback;
c.offUpdate(e)},b.prototype._installScaleForKey=function(c,d){a.prototype._installScaleForKey.call(this,c,d);var e=d===b._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback;c.onUpdate(e)},b.prototype.destroy=function(){return a.prototype.destroy.call(this),this.x().scale&&this.x().scale.offUpdate(this._adjustYDomainOnChangeFromXCallback),this.y().scale&&this.y().scale.offUpdate(this._adjustXDomainOnChangeFromYCallback),this},b.prototype.autorangeMode=function(a){if(null==a)return this._autoAdjustXScaleDomain?"x":this._autoAdjustYScaleDomain?"y":"none";switch(a){case"x":this._autoAdjustXScaleDomain=!0,this._autoAdjustYScaleDomain=!1,this._adjustXDomainOnChangeFromY();break;case"y":this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!0,this._adjustYDomainOnChangeFromX();break;case"none":this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!1;break;default:throw new Error("Invalid scale name '"+a+"', must be 'x', 'y' or 'none'")}return this},b.prototype.computeLayout=function(b,c,d){a.prototype.computeLayout.call(this,b,c,d);var f=this.x(),g=f&&f.scale;null!=g&&g.range([0,this.width()]);var h=this.y(),i=h&&h.scale;return null!=i&&(i instanceof e.Category?i.range([0,this.height()]):i.range([this.height(),0])),this},b.prototype._updateXExtentsAndAutodomain=function(){this._updateExtentsForProperty("x");var a=this.x().scale;null!=a&&a.autoDomain()},b.prototype._updateYExtentsAndAutodomain=function(){this._updateExtentsForProperty("y");var a=this.y().scale;null!=a&&a.autoDomain()},b.prototype.showAllData=function(){return this._updateXExtentsAndAutodomain(),this._updateYExtentsAndAutodomain(),this},b.prototype._adjustYDomainOnChangeFromX=function(){this._projectorsReady()&&this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain()},b.prototype._adjustXDomainOnChangeFromY=function(){this._projectorsReady()&&this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain()},b.prototype._buildLightweightPlotEntities=function(b){var c=this;return a.prototype._buildLightweightPlotEntities.call(this,b).map(function(a){return a.position=c._invertPixelPoint(a.position),a})},b.prototype._projectorsReady=function(){var a=this.x(),b=this.y();return null!=a&&null!=a.accessor&&null!=b&&null!=b.accessor},b.prototype._invertedBounds=function(){var a=this.bounds(),b=this._invertPixelPoint(a.topLeft),c=this._invertPixelPoint(a.bottomRight);return{topLeft:{x:Math.min(b.x,c.x),y:Math.min(b.y,c.y)},bottomRight:{x:Math.max(c.x,b.x),y:Math.max(c.y,b.y)}}},b.prototype._invertPixelPoint=function(a){var b=this.x(),c=this.y();return{x:b.scale.invertedTransformation(a.x),y:c.scale.invertedTransformation(a.y)}},b.prototype._pixelPoint=function(a,b,c){var d=g.Plot._scaledAccessor(this.x()),e=g.Plot._scaledAccessor(this.y());return{x:d(a,b,c),y:e(a,b,c)}},b.prototype._getDataToDraw=function(){var b=this,c=a.prototype._getDataToDraw.call(this),d=function(a,c,d){var e=g.Plot._scaledAccessor(b.x())(a,c,d),h=g.Plot._scaledAccessor(b.y())(a,c,d);return f.Math.isValidNumber(e)&&f.Math.isValidNumber(h)};return this.datasets().forEach(function(a){c.set(a,c.get(a).filter(function(b,c){return d(b,c,a)}))}),c},b._X_KEY="x",b._Y_KEY="y",b}(g.Plot);b.XYPlot=h},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(35)),d(c(21)),d(c(36)),d(c(77)),d(c(37)),d(c(78)),d(c(79)),d(c(80)),d(c(81)),d(c(82)),d(c(83)),d(c(84))},function(a,b,c){"use strict";var d=c(0),e=function(){function a(){this._autoDomainAutomatically=!0,this._domainModificationInProgress=!1,this._callbacks=new d.CallbackSet,this._includedValuesProviders=new d.Set}return a.prototype.extentOfValues=function(a){return[]},a.prototype._getAllIncludedValues=function(){var a=this,b=[];return this._includedValuesProviders.forEach(function(c){var d=c(a);b=b.concat(d)}),b},a.prototype._getExtent=function(){return[]},a.prototype.onUpdate=function(a){return this._callbacks.add(a),this},a.prototype.offUpdate=function(a){return this._callbacks["delete"](a),this},a.prototype._dispatchUpdate=function(){this._callbacks.callCallbacks(this)},a.prototype.autoDomain=function(){return this._autoDomainAutomatically=!0,this._setDomain(this._getExtent()),this},a.prototype._autoDomainIfAutomaticMode=function(){this._autoDomainAutomatically&&this.autoDomain()},a.prototype.scale=function(a){throw new Error("Subclasses should override scale")},a.prototype.domain=function(a){return null==a?this._getDomain():(this._autoDomainAutomatically=!1,this._setDomain(a),this)},a.prototype._getDomain=function(){throw new Error("Subclasses should override _getDomain")},a.prototype._setDomain=function(a){this._domainModificationInProgress||(this._domainModificationInProgress=!0,this._backingScaleDomain(a),this._dispatchUpdate(),this._domainModificationInProgress=!1)},a.prototype._backingScaleDomain=function(a){throw new Error("Subclasses should override _backingDomain")},a.prototype.range=function(a){return null==a?this._getRange():(this._setRange(a),this)},a.prototype._getRange=function(){throw new Error("Subclasses should override _getRange")},a.prototype._setRange=function(a){throw new Error("Subclasses should override _setRange")},a.prototype.addIncludedValuesProvider=function(a){return this._includedValuesProviders.add(a),this._autoDomainIfAutomaticMode(),this},a.prototype.removeIncludedValuesProvider=function(a){return this._includedValuesProviders["delete"](a),this._autoDomainIfAutomaticMode(),this},a}();b.Scale=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(5),h=c(8),i=c(0),j=function(a){function b(b,c){var d=this;if(a.call(this),this._endTickLength=5,this._innerTickLength=5,this._tickLabelPadding=10,this._margin=15,this._showEndTickLabels=!1,this._annotationsEnabled=!1,this._annotationTierCount=1,null==b||null==c)throw new Error("Axis requires a scale and orientation");this._scale=b,this.orientation(c),this._setDefaultAlignment(),this.addClass("axis"),this.isHorizontal()?this.addClass("x-axis"):this.addClass("y-axis"),this.formatter(h.identity()),this._rescaleCallback=function(a){return d._rescale()},this._scale.onUpdate(this._rescaleCallback),this._annotatedTicks=[],this._annotationFormatter=h.identity()}return d(b,a),b.prototype.destroy=function(){a.prototype.destroy.call(this),this._scale.offUpdate(this._rescaleCallback)},b.prototype._computeWidth=function(){return this._maxLabelTickLength()},b.prototype._computeHeight=function(){return this._maxLabelTickLength()},b.prototype.requestedSpace=function(a,c){var d=0,e=0;if(this.isHorizontal()){if(e=this._computeHeight()+this._margin,this.annotationsEnabled()){var f=this._annotationMeasurer.measure().height+2*b._ANNOTATION_LABEL_PADDING;e+=f*this.annotationTierCount()}}else if(d=this._computeWidth()+this._margin,this.annotationsEnabled()){var f=this._annotationMeasurer.measure().height+2*b._ANNOTATION_LABEL_PADDING;d+=f*this.annotationTierCount()}return{minWidth:d,minHeight:e}},b.prototype.fixedHeight=function(){return this.isHorizontal()},b.prototype.fixedWidth=function(){return!this.isHorizontal()},b.prototype._rescale=function(){this.render()},b.prototype.computeLayout=function(b,c,d){return a.prototype.computeLayout.call(this,b,c,d),this.isHorizontal()?this._scale.range([0,this.width()]):this._scale.range([this.height(),0]),this},b.prototype._setup=function(){a.prototype._setup.call(this),this._tickMarkContainer=this.content().append("g").classed(b.TICK_MARK_CLASS+"-container",!0),this._tickLabelContainer=this.content().append("g").classed(b.TICK_LABEL_CLASS+"-container",!0),this._baseline=this.content().append("line").classed("baseline",!0),this._annotationContainer=this.content().append("g").classed("annotation-container",!0),this._annotationContainer.append("g").classed("annotation-line-container",!0),this._annotationContainer.append("g").classed("annotation-circle-container",!0),this._annotationContainer.append("g").classed("annotation-rect-container",!0);var c=this._annotationContainer.append("g").classed("annotation-label-container",!0);this._annotationMeasurer=new f.CacheMeasurer(c),this._annotationWriter=new f.Writer(this._annotationMeasurer)},b.prototype._getTickValues=function(){return[]},b.prototype.renderImmediately=function(){var a=this._getTickValues(),c=this._tickMarkContainer.selectAll("."+b.TICK_MARK_CLASS).data(a);return c.enter().append("line").classed(b.TICK_MARK_CLASS,!0),c.attr(this._generateTickMarkAttrHash()),e.select(c[0][0]).classed(b.END_TICK_MARK_CLASS,!0).attr(this._generateTickMarkAttrHash(!0)),e.select(c[0][a.length-1]).classed(b.END_TICK_MARK_CLASS,!0).attr(this._generateTickMarkAttrHash(!0)),c.exit().remove(),this._baseline.attr(this._generateBaselineAttrHash()),this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations(),this},b.prototype.annotatedTicks=function(a){return null==a?this._annotatedTicks:(this._annotatedTicks=a,this.render(),this)},b.prototype.annotationFormatter=function(a){return null==a?this._annotationFormatter:(this._annotationFormatter=a,this.render(),this)},b.prototype.annotationsEnabled=function(a){return null==a?this._annotationsEnabled:(this._annotationsEnabled=a,this.redraw(),this)},b.prototype.annotationTierCount=function(a){if(null==a)return this._annotationTierCount;if(a<0)throw new Error("annotationTierCount cannot be negative");return this._annotationTierCount=a,this.redraw(),this},b.prototype._drawAnnotations=function(){var a=this,c=b._ANNOTATION_LABEL_PADDING,d=new i.Map,f=this._annotatedTicksToRender();f.forEach(function(b){var e=a._annotationMeasurer.measure(a.annotationFormatter()(b)),f={width:e.width+2*c,height:e.height+2*c};d.set(b,f)});var g=this._annotationMeasurer.measure().height+2*c,h=this._annotationToTier(d),j=new i.Set,k=this.isHorizontal()?this.height():this.width(),l=this._coreSize(),m=Math.min(this.annotationTierCount(),Math.floor((k-l)/g));h.forEach(function(a,b){(a===-1||a>=m)&&j.add(b)});var n,o=function(a,b,c){var d=a.selectAll("."+c).data(f);return d.enter().append(b).classed(c,!0),d.exit().remove(),d},p=function(b){switch(a.orientation()){case"bottom":case"right":return h.get(b)*g+l;case"top":case"left":return k-l-h.get(b)*g}},q=function(b){return a._scale.scale(b)},r=function(a){return j.has(a)?"hidden":"visible"};switch(this.orientation()){case"bottom":case"right":n=0;break;case"top":n=this.height();break;case"left":n=this.width()}var s=this.isHorizontal();o(this._annotationContainer.select(".annotation-line-container"),"line",b.ANNOTATION_LINE_CLASS).attr({x1:s?q:n,x2:s?q:p,y1:s?n:q,y2:s?p:q,visibility:r}),o(this._annotationContainer.select(".annotation-circle-container"),"circle",b.ANNOTATION_CIRCLE_CLASS).attr({cx:s?q:n,cy:s?n:q,r:3});var t=function(b){switch(a.orientation()){case"bottom":case"right":return p(b);case"top":case"left":return p(b)-d.get(b).height}};o(this._annotationContainer.select(".annotation-rect-container"),"rect",b.ANNOTATION_RECT_CLASS).attr({x:s?q:t,y:s?t:q,width:s?function(a){return d.get(a).width}:function(a){return d.get(a).height},height:s?function(a){return d.get(a).height}:function(a){return d.get(a).width},visibility:r});var u=this._annotationWriter,v=this.annotationFormatter(),w=o(this._annotationContainer.select(".annotation-label-container"),"g",b.ANNOTATION_LABEL_CLASS);w.selectAll(".text-container").remove(),w.attr({transform:function(a){var b=s?q(a):t(a),c=s?t(a):q(a);return"translate("+b+","+c+")"},visibility:r}).each(function(a){var b={selection:e.select(this),xAlign:"center",yAlign:"center",textRotation:s?0:90};u.write(v(a),s?d.get(a).width:d.get(a).height,s?d.get(a).height:d.get(a).width,b)})},b.prototype._annotatedTicksToRender=function(){var a=this,b=this._scale.range();return i.Array.uniq(this.annotatedTicks().filter(function(c){return null!=c&&i.Math.inRange(a._scale.scale(c),b[0],b[1])}))},b.prototype._coreSize=function(){var a=this.isHorizontal()?this.height():this.width(),b=this.isHorizontal()?this._computeHeight():this._computeWidth();return Math.min(b,a)},b.prototype._annotationTierHeight=function(){return this._annotationMeasurer.measure().height+2*b._ANNOTATION_LABEL_PADDING},b.prototype._annotationToTier=function(a){var b=this,c=[[]],d=new i.Map,e=this.isHorizontal()?this.width():this.height();return this._annotatedTicksToRender().forEach(function(f){var g=b._scale.scale(f),h=a.get(f).width;if(g<0||g+h>e)return void d.set(f,-1);for(var i=function(d){return c[d].some(function(c){var d=b._scale.scale(c),e=a.get(c).width;return g+h>=d&&g<=d+e})},j=0;i(j);)j++,c.length===j&&c.push([]);c[j].push(f),d.set(f,j)}),d},b.prototype._removeAnnotations=function(){this._annotationContainer.selectAll(".annotation-line").remove(),this._annotationContainer.selectAll(".annotation-circle").remove(),this._annotationContainer.selectAll(".annotation-rect").remove(),this._annotationContainer.selectAll(".annotation-label").remove()},b.prototype._generateBaselineAttrHash=function(){var a={x1:0,y1:0,x2:0,y2:0};switch(this._orientation){case"bottom":a.x2=this.width();break;case"top":a.x2=this.width(),a.y1=this.height(),a.y2=this.height();break;case"left":a.x1=this.width(),a.x2=this.width(),a.y2=this.height();break;case"right":a.y2=this.height()}return a},b.prototype._generateTickMarkAttrHash=function(a){var b=this;void 0===a&&(a=!1);var c={x1:0,y1:0,x2:0,y2:0},d=function(a){return b._scale.scale(a)};this.isHorizontal()?(c.x1=d,c.x2=d):(c.y1=d,c.y2=d);var e=a?this._endTickLength:this._innerTickLength;switch(this._orientation){case"bottom":c.y2=e;break;case"top":c.y1=this.height(),c.y2=this.height()-e;break;case"left":c.x1=this.width(),c.x2=this.width()-e;break;case"right":c.x2=e}return c},b.prototype._setDefaultAlignment=function(){switch(this._orientation){case"bottom":this.yAlignment("top");break;case"top":this.yAlignment("bottom");break;case"left":this.xAlignment("right");break;case"right":this.xAlignment("left")}},b.prototype.isHorizontal=function(){return"top"===this._orientation||"bottom"===this._orientation},b.prototype.getScale=function(){return this._scale},b.prototype.formatter=function(a){return null==a?this._formatter:(this._formatter=a,this.redraw(),this)},b.prototype.innerTickLength=function(a){if(null==a)return this._innerTickLength;if(a<0)throw new Error("inner tick length must be positive");return this._innerTickLength=a,this.redraw(),this},b.prototype.endTickLength=function(a){if(null==a)return this._endTickLength;if(a<0)throw new Error("end tick length must be positive");return this._endTickLength=a,this.redraw(),this},b.prototype._maxLabelTickLength=function(){return this.showEndTickLabels()?Math.max(this.innerTickLength(),this.endTickLength()):this.innerTickLength()},b.prototype.tickLabelPadding=function(a){if(null==a)return this._tickLabelPadding;if(a<0)throw new Error("tick label padding must be positive");return this._tickLabelPadding=a,this.redraw(),this},b.prototype.margin=function(a){if(null==a)return this._margin;if(a<0)throw new Error("margin size must be positive");return this._margin=a,this.redraw(),this},b.prototype.orientation=function(a){if(null==a)return this._orientation;var b=a.toLowerCase();if("top"!==b&&"bottom"!==b&&"left"!==b&&"right"!==b)throw new Error("unsupported orientation");return this._orientation=b,this.redraw(),this},b.prototype.showEndTickLabels=function(a){return null==a?this._showEndTickLabels:(this._showEndTickLabels=a,this.render(),this)},b.prototype._showAllTickMarks=function(){this._tickMarkContainer.selectAll("."+b.TICK_MARK_CLASS).each(function(){e.select(this).style("visibility","inherit")})},b.prototype._showAllTickLabels=function(){this._tickLabelContainer.selectAll("."+b.TICK_LABEL_CLASS).each(function(){e.select(this).style("visibility","inherit")})},b.prototype._hideOverflowingTickLabels=function(){var a=this._boundingBox.node().getBoundingClientRect(),c=this._tickLabelContainer.selectAll("."+b.TICK_LABEL_CLASS);c.empty()||c.each(function(b,c){i.DOM.clientRectInside(this.getBoundingClientRect(),a)||e.select(this).style("visibility","hidden")})},b.prototype._hideTickMarksWithoutLabel=function(){var a=this._tickMarkContainer.selectAll("."+b.TICK_MARK_CLASS),c=this._tickLabelContainer.selectAll("."+b.TICK_LABEL_CLASS).filter(function(a,b){var c=e.select(this).style("visibility");return"inherit"===c||"visible"===c}),d=[];c.each(function(a){return d.push(a)}),a.each(function(a,b){d.indexOf(a)===-1&&e.select(this).style("visibility","hidden")})},b.END_TICK_MARK_CLASS="end-tick-mark",b.TICK_MARK_CLASS="tick-mark",b.TICK_LABEL_CLASS="tick-label",b.ANNOTATION_LINE_CLASS="annotation-line",b.ANNOTATION_RECT_CLASS="annotation-rect",b.ANNOTATION_CIRCLE_CLASS="annotation-circle",b.ANNOTATION_LABEL_CLASS="annotation-label",b._ANNOTATION_LABEL_PADDING=4,b}(g.Component);b.Axis=j},function(a,b,c){"use strict";b.SHOW_WARNINGS=!0,b.ADD_TITLE_ELEMENTS=!0},function(a,b,c){"use strict";var d=c(0),e=function(){function a(){this._eventToProcessingFunction={},this._eventNameToCallbackSet={},this._connected=!1}return a.prototype._hasNoCallbacks=function(){for(var a=Object.keys(this._eventNameToCallbackSet),b=0;b<a.length;b++)if(0!==this._eventNameToCallbackSet[a[b]].size)return!1;return!0},a.prototype._connect=function(){var a=this;this._connected||(Object.keys(this._eventToProcessingFunction).forEach(function(b){var c=a._eventToProcessingFunction[b];document.addEventListener(b,c)}),this._connected=!0)},a.prototype._disconnect=function(){var a=this;this._connected&&this._hasNoCallbacks()&&(Object.keys(this._eventToProcessingFunction).forEach(function(b){var c=a._eventToProcessingFunction[b];document.removeEventListener(b,c)}),this._connected=!1)},a.prototype._addCallbackForEvent=function(a,b){null==this._eventNameToCallbackSet[a]&&(this._eventNameToCallbackSet[a]=new d.CallbackSet),this._eventNameToCallbackSet[a].add(b),this._connect()},a.prototype._removeCallbackForEvent=function(a,b){null!=this._eventNameToCallbackSet[a]&&this._eventNameToCallbackSet[a]["delete"](b),this._disconnect()},a.prototype._callCallbacksForEvent=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=this._eventNameToCallbackSet[a];null!=d&&d.callCallbacks.apply(d,b)},a}();b.Dispatcher=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(6),h=c(9),i=c(8),j=c(3),k=c(10),l=c(0),m=c(16),n=c(2),o=c(15),p=function(a){function b(c){var d=this;if(void 0===c&&(c=b.ORIENTATION_VERTICAL),a.call(this),this._labelFormatter=i.identity(),this._labelsEnabled=!1,this._hideBarsIfAnyAreTooWide=!0,this._barPixelWidth=0,this.addClass("bar-plot"),c!==b.ORIENTATION_VERTICAL&&c!==b.ORIENTATION_HORIZONTAL)throw new Error(c+" is not a valid orientation for Plots.Bar");this._isVertical=c===b.ORIENTATION_VERTICAL,this.animator("baseline",new g.Null),this.attr("fill",(new j.Color).range()[0]),this.attr("width",function(){return d._barPixelWidth}),this._labelConfig=new l.Map,this._baselineValueProvider=function(){return[d.baselineValue()]},this._updateBarPixelWidthCallback=function(){return d._updateBarPixelWidth()}}return d(b,a),b.prototype.x=function(b,c){return null==b?a.prototype.x.call(this):(null==c?a.prototype.x.call(this,b):(a.prototype.x.call(this,b,c),c.onUpdate(this._updateBarPixelWidthCallback)),this._updateValueScale(),this)},b.prototype.y=function(b,c){return null==b?a.prototype.y.call(this):(null==c?a.prototype.y.call(this,b):(a.prototype.y.call(this,b,c),c.onUpdate(this._updateBarPixelWidthCallback)),this._updateValueScale(),this)},b.prototype.orientation=function(){return this._isVertical?b.ORIENTATION_VERTICAL:b.ORIENTATION_HORIZONTAL},b.prototype.render=function(){return this._updateBarPixelWidth(),this._updateExtents(),a.prototype.render.call(this),this},b.prototype._createDrawer=function(a){return new h.Rectangle(a)},b.prototype._setup=function(){a.prototype._setup.call(this),this._baseline=this._renderArea.append("line").classed("baseline",!0)},b.prototype.baselineValue=function(a){if(null==a){if(null!=this._baselineValue)return this._baselineValue;if(!this._projectorsReady())return 0;var b=this._isVertical?this.y().scale:this.x().scale;return b&&b instanceof j.Time?new Date(0):0}return this._baselineValue=a,this._updateValueScale(),this.render(),this},b.prototype.addDataset=function(b){return a.prototype.addDataset.call(this,b),this._updateBarPixelWidth(),this},b.prototype._addDataset=function(b){return b.onUpdate(this._updateBarPixelWidthCallback),a.prototype._addDataset.call(this,b),this},b.prototype.removeDataset=function(b){return b.offUpdate(this._updateBarPixelWidthCallback),a.prototype.removeDataset.call(this,b),this._updateBarPixelWidth(),this},b.prototype._removeDataset=function(b){return b.offUpdate(this._updateBarPixelWidthCallback),a.prototype._removeDataset.call(this,b),this},b.prototype.datasets=function(b){return null==b?a.prototype.datasets.call(this):(a.prototype.datasets.call(this,b),this._updateBarPixelWidth(),this)},b.prototype.labelsEnabled=function(a){return null==a?this._labelsEnabled:(this._labelsEnabled=a,this.render(),this)},b.prototype.labelFormatter=function(a){return null==a?this._labelFormatter:(this._labelFormatter=a,this.render(),this)},b.prototype._createNodesForDataset=function(c){var d=a.prototype._createNodesForDataset.call(this,c);d.renderArea().classed(b._BAR_AREA_CLASS,!0);var e=this._renderArea.append("g").classed(b._LABEL_AREA_CLASS,!0),g=new f.CacheMeasurer(e),h=new f.Writer(g);return this._labelConfig.set(c,{labelArea:e,measurer:g,writer:h}),d},b.prototype._removeDatasetNodes=function(b){a.prototype._removeDatasetNodes.call(this,b);var c=this._labelConfig.get(b);null!=c&&(c.labelArea.remove(),this._labelConfig["delete"](b))},b.prototype.entityNearest=function(a){var b,c=this,d=1/0,e=1/0,f=this._isVertical?a.x:a.y,g=this._isVertical?a.y:a.x,h=.5,i=this.bounds();return this._getEntityStore().forEach(function(j){if(c._entityVisibleOnPlot(j,i)){var k=0,m=0,n=c._pixelPoint(j.datum,j.index,j.dataset),o=l.DOM.elementBBox(j.drawer.selectionForIndex(j.validDatumIndex));if(!l.DOM.intersectsBBox(a.x,a.y,o,h)){var p=c._isVertical?n.x:n.y;k=Math.abs(f-p);var q=c._isVertical?o.y:o.x,r=q+(c._isVertical?o.height:o.width);if(g>=q-h&&g<=r+h)m=0;else{var s=c._isVertical?n.y:n.x;m=Math.abs(g-s)}}(k<d||k===d&&m<e)&&(b=j,d=k,e=m)}}),void 0!==b?this._lightweightPlotEntityToPlotEntity(b):void 0},b.prototype._entityVisibleOnPlot=function(a,b){var c=b.bottomRight.x-b.topLeft.x,d=b.bottomRight.y-b.topLeft.y,e={min:0,max:c},f={min:0,max:d},g=this._generateAttrToProjector(),h=a.datum,i=a.index,j=a.dataset,k={x:g.x(h,i,j),y:g.y(h,i,j),width:g.width(h,i,j),height:g.height(h,i,j)};return l.DOM.intersectsBBox(e,f,k)},b.prototype.entitiesAt=function(a){return this._entitiesIntersecting(a.x,a.y)},b.prototype.entitiesIn=function(a,b){var c,d;if(null==b){var e=a;c={min:e.topLeft.x,max:e.bottomRight.x},d={min:e.topLeft.y,max:e.bottomRight.y}}else c=a,d=b;return this._entitiesIntersecting(c,d)},b.prototype._entitiesIntersecting=function(a,b){var c=this,d=[];return this._getEntityStore().forEach(function(e){var f=e.drawer.selectionForIndex(e.validDatumIndex);l.DOM.intersectsBBox(a,b,l.DOM.elementBBox(f))&&d.push(c._lightweightPlotEntityToPlotEntity(e))}),d},b.prototype._updateValueScale=function(){if(this._projectorsReady()){var a=this._isVertical?this.y().scale:this.x().scale;if(a instanceof k.QuantitativeScale){var b=a;b.addPaddingExceptionsProvider(this._baselineValueProvider),b.addIncludedValuesProvider(this._baselineValueProvider)}}},b.prototype._additionalPaint=function(a){var b=this,c=this._isVertical?this.y().scale:this.x().scale,d=c.scale(this.baselineValue()),e={x1:this._isVertical?0:d,y1:this._isVertical?d:0,x2:this._isVertical?this.width():d,y2:this._isVertical?d:this.height()};this._getAnimator("baseline").animate(this._baseline,e),this.datasets().forEach(function(a){return b._labelConfig.get(a).labelArea.selectAll("g").remove()}),this._labelsEnabled&&l.Window.setTimeout(function(){return b._drawLabels()},a)},b.prototype._extentsForProperty=function(b){var c,d=this,f=a.prototype._extentsForProperty.call(this,b);if("x"===b&&this._isVertical)c=this.x();else{if("y"!==b||this._isVertical)return f;c=this.y()}if(!(c&&c.scale&&c.scale instanceof k.QuantitativeScale))return f;var g=c.scale;return f=f.map(function(a){return e.extent([g.invert(g.scale(a[0])-d._barPixelWidth/2),g.invert(g.scale(a[0])+d._barPixelWidth/2),g.invert(g.scale(a[1])-d._barPixelWidth/2),g.invert(g.scale(a[1])+d._barPixelWidth/2)])})},b.prototype._drawLabels=function(){var a=this,b=this._getDataToDraw(),c=!1;this.datasets().forEach(function(d){return c=c||a._drawLabel(b.get(d),d)}),this._hideBarsIfAnyAreTooWide&&c&&this.datasets().forEach(function(b){return a._labelConfig.get(b).labelArea.selectAll("g").remove()})},b.prototype._drawLabel=function(a,c){var d=this,e=this._generateAttrToProjector(),f=this._labelConfig.get(c),g=f.labelArea,h=f.measurer,i=f.writer,j=function(a,f){var j,k=d._isVertical?d.y().accessor:d.x().accessor,m=k(a,f,c),n=d._isVertical?d.y().scale:d.x().scale,o=null!=n?n.scale(m):m,p=null!=n?n.scale(d.baselineValue()):d.baselineValue(),q=e.width(a,f,c),r=e.height(a,f,c),s=d._labelFormatter(k(a,f,c)),t=h.measure(s),u="center",v="center",w={x:e.x(a,f,c),y:e.y(a,f,c)},x=q,y=r,z={x:w.x,y:w.y};if(d._isVertical){z.x+=x/2-t.width/2;var A=e.y(a,f,c),B=r;A+r>d.height()?B=d.height()-A:A<0&&(B=A+r);var C=b._LABEL_PADDING;j=t.height+2*C<=B,j?o<p?(w.y+=C,v="top",z.y+=C):(w.y-=C,v="bottom",z.y+=y-C-t.height):(y=r+C+t.height,o<=p?(w.y-=C+t.height,v="top",z.y-=C+t.height):(v="bottom",z.y+=r+C))}else{z.y+=y/2-t.height/2;var D=e.x(a,f,c),E=q;D+q>d.width()?E=d.width()-D:D<0&&(E=D+q);var C=b._LABEL_PADDING;j=t.width+2*C<=E,j?o<p?(w.x+=C,u="left",z.x+=C):(w.x-=C,u="right",z.x+=x-C-t.width):(x=q+C+t.width,o<p?(w.x-=C+t.width,u="left",z.x-=C+t.width):(u="right",z.x+=q+C))}var F=g.append("g").attr("transform","translate("+w.x+", "+w.y+")");if(j){F.classed("on-bar-label",!0);var G=e.fill(a,f,c),H=1.6*l.Color.contrast("white",G)<l.Color.contrast("black",G);F.classed(H?"dark-label":"light-label",!0)}else F.classed("off-bar-label",!0);var I=z.x<0||z.y<0||z.x+t.width>d.width()||z.y+t.height>d.height();F.style("visibility",I?"hidden":"inherit");var J={selection:F,xAlign:u,yAlign:v,textRotation:0};i.write(s,x,y,J);var K=d._isVertical?q<t.width+2*b._LABEL_PADDING:r<t.height+2*b._LABEL_PADDING;return K},k=a.map(j);return k.some(function(a){return a})},b.prototype._generateDrawSteps=function(){var a=[];if(this._animateOnNextRender()){var b=this._generateAttrToProjector(),c=this._isVertical?this.y().scale:this.x().scale,d=c.scale(this.baselineValue()),e=this._isVertical?"y":"x",f=this._isVertical?"height":"width";b[e]=function(){return d},b[f]=function(){return 0},a.push({attrToProjector:b,animator:this._getAnimator(m.Animator.RESET)})}return a.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(m.Animator.MAIN)}),a},b.prototype._generateAttrToProjector=function(){var b=a.prototype._generateAttrToProjector.call(this),c=this._isVertical?this.y().scale:this.x().scale,d=this._isVertical?"y":"x",e=this._isVertical?"x":"y",f=c.scale(this.baselineValue()),g=this._isVertical?n.Plot._scaledAccessor(this.x()):n.Plot._scaledAccessor(this.y()),h=b.width,i=this._isVertical?n.Plot._scaledAccessor(this.y()):n.Plot._scaledAccessor(this.x()),j=function(a,b,c){return Math.abs(f-i(a,b,c))};return b.width=this._isVertical?h:j,b.height=this._isVertical?j:h,b[e]=function(a,b,c){return g(a,b,c)-h(a,b,c)/2},b[d]=function(a,b,c){var d=i(a,b,c);return d>f?f:d},b},b.prototype._getBarPixelWidth=function(){if(!this._projectorsReady())return 0;var a,c=this._isVertical?this.x().scale:this.y().scale;if(c instanceof j.Category)a=c.rangeBand();else{var d=this._isVertical?this.x().accessor:this.y().accessor,f=e.set(l.Array.flatten(this.datasets().map(function(a){return a.data().map(function(b,c){return d(b,c,a)}).filter(function(a){return null!=a}).map(function(a){return a.valueOf()})}))).values().map(function(a){return+a});f.sort(function(a,b){return a-b});var g=f.map(function(a){return c.scale(a)}),h=e.pairs(g),i=this._isVertical?this.width():this.height();a=l.Math.min(h,function(a,b){return Math.abs(a[1]-a[0])},i*b._SINGLE_BAR_DIMENSION_RATIO),a*=b._BAR_WIDTH_RATIO}return a},b.prototype._updateBarPixelWidth=function(){this._barPixelWidth=this._getBarPixelWidth()},b.prototype.entities=function(b){if(void 0===b&&(b=this.datasets()),!this._projectorsReady())return[];var c=a.prototype.entities.call(this,b);return c},b.prototype._pixelPoint=function(a,b,c){var d,e,f=this._generateAttrToProjector(),g=f.x(a,b,c),h=f.y(a,b,c),i=f.width(a,b,c),j=f.height(a,b,c),k=(this._isVertical?n.Plot._scaledAccessor(this.y()):n.Plot._scaledAccessor(this.x()))(a,b,c),l=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue());return this._isVertical?(d=g+i/2,e=k<=l?h:h+j):(d=k>=l?g+i:g,e=h+j/2),{x:d,y:e}},b.prototype._uninstallScaleForKey=function(b,c){b.offUpdate(this._updateBarPixelWidthCallback),a.prototype._uninstallScaleForKey.call(this,b,c)},b.prototype._getDataToDraw=function(){var a=new l.Map,b=this._generateAttrToProjector();return this.datasets().forEach(function(c){var d=c.data().filter(function(a,d){return l.Math.isValidNumber(b.x(a,d,c))&&l.Math.isValidNumber(b.y(a,d,c))&&l.Math.isValidNumber(b.width(a,d,c))&&l.Math.isValidNumber(b.height(a,d,c))});a.set(c,d)}),a},b.ORIENTATION_VERTICAL="vertical",b.ORIENTATION_HORIZONTAL="horizontal",b._BAR_WIDTH_RATIO=.95,b._SINGLE_BAR_DIMENSION_RATIO=.4,b._BAR_AREA_CLASS="bar-area",b._LABEL_AREA_CLASS="bar-label-text-area",b._LABEL_PADDING=10,b}(o.XYPlot);b.Bar=p},function(a,b,c){"use strict";var d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(1),g=c(4),h=c(8),i=c(3),j=c(0),k=c(18);!function(a){a.second="second",a.minute="minute",a.hour="hour",a.day="day",a.week="week",a.month="month",a.year="year"}(d=b.TimeInterval||(b.TimeInterval={}));var l=function(a){function b(c,d){a.call(this,c,d),this._maxTimeIntervalPrecision=null,this._tierLabelPositions=[],this.addClass("time-axis"),this.tickLabelPadding(5),this.axisConfigurations(b._DEFAULT_TIME_AXIS_CONFIGURATIONS),this.annotationFormatter(h.time("%a %b %d, %Y"))}return e(b,a),b.prototype.tierLabelPositions=function(a){if(null==a)return this._tierLabelPositions;if(!a.every(function(a){return"between"===a.toLowerCase()||"center"===a.toLowerCase()}))throw new Error("Unsupported position for tier labels");return this._tierLabelPositions=a,this.redraw(),this},b.prototype.maxTimeIntervalPrecision=function(a){return null==a?this._maxTimeIntervalPrecision:(this._maxTimeIntervalPrecision=a,this.redraw(),this)},b.prototype.currentAxisConfiguration=function(){return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex]},b.prototype.axisConfigurations=function(a){if(null==a)return this._possibleTimeAxisConfigurations;this._possibleTimeAxisConfigurations=a,this._numTiers=j.Math.max(this._possibleTimeAxisConfigurations.map(function(a){return a.length}),0),this._isAnchored&&this._setupDomElements();for(var b=this.tierLabelPositions(),c=[],d=0;d<this._numTiers;d++)c.push(b[d]||"between");return this.tierLabelPositions(c),this.redraw(),this},b.prototype._getMostPreciseConfigurationIndex=function(){var a=this,b=this._possibleTimeAxisConfigurations.length;return this._possibleTimeAxisConfigurations.forEach(function(c,d){d<b&&c.every(function(b){return a._checkTimeAxisTierConfiguration(b)})&&(b=d)}),b===this._possibleTimeAxisConfigurations.length&&(j.Window.warn("zoomed out too far: could not find suitable interval to display labels"),
--b),b},b.prototype.orientation=function(b){if(b&&("right"===b.toLowerCase()||"left"===b.toLowerCase()))throw new Error(b+" is not a supported orientation for TimeAxis - only horizontal orientations are supported");return a.prototype.orientation.call(this,b)},b.prototype._computeHeight=function(){var a=this._measurer.measure().height;this._tierHeights=[];for(var b=0;b<this._numTiers;b++)this._tierHeights.push(a+this.tickLabelPadding()+("between"===this._tierLabelPositions[b]?0:this._maxLabelTickLength()));return f.sum(this._tierHeights)},b.prototype._getIntervalLength=function(a){var b=this._scale.domain()[0],c=i.Time.timeIntervalToD3Time(a.interval),d=c.offset(b,a.step);if(d>this._scale.domain()[1])return this.width();var e=Math.abs(this._scale.scale(d)-this._scale.scale(b));return e},b.prototype._maxWidthForInterval=function(a){return this._measurer.measure(a.formatter(b._LONG_DATE)).width},b.prototype._checkTimeAxisTierConfiguration=function(a){if(null!=this._maxTimeIntervalPrecision){var c=b._SORTED_TIME_INTERVAL_INDEX[this._maxTimeIntervalPrecision],d=b._SORTED_TIME_INTERVAL_INDEX[a.interval];if(null!=c&&null!=d&&d<c)return!1}var e=this._maxWidthForInterval(a)+2*this.tickLabelPadding();return Math.min(this._getIntervalLength(a),this.width())>=e},b.prototype._sizeFromOffer=function(b,c){var d=a.prototype._sizeFromOffer.call(this,b,c),e=this._tierHeights.reduce(function(a,b,c,e){return a+b>d.height?a:a+b}),f=this.margin()+(this.annotationsEnabled()?this.annotationTierCount()*this._annotationTierHeight():0);return d.height=Math.min(d.height,e+f),d},b.prototype._setup=function(){a.prototype._setup.call(this),this._setupDomElements()},b.prototype._setupDomElements=function(){this.content().selectAll("."+b.TIME_AXIS_TIER_CLASS).remove(),this._tierLabelContainers=[],this._tierMarkContainers=[],this._tierBaselines=[],this._tickLabelContainer.remove(),this._baseline.remove();for(var a=0;a<this._numTiers;++a){var c=this.content().append("g").classed(b.TIME_AXIS_TIER_CLASS,!0);this._tierLabelContainers.push(c.append("g").classed(k.Axis.TICK_LABEL_CLASS+"-container",!0)),this._tierMarkContainers.push(c.append("g").classed(k.Axis.TICK_MARK_CLASS+"-container",!0)),this._tierBaselines.push(c.append("line").classed("baseline",!0))}this._measurer=new g.CacheMeasurer(this._tierLabelContainers[0])},b.prototype._getTickIntervalValues=function(a){return this._scale.tickInterval(a.interval,a.step)},b.prototype._getTickValues=function(){var a=this;return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex].reduce(function(b,c){return b.concat(a._getTickIntervalValues(c))},[])},b.prototype._cleanTiers=function(){for(var a=0;a<this._tierLabelContainers.length;a++)this._tierLabelContainers[a].selectAll("."+k.Axis.TICK_LABEL_CLASS).remove(),this._tierMarkContainers[a].selectAll("."+k.Axis.TICK_MARK_CLASS).remove(),this._tierBaselines[a].style("visibility","hidden")},b.prototype._getTickValuesForConfiguration=function(a){var b=this._scale.tickInterval(a.interval,a.step),c=this._scale.domain(),d=b.map(function(a){return a.valueOf()});return d.indexOf(c[0].valueOf())===-1&&b.unshift(c[0]),d.indexOf(c[1].valueOf())===-1&&b.push(c[1]),b},b.prototype._renderTierLabels=function(a,b,c){var d=this,e=this._getTickValuesForConfiguration(b),g=[];"between"===this._tierLabelPositions[c]&&1===b.step?e.map(function(a,b){b+1>=e.length||g.push(new Date((e[b+1].valueOf()-e[b].valueOf())/2+e[b].valueOf()))}):g=e;var h=a.selectAll("."+k.Axis.TICK_LABEL_CLASS).data(g,function(a){return String(a.valueOf())}),i=h.enter().append("g").classed(k.Axis.TICK_LABEL_CLASS,!0);i.append("text");var l,m="center"===this._tierLabelPositions[c]||1===b.step?0:this.tickLabelPadding();l="bottom"===this.orientation()?f.sum(this._tierHeights.slice(0,c+1))-this.tickLabelPadding():"center"===this._tierLabelPositions[c]?this.height()-f.sum(this._tierHeights.slice(0,c))-this.tickLabelPadding()-this._maxLabelTickLength():this.height()-f.sum(this._tierHeights.slice(0,c))-this.tickLabelPadding();var n=h.selectAll("text");n.size()>0&&j.DOM.translate(n,m,l),h.exit().remove(),h.attr("transform",function(a){return"translate("+d._scale.scale(a)+",0)"});var o="center"===this._tierLabelPositions[c]||1===b.step?"middle":"start";h.selectAll("text").text(b.formatter).style("text-anchor",o)},b.prototype._renderTickMarks=function(a,b){var c=this._tierMarkContainers[b].selectAll("."+k.Axis.TICK_MARK_CLASS).data(a);c.enter().append("line").classed(k.Axis.TICK_MARK_CLASS,!0);var d=this._generateTickMarkAttrHash(),e=this._tierHeights.slice(0,b).reduce(function(a,b){return a+b},0);"bottom"===this.orientation()?(d.y1=e,d.y2=e+("center"===this._tierLabelPositions[b]?this.innerTickLength():this._tierHeights[b])):(d.y1=this.height()-e,d.y2=this.height()-(e+("center"===this._tierLabelPositions[b]?this.innerTickLength():this._tierHeights[b]))),c.attr(d),"bottom"===this.orientation()?(d.y1=e,d.y2=e+("center"===this._tierLabelPositions[b]?this.endTickLength():this._tierHeights[b])):(d.y1=this.height()-e,d.y2=this.height()-(e+("center"===this._tierLabelPositions[b]?this.endTickLength():this._tierHeights[b]))),f.select(c[0][0]).attr(d),f.select(c[0][c.size()-1]).attr(d),f.select(c[0][0]).classed(k.Axis.END_TICK_MARK_CLASS,!0),f.select(c[0][c.size()-1]).classed(k.Axis.END_TICK_MARK_CLASS,!0),c.exit().remove()},b.prototype._renderLabellessTickMarks=function(a){var b=this._tickMarkContainer.selectAll("."+k.Axis.TICK_MARK_CLASS).data(a);b.enter().append("line").classed(k.Axis.TICK_MARK_CLASS,!0);var c=this._generateTickMarkAttrHash();c.y2="bottom"===this.orientation()?this.tickLabelPadding():this.height()-this.tickLabelPadding(),b.attr(c),b.exit().remove()},b.prototype._generateLabellessTicks=function(){return this._mostPreciseConfigIndex<1?[]:this._getTickIntervalValues(this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex-1][0])},b.prototype.renderImmediately=function(){var a=this;this._mostPreciseConfigIndex=this._getMostPreciseConfigurationIndex();var b=this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex];this._cleanTiers(),b.forEach(function(b,c){return a._renderTierLabels(a._tierLabelContainers[c],b,c)});for(var c=b.map(function(b,c){return a._getTickValuesForConfiguration(b)}),d=0,e=0;e<Math.max(b.length,1);++e){var f=this._generateBaselineAttrHash();f.y1+="bottom"===this.orientation()?d:-d,f.y2=f.y1,this._tierBaselines[e].attr(f).style("visibility","inherit"),d+=this._tierHeights[e]}var g=[],h=this._scale.domain(),i=this._scale.scale(h[1])-this._scale.scale(h[0]);1.5*this._getIntervalLength(b[0])>=i&&(g=this._generateLabellessTicks()),this._renderLabellessTickMarks(g),this._hideOverflowingTiers();for(var e=0;e<b.length;++e)this._renderTickMarks(c[e],e),this._hideOverlappingAndCutOffLabels(e);return this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations(),this},b.prototype._hideOverflowingTiers=function(){var a=this,c=this.height(),d=0;this.content().selectAll("."+b.TIME_AXIS_TIER_CLASS).attr("visibility",function(b,e){return d+=a._tierHeights[e],d<=c?"inherit":"hidden"})},b.prototype._hideOverlappingAndCutOffLabels=function(a){var b,c=this,d=this._boundingBox.node().getBoundingClientRect(),e=function(a){return Math.floor(d.left)<=Math.ceil(a.left)&&Math.floor(d.top)<=Math.ceil(a.top)&&Math.floor(a.right)<=Math.ceil(d.left+c.width())&&Math.floor(a.bottom)<=Math.ceil(d.top+c.height())},g=this._tierMarkContainers[a].selectAll("."+k.Axis.TICK_MARK_CLASS).filter(function(a,b){var c=f.select(this).style("visibility");return"visible"===c||"inherit"===c}),h=g[0].map(function(a){return a.getBoundingClientRect()}),i=this._tierLabelContainers[a].selectAll("."+k.Axis.TICK_LABEL_CLASS).filter(function(a,b){var c=f.select(this).style("visibility");return"visible"===c||"inherit"===c});i.each(function(a,c){var d=this.getBoundingClientRect(),g=f.select(this),i=h[c],k=h[c+1],l=null!=b&&j.DOM.clientRectsOverlap(d,b),m=null!=i&&j.DOM.clientRectsOverlap(d,i),n=null!=k&&j.DOM.clientRectsOverlap(d,k);!e(d)||l||m||n?g.style("visibility","hidden"):(b=d,g.style("visibility","inherit"))})},b.TIME_AXIS_TIER_CLASS="time-axis-tier",b._SORTED_TIME_INTERVAL_INDEX=(c={},c[d.second]=0,c[d.minute]=1,c[d.hour]=2,c[d.day]=3,c[d.week]=4,c[d.month]=5,c[d.year]=6,c),b._DEFAULT_TIME_AXIS_CONFIGURATIONS=[[{interval:d.second,step:1,formatter:h.time("%I:%M:%S %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.second,step:5,formatter:h.time("%I:%M:%S %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.second,step:10,formatter:h.time("%I:%M:%S %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.second,step:15,formatter:h.time("%I:%M:%S %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.second,step:30,formatter:h.time("%I:%M:%S %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.minute,step:1,formatter:h.time("%I:%M %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.minute,step:5,formatter:h.time("%I:%M %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.minute,step:10,formatter:h.time("%I:%M %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.minute,step:15,formatter:h.time("%I:%M %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.minute,step:30,formatter:h.time("%I:%M %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.hour,step:1,formatter:h.time("%I %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.hour,step:3,formatter:h.time("%I %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.hour,step:6,formatter:h.time("%I %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.hour,step:12,formatter:h.time("%I %p")},{interval:d.day,step:1,formatter:h.time("%B %e, %Y")}],[{interval:d.day,step:1,formatter:h.time("%a %e")},{interval:d.month,step:1,formatter:h.time("%B %Y")}],[{interval:d.day,step:1,formatter:h.time("%e")},{interval:d.month,step:1,formatter:h.time("%B %Y")}],[{interval:d.month,step:1,formatter:h.time("%B")},{interval:d.year,step:1,formatter:h.time("%Y")}],[{interval:d.month,step:1,formatter:h.time("%b")},{interval:d.year,step:1,formatter:h.time("%Y")}],[{interval:d.month,step:3,formatter:h.time("%b")},{interval:d.year,step:1,formatter:h.time("%Y")}],[{interval:d.month,step:6,formatter:h.time("%b")},{interval:d.year,step:1,formatter:h.time("%Y")}],[{interval:d.year,step:1,formatter:h.time("%Y")}],[{interval:d.year,step:1,formatter:h.time("%y")}],[{interval:d.year,step:5,formatter:h.time("%Y")}],[{interval:d.year,step:25,formatter:h.time("%Y")}],[{interval:d.year,step:50,formatter:h.time("%Y")}],[{interval:d.year,step:100,formatter:h.time("%Y")}],[{interval:d.year,step:200,formatter:h.time("%Y")}],[{interval:d.year,step:500,formatter:h.time("%Y")}],[{interval:d.year,step:1e3,formatter:h.time("%Y")}]],b._LONG_DATE=new Date(9999,8,29,12,59,9999),b;var c}(k.Axis);b.Time=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(5),f=function(a){function b(){var b=this;a.call(this),this._detachCallback=function(a){return b.remove(a)}}return d(b,a),b.prototype.anchor=function(b){var c=this;return a.prototype.anchor.call(this,b),this._forEach(function(a){return a.anchor(c.content())}),this},b.prototype.render=function(){return this._forEach(function(a){return a.render()}),this},b.prototype.has=function(a){throw new Error("has() is not implemented on ComponentContainer")},b.prototype._adoptAndAnchor=function(a){a.parent(this),a.onDetach(this._detachCallback),this._isAnchored&&a.anchor(this.content())},b.prototype.remove=function(a){return this.has(a)&&(a.offDetach(this._detachCallback),this._remove(a),a.detach(),this.redraw()),this},b.prototype._remove=function(a){return!1},b.prototype._forEach=function(a){throw new Error("_forEach() is not implemented on ComponentContainer")},b.prototype.destroy=function(){a.prototype.destroy.call(this),this._forEach(function(a){return a.destroy()})},b}(e.Component);b.ComponentContainer=f},function(a,b,c){"use strict";function d(a){if(null==a)return q;switch(a.toLowerCase()){case j.IMMEDIATE:q=new l.Immediate;break;case j.ANIMATION_FRAME:q=new l.AnimationFrame;break;case j.TIMEOUT:q=new l.Timeout;break;default:k.Window.warn("Unrecognized renderPolicy: "+a)}}function e(a){p&&k.Window.warn("Registered to render while other components are flushing: request may be ignored"),m.add(a),h()}function f(a){n.add(a),m.add(a),h()}function g(a){f(a)}function h(){o||(o=!0,q.render())}function i(){if(o){n.forEach(function(a){return a.computeLayout()}),m.forEach(function(a){return a.render()}),p=!0;var a=new k.Set;m.forEach(function(b){try{b.renderImmediately()}catch(c){window.setTimeout(function(){throw c},0),a.add(b)}}),n=new k.Set,m=a,o=!1,p=!1}}var j,k=c(0),l=c(30),m=new k.Set,n=new k.Set,o=!1,p=!1;!function(a){a.IMMEDIATE="immediate",a.ANIMATION_FRAME="animationframe",a.TIMEOUT="timeout"}(j=b.Policy||(b.Policy={}));var q=new l.AnimationFrame;b.renderPolicy=d,b.registerToRender=e,b.registerToComputeLayoutAndRender=f,b.registerToComputeLayout=g,b.flush=i},function(a,b,c){"use strict";function d(){return function(a){return j.svg.symbol().type("circle").size(Math.PI*Math.pow(a/2,2))(null)}}function e(){return function(a){return j.svg.symbol().type("square").size(Math.pow(a,2))(null)}}function f(){return function(a){return j.svg.symbol().type("cross").size(5/9*Math.pow(a,2))(null)}}function g(){return function(a){return j.svg.symbol().type("diamond").size(Math.tan(Math.PI/6)*Math.pow(a,2)/2)(null)}}function h(){return function(a){return j.svg.symbol().type("triangle-up").size(Math.sqrt(3)*Math.pow(a/2,2))(null)}}function i(){return function(a){return j.svg.symbol().type("triangle-down").size(Math.sqrt(3)*Math.pow(a/2,2))(null)}}var j=c(1);b.circle=d,b.square=e,b.cross=f,b.diamond=g,b.triangleUp=h,b.triangleDown=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(14),f=c(0),g=c(29),h=c(34),i=function(a){function b(){a.call(this),this._detectionRadius=3,this._resizable=!1,this._movable=!1,this._hasCorners=!0,this.addClass("drag-box-layer"),this._dragInteraction=new e.Drag,this._setUpCallbacks(),this._dragInteraction.attachTo(this),this._dragStartCallbacks=new f.CallbackSet,this._dragCallbacks=new f.CallbackSet,this._dragEndCallbacks=new f.CallbackSet}return d(b,a),b.prototype._setUpCallbacks=function(){var a,b,c,d,e=this,f={newBox:0,resize:1,move:2},h=f.newBox,i=function(i){a=e._getResizingEdges(i);var j=e.bounds(),k=j.topLeft.x<=i.x&&i.x<=j.bottomRight.x&&j.topLeft.y<=i.y&&i.y<=j.bottomRight.y;e.boxVisible()&&(a.top||a.bottom||a.left||a.right)?h=f.resize:e.boxVisible()&&e.movable()&&k?h=f.move:(h=f.newBox,e._setBounds({topLeft:i,bottomRight:i}),e._xBoundsMode===g.PropertyMode.VALUE&&null!=e.xScale()&&e._setXExtent([e.xScale().invert(i.x),e.xScale().invert(i.x)]),e._yBoundsMode===g.PropertyMode.VALUE&&null!=e.yScale()&&e._setYExtent([e.yScale().invert(i.y),e.yScale().invert(i.y)]),e.render()),e.boxVisible(!0),j=e.bounds(),b={x:j.topLeft.x,y:j.topLeft.y},c={x:j.bottomRight.x,y:j.bottomRight.y},d=i,e._dragStartCallbacks.callCallbacks(j)},j=function(i,j){switch(h){case f.newBox:c.x=j.x,c.y=j.y;break;case f.resize:a.bottom?c.y=j.y:a.top&&(b.y=j.y),a.right?c.x=j.x:a.left&&(b.x=j.x);break;case f.move:var k=j.x-d.x,l=j.y-d.y;b.x+=k,b.y+=l,c.x+=k,c.y+=l,d=j}e._setBounds({topLeft:b,bottomRight:c}),e._xBoundsMode===g.PropertyMode.VALUE&&null!=e.xScale()&&e._setXExtent([e.xScale().invert(b.x),e.xScale().invert(c.x)]),e._yBoundsMode===g.PropertyMode.VALUE&&null!=e.yScale()&&e._setYExtent([e.yScale().invert(b.y),e.yScale().invert(c.y)]),e.render(),e._dragCallbacks.callCallbacks(e.bounds())},k=function(a,b){h===f.newBox&&a.x===b.x&&a.y===b.y&&e.boxVisible(!1),e._dragEndCallbacks.callCallbacks(e.bounds())};this._dragInteraction.onDragStart(i),this._dragInteraction.onDrag(j),this._dragInteraction.onDragEnd(k),this._disconnectInteraction=function(){e._dragInteraction.offDragStart(i),e._dragInteraction.offDrag(j),e._dragInteraction.offDragEnd(k),e._dragInteraction.detachFrom(e)}},b.prototype._setup=function(){var b=this;a.prototype._setup.call(this);var c=function(){return b._box.append("line").style({opacity:0,stroke:"pink","pointer-events":"visibleStroke"})};if(this._detectionEdgeT=c().classed("drag-edge-tb",!0),this._detectionEdgeB=c().classed("drag-edge-tb",!0),this._detectionEdgeL=c().classed("drag-edge-lr",!0),this._detectionEdgeR=c().classed("drag-edge-lr",!0),this._hasCorners){var d=function(){return b._box.append("circle").style({opacity:0,fill:"pink","pointer-events":"visibleFill"})};this._detectionCornerTL=d().classed("drag-corner-tl",!0),this._detectionCornerTR=d().classed("drag-corner-tr",!0),this._detectionCornerBL=d().classed("drag-corner-bl",!0),this._detectionCornerBR=d().classed("drag-corner-br",!0)}},b.prototype._getResizingEdges=function(a){var b={top:!1,bottom:!1,left:!1,right:!1};if(!this.resizable())return b;var c=this.bounds(),d=c.topLeft.y,e=c.bottomRight.y,f=c.topLeft.x,g=c.bottomRight.x,h=this._detectionRadius;return f-h<=a.x&&a.x<=g+h&&(b.top=d-h<=a.y&&a.y<=d+h,b.bottom=e-h<=a.y&&a.y<=e+h),d-h<=a.y&&a.y<=e+h&&(b.left=f-h<=a.x&&a.x<=f+h,b.right=g-h<=a.x&&a.x<=g+h),b},b.prototype.renderImmediately=function(){if(a.prototype.renderImmediately.call(this),this.boxVisible()){var b=this.bounds(),c=b.topLeft.y,d=b.bottomRight.y,e=b.topLeft.x,f=b.bottomRight.x;this._detectionEdgeT.attr({x1:e,y1:c,x2:f,y2:c,"stroke-width":2*this._detectionRadius}),this._detectionEdgeB.attr({x1:e,y1:d,x2:f,y2:d,"stroke-width":2*this._detectionRadius}),this._detectionEdgeL.attr({x1:e,y1:c,x2:e,y2:d,"stroke-width":2*this._detectionRadius}),this._detectionEdgeR.attr({x1:f,y1:c,x2:f,y2:d,"stroke-width":2*this._detectionRadius}),this._hasCorners&&(this._detectionCornerTL.attr({cx:e,cy:c,r:this._detectionRadius}),this._detectionCornerTR.attr({cx:f,cy:c,r:this._detectionRadius}),this._detectionCornerBL.attr({cx:e,cy:d,r:this._detectionRadius}),this._detectionCornerBR.attr({cx:f,cy:d,r:this._detectionRadius}))}return this},b.prototype.detectionRadius=function(a){if(null==a)return this._detectionRadius;if(a<0)throw new Error("detection radius cannot be negative.");return this._detectionRadius=a,this.render(),this},b.prototype.resizable=function(a){return null==a?this._resizable:(this._resizable=a,this._setResizableClasses(a),this)},b.prototype._setResizableClasses=function(a){a&&this.enabled()?(this.addClass("x-resizable"),this.addClass("y-resizable")):(this.removeClass("x-resizable"),this.removeClass("y-resizable"))},b.prototype.movable=function(a){return null==a?this._movable:(this._movable=a,this._setMovableClass(),this)},b.prototype._setMovableClass=function(){this.movable()&&this.enabled()?this.addClass("movable"):this.removeClass("movable")},b.prototype.onDragStart=function(a){return this._dragStartCallbacks.add(a),this},b.prototype.offDragStart=function(a){return this._dragStartCallbacks["delete"](a),this},b.prototype.onDrag=function(a){return this._dragCallbacks.add(a),this},b.prototype.offDrag=function(a){return this._dragCallbacks["delete"](a),this},b.prototype.onDragEnd=function(a){return this._dragEndCallbacks.add(a),this},b.prototype.offDragEnd=function(a){return this._dragEndCallbacks["delete"](a),this},b.prototype.dragInteraction=function(){return this._dragInteraction},b.prototype.enabled=function(a){return null==a?this._dragInteraction.enabled():(this._dragInteraction.enabled(a),this._setResizableClasses(this.resizable()),this._setMovableClass(),this)},b.prototype.destroy=function(){var b=this;a.prototype.destroy.call(this),this._dragStartCallbacks.forEach(function(a){return b._dragCallbacks["delete"](a)}),this._dragCallbacks.forEach(function(a){return b._dragCallbacks["delete"](a)}),this._dragEndCallbacks.forEach(function(a){return b._dragEndCallbacks["delete"](a)}),this._disconnectInteraction()},b.prototype.detach=function(){return this._resetState(),this._dragInteraction.detachFrom(this),a.prototype.detach.call(this),this},b.prototype.anchor=function(b){return this._dragInteraction.attachTo(this),a.prototype.anchor.call(this,b),this},b.prototype._resetState=function(){this.bounds({topLeft:{x:0,y:0},bottomRight:{x:0,y:0}})},b}(h.SelectionBoxLayer);b.DragBoxLayer=i},function(a,b,c){"use strict";function d(a,b,c){return o.min(b,c)<=a&&a<=o.max(b,c)}function e(a,b,c){return o.min(o.max(b,a),c)}function f(a,b,c){var d="function"==typeof b?b:null,e=null==d?b:c,f=null==d?n.max(a):n.max(a,d);return void 0!==f?f:e}function g(a,b,c){var d="function"==typeof b?b:null,e=null==d?b:c,f=null==d?n.min(a):n.min(a,d);return void 0!==f?f:e}function h(a){return a!==a}function i(a){return"number"==typeof a&&!h(a)&&isFinite(a)}function j(a,b,c){if(void 0===c&&(c=1),0===c)throw new Error("step cannot be 0");for(var d=o.max(o.ceil((b-a)/c),0),e=[],f=0;f<d;++f)e[f]=a+c*f;return e}function k(a,b){return o.pow(b.y-a.y,2)+o.pow(b.x-a.x,2)}function l(a){return a/360*o.PI*2}function m(a,b){return b.topLeft.x<=a.x&&b.bottomRight.x>=a.x&&b.topLeft.y<=a.y&&b.bottomRight.y>=a.y}var n=c(1),o=window.Math;b.inRange=d,b.clamp=e,b.max=f,b.min=g,b.isNaN=h,b.isValidNumber=i,b.range=j,b.distanceSquared=k,b.degreesToRadians=l,b.within=m},function(a,b,c){"use strict";var d=c(1),e=function(){function a(){this.duration(a.DEFAULT_DURATION_MILLISECONDS),this.delay(0),this.easing(a.DEFAULT_EASING),this.moveX(0),this.moveY(0)}return a.prototype.animate=function(a){var b=d.transform("");return b.translate=[this.moveX(),this.moveY()],a.attr("transform",b.toString()),b.translate=[0,0],this._animate(a,{transform:b.toString()})},a.prototype._animate=function(a,b){return a.transition().ease(this.easing()).duration(this.duration()).delay(this.delay()).attr(b)},a.prototype.duration=function(a){return null==a?this._duration:(this._duration=a,this)},a.prototype.moveX=function(a){return null==a?this._moveX:(this._moveX=a,this)},a.prototype.moveY=function(a){return null==a?this._moveY:(this._moveY=a,this)},a.prototype.delay=function(a){return null==a?this._delay:(this._delay=a,this)},a.prototype.easing=function(a){return null==a?this._easing:(this._easing=a,this)},a}();e.DEFAULT_DURATION_MILLISECONDS=300,e.DEFAULT_EASING="exp-out",b.BaseAnimator=e},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(26)),d(c(53)),d(c(54)),d(c(32)),d(c(33)),d(c(55)),d(c(56)),d(c(57)),d(c(58)),d(c(34)),d(c(59)),d(c(60)),d(c(61));var e=function(){function a(){}return a.TOP="top",a.BOTTOM="bottom",a.LEFT="left",a.RIGHT="right",a.CENTER="center",a}();b.Alignment=e},function(a,b,c){"use strict";var d=c(0),e=c(24),f=function(){function a(){}return a.prototype.render=function(){e.flush()},a}();b.Immediate=f;var g=function(){function a(){}return a.prototype.render=function(){d.DOM.requestAnimationFramePolyfill(e.flush)},a}();b.AnimationFrame=g;var h=function(){function a(){this._timeoutMsec=d.DOM.SCREEN_REFRESH_RATE_MILLISECONDS}return a.prototype.render=function(){setTimeout(e.flush,this._timeoutMsec)},a}();b.Timeout=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(11),f=c(0),g=c(12),h=function(a){function b(){var b=this;a.apply(this,arguments),this._keyPressCallbacks={},this._keyReleaseCallbacks={},this._mouseMoveCallback=function(a){return!1},this._downedKeys=new f.Set,this._keyDownCallback=function(a,c){return b._handleKeyDownEvent(a,c)},this._keyUpCallback=function(a){return b._handleKeyUpEvent(a)}}return d(b,a),b.prototype._anchor=function(b){a.prototype._anchor.call(this,b),this._positionDispatcher=e.Mouse.getDispatcher(this._componentAttachedTo._element.node()),this._positionDispatcher.onMouseMove(this._mouseMoveCallback),this._keyDispatcher=e.Key.getDispatcher(),this._keyDispatcher.onKeyDown(this._keyDownCallback),this._keyDispatcher.onKeyUp(this._keyUpCallback)},b.prototype._unanchor=function(){a.prototype._unanchor.call(this),this._positionDispatcher.offMouseMove(this._mouseMoveCallback),this._positionDispatcher=null,this._keyDispatcher.offKeyDown(this._keyDownCallback),this._keyDispatcher.offKeyUp(this._keyUpCallback),this._keyDispatcher=null},b.prototype._handleKeyDownEvent=function(a,b){var c=this._translateToComponentSpace(this._positionDispatcher.lastMousePosition());this._isInsideComponent(c)&&!b.repeat&&(this._keyPressCallbacks[a]&&this._keyPressCallbacks[a].callCallbacks(a),this._downedKeys.add(a))},b.prototype._handleKeyUpEvent=function(a){this._downedKeys.has(a)&&this._keyReleaseCallbacks[a]&&this._keyReleaseCallbacks[a].callCallbacks(a),this._downedKeys["delete"](a)},b.prototype.onKeyPress=function(a,b){return this._keyPressCallbacks[a]||(this._keyPressCallbacks[a]=new f.CallbackSet),this._keyPressCallbacks[a].add(b),this},b.prototype.offKeyPress=function(a,b){return this._keyPressCallbacks[a]["delete"](b),0===this._keyPressCallbacks[a].size&&delete this._keyPressCallbacks[a],this},b.prototype.onKeyRelease=function(a,b){return this._keyReleaseCallbacks[a]||(this._keyReleaseCallbacks[a]=new f.CallbackSet),this._keyReleaseCallbacks[a].add(b),this},b.prototype.offKeyRelease=function(a,b){return this._keyReleaseCallbacks[a]["delete"](b),0===this._keyReleaseCallbacks[a].size&&delete this._keyReleaseCallbacks[a],this},b}(g.Interaction);b.Key=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(0),f=c(23),g=function(a){function b(b){var c=this;void 0===b&&(b=[]),a.call(this),this._components=[],this.addClass("component-group"),b.forEach(function(a){return c.append(a)})}return d(b,a),b.prototype._forEach=function(a){this.components().forEach(a)},b.prototype.has=function(a){return this._components.indexOf(a)>=0},b.prototype.requestedSpace=function(a,b){var c=this._components.map(function(c){return c.requestedSpace(a,b)});return{minWidth:e.Math.max(c,function(a){return a.minWidth},0),minHeight:e.Math.max(c,function(a){return a.minHeight},0)}},b.prototype.computeLayout=function(b,c,d){var e=this;return a.prototype.computeLayout.call(this,b,c,d),this._forEach(function(a){a.computeLayout({x:0,y:0},e.width(),e.height())}),this},b.prototype._sizeFromOffer=function(a,b){return{width:a,height:b}},b.prototype.fixedWidth=function(){return this._components.every(function(a){return a.fixedWidth()})},b.prototype.fixedHeight=function(){return this._components.every(function(a){return a.fixedHeight()})},b.prototype.components=function(){return this._components.slice()},b.prototype.append=function(a){return null==a||this.has(a)||(a.detach(),this._components.push(a),this._adoptAndAnchor(a),this.redraw()),this},b.prototype._remove=function(a){var b=this._components.indexOf(a);return b>=0&&(this._components.splice(b,1),!0)},b}(f.ComponentContainer);b.Group=g},function(a,b,c){"use strict";var d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(0),g=c(5);!function(a){a[a.VALUE=0]="VALUE",a[a.PIXEL=1]="PIXEL"}(d||(d={}));var h=function(a){function b(c){var e=this;if(a.call(this),this._mode=d.VALUE,c!==b.ORIENTATION_VERTICAL&&c!==b.ORIENTATION_HORIZONTAL)throw new Error(c+" is not a valid orientation for GuideLineLayer");this._orientation=c,this._clipPathEnabled=!0,this.addClass("guide-line-layer"),this._isVertical()?this.addClass("vertical"):this.addClass("horizontal"),this._scaleUpdateCallback=function(){e._syncPixelPositionAndValue(),e.render()}}return e(b,a),b.prototype._setup=function(){a.prototype._setup.call(this),this._guideLine=this.content().append("line").classed("guide-line",!0)},b.prototype._sizeFromOffer=function(a,b){return{width:a,height:b}},b.prototype._isVertical=function(){return this._orientation===b.ORIENTATION_VERTICAL},b.prototype.fixedWidth=function(){return!0},b.prototype.fixedHeight=function(){return!0},b.prototype.computeLayout=function(b,c,d){return a.prototype.computeLayout.call(this,b,c,d),null!=this.scale()&&(this._isVertical()?this.scale().range([0,this.width()]):this.scale().range([this.height(),0])),this},b.prototype.renderImmediately=function(){return a.prototype.renderImmediately.call(this),this._syncPixelPositionAndValue(),this._guideLine.attr({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition()}),this},b.prototype._syncPixelPositionAndValue=function(){null!=this.scale()&&(this._mode===d.VALUE&&null!=this.value()?this._pixelPosition=this.scale().scale(this.value()):this._mode===d.PIXEL&&null!=this.pixelPosition()&&(this._value=this.scale().invert(this.pixelPosition())))},b.prototype._setPixelPositionWithoutChangingMode=function(a){this._pixelPosition=a,null!=this.scale()&&(this._value=this.scale().invert(this.pixelPosition())),this.render()},b.prototype.scale=function(a){if(null==a)return this._scale;var b=this._scale;return null!=b&&b.offUpdate(this._scaleUpdateCallback),this._scale=a,this._scale.onUpdate(this._scaleUpdateCallback),this._syncPixelPositionAndValue(),this.redraw(),this},b.prototype.value=function(a){return null==a?this._value:(this._value=a,this._mode=d.VALUE,this._syncPixelPositionAndValue(),this.render(),this)},b.prototype.pixelPosition=function(a){if(null==a)return this._pixelPosition;if(!f.Math.isValidNumber(a))throw new Error("pixelPosition must be a finite number");return this._pixelPosition=a,this._mode=d.PIXEL,this._syncPixelPositionAndValue(),this.render(),this},b.prototype.destroy=function(){a.prototype.destroy.call(this),null!=this.scale()&&this.scale().offUpdate(this._scaleUpdateCallback)},b.ORIENTATION_VERTICAL="vertical",b.ORIENTATION_HORIZONTAL="horizontal",b}(g.Component);b.GuideLineLayer=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(0),f=c(5);!function(a){a[a.VALUE=0]="VALUE",a[a.PIXEL=1]="PIXEL"}(b.PropertyMode||(b.PropertyMode={}));var g=b.PropertyMode,h=function(a){function b(){var b=this;a.call(this),this._boxVisible=!1,this._boxBounds={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}},this._xBoundsMode=g.PIXEL,this._yBoundsMode=g.PIXEL,this.addClass("selection-box-layer"),this._adjustBoundsCallback=function(){b.render()},this._clipPathEnabled=!0,this._xExtent=[void 0,void 0],this._yExtent=[void 0,void 0]}return d(b,a),b.prototype._setup=function(){a.prototype._setup.call(this),this._box=this.content().append("g").classed("selection-box",!0).remove(),this._boxArea=this._box.append("rect").classed("selection-area",!0)},b.prototype._sizeFromOffer=function(a,b){return{width:a,height:b}},b.prototype.bounds=function(a){return null==a?this._getBounds():(this._setBounds(a),this._xBoundsMode=g.PIXEL,this._yBoundsMode=g.PIXEL,this.render(),this)},b.prototype._setBounds=function(a){var b={x:Math.min(a.topLeft.x,a.bottomRight.x),y:Math.min(a.topLeft.y,a.bottomRight.y)},c={x:Math.max(a.topLeft.x,a.bottomRight.x),y:Math.max(a.topLeft.y,a.bottomRight.y)};this._boxBounds={topLeft:b,bottomRight:c}},b.prototype._getBounds=function(){return{topLeft:{x:this._xBoundsMode===g.PIXEL?this._boxBounds.topLeft.x:null==this._xScale?0:Math.min(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===g.PIXEL?this._boxBounds.topLeft.y:null==this._yScale?0:Math.min(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))
},bottomRight:{x:this._xBoundsMode===g.PIXEL?this._boxBounds.bottomRight.x:null==this._xScale?0:Math.max(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===g.PIXEL?this._boxBounds.bottomRight.y:null==this._yScale?0:Math.max(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))}}},b.prototype.renderImmediately=function(){if(a.prototype.renderImmediately.call(this),this._boxVisible){var b=this.bounds(),c=b.topLeft.y,d=b.bottomRight.y,f=b.topLeft.x,g=b.bottomRight.x;if(!(e.Math.isValidNumber(c)&&e.Math.isValidNumber(d)&&e.Math.isValidNumber(f)&&e.Math.isValidNumber(g)))throw new Error("bounds have not been properly set");this._boxArea.attr({x:f,y:c,width:g-f,height:d-c}),this.content().node().appendChild(this._box.node())}else this._box.remove();return this},b.prototype.boxVisible=function(a){return null==a?this._boxVisible:(this._boxVisible=a,this.render(),this)},b.prototype.fixedWidth=function(){return!0},b.prototype.fixedHeight=function(){return!0},b.prototype.xScale=function(a){return null==a?this._xScale:(null!=this._xScale&&this._xScale.offUpdate(this._adjustBoundsCallback),this._xScale=a,this._xBoundsMode=g.VALUE,this._xScale.onUpdate(this._adjustBoundsCallback),this.render(),this)},b.prototype.yScale=function(a){return null==a?this._yScale:(null!=this._yScale&&this._yScale.offUpdate(this._adjustBoundsCallback),this._yScale=a,this._yBoundsMode=g.VALUE,this._yScale.onUpdate(this._adjustBoundsCallback),this.render(),this)},b.prototype.xExtent=function(a){return null==a?this._getXExtent():(this._setXExtent(a),this._xBoundsMode=g.VALUE,this.render(),this)},b.prototype._getXExtent=function(){return this._xBoundsMode===g.VALUE?this._xExtent:null==this._xScale?[void 0,void 0]:[this._xScale.invert(this._boxBounds.topLeft.x),this._xScale.invert(this._boxBounds.bottomRight.x)]},b.prototype._setXExtent=function(a){this._xExtent=a},b.prototype.yExtent=function(a){return null==a?this._getYExtent():(this._setYExtent(a),this._yBoundsMode=g.VALUE,this.render(),this)},b.prototype._getYExtent=function(){return this._yBoundsMode===g.VALUE?this._yExtent:null==this._yScale?[void 0,void 0]:[this._yScale.invert(this._boxBounds.topLeft.y),this._yScale.invert(this._boxBounds.bottomRight.y)]},b.prototype._setYExtent=function(a){this._yExtent=a},b.prototype.destroy=function(){a.prototype.destroy.call(this),null!=this._xScale&&this.xScale().offUpdate(this._adjustBoundsCallback),null!=this._yScale&&this.yScale().offUpdate(this._adjustBoundsCallback)},b}(f.Component);b.SelectionBoxLayer=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(9),g=c(3),h=c(0),i=c(16),j=c(37),k=c(2),l=function(a){function b(){a.call(this),this.addClass("area-plot"),this.y0(0),this.attr("fill-opacity",.25),this.attr("fill",(new g.Color).range()[0]),this._lineDrawers=new h.Map}return d(b,a),b.prototype._setup=function(){var b=this;a.prototype._setup.call(this),this._lineDrawers.forEach(function(a){return a.renderArea(b._renderArea.append("g"))})},b.prototype.y=function(c,d){if(null==c)return a.prototype.y.call(this);if(null==d?a.prototype.y.call(this,c):a.prototype.y.call(this,c,d),null!=d){var e=this.y0().accessor;null!=e&&this._bindProperty(b._Y0_KEY,e,d),this._updateYScale()}return this},b.prototype.y0=function(a){if(null==a)return this._propertyBindings.get(b._Y0_KEY);var c=this.y(),d=c&&c.scale;return this._bindProperty(b._Y0_KEY,a,d),this._updateYScale(),this.render(),this},b.prototype._onDatasetUpdate=function(){a.prototype._onDatasetUpdate.call(this),this._updateYScale()},b.prototype.addDataset=function(b){return a.prototype.addDataset.call(this,b),this},b.prototype._addDataset=function(b){var c=new f.Line(b);return this._isSetup&&c.renderArea(this._renderArea.append("g")),this._lineDrawers.set(b,c),a.prototype._addDataset.call(this,b),this},b.prototype._removeDatasetNodes=function(b){a.prototype._removeDatasetNodes.call(this,b),this._lineDrawers.get(b).remove()},b.prototype._additionalPaint=function(){var a=this,b=this._generateLineDrawSteps(),c=this._getDataToDraw();this.datasets().forEach(function(d){return a._lineDrawers.get(d).draw(c.get(d),b)})},b.prototype._generateLineDrawSteps=function(){var a=[];if(this._animateOnNextRender()){var b=this._generateLineAttrToProjector();b.d=this._constructLineProjector(k.Plot._scaledAccessor(this.x()),this._getResetYFunction()),a.push({attrToProjector:b,animator:this._getAnimator(i.Animator.RESET)})}return a.push({attrToProjector:this._generateLineAttrToProjector(),animator:this._getAnimator(i.Animator.MAIN)}),a},b.prototype._generateLineAttrToProjector=function(){var a=this._generateAttrToProjector();return a.d=this._constructLineProjector(k.Plot._scaledAccessor(this.x()),k.Plot._scaledAccessor(this.y())),a},b.prototype._createDrawer=function(a){return new f.Area(a)},b.prototype._generateDrawSteps=function(){var a=[];if(this._animateOnNextRender()){var b=this._generateAttrToProjector();b.d=this._constructAreaProjector(k.Plot._scaledAccessor(this.x()),this._getResetYFunction(),k.Plot._scaledAccessor(this.y0())),a.push({attrToProjector:b,animator:this._getAnimator(i.Animator.RESET)})}return a.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(i.Animator.MAIN)}),a},b.prototype._updateYScale=function(){var a=this._propertyExtents.get("y0"),b=h.Array.flatten(a),c=h.Array.uniq(b),d=1===c.length?c[0]:null,e=this.y(),f=e&&e.scale;null!=f&&(null!=this._constantBaselineValueProvider&&(f.removePaddingExceptionsProvider(this._constantBaselineValueProvider),this._constantBaselineValueProvider=null),null!=d&&(this._constantBaselineValueProvider=function(){return[d]},f.addPaddingExceptionsProvider(this._constantBaselineValueProvider)))},b.prototype._getResetYFunction=function(){return k.Plot._scaledAccessor(this.y0())},b.prototype._propertyProjectors=function(){var b=a.prototype._propertyProjectors.call(this);return b.d=this._constructAreaProjector(k.Plot._scaledAccessor(this.x()),k.Plot._scaledAccessor(this.y()),k.Plot._scaledAccessor(this.y0())),b},b.prototype.selections=function(b){var c=this;void 0===b&&(b=this.datasets());var d=a.prototype.selections.call(this,b)[0],f=b.map(function(a){return c._lineDrawers.get(a)}).filter(function(a){return null!=a});return f.forEach(function(a,b){return d.push(a.selectionForIndex(b).node())}),e.selectAll(d)},b.prototype._constructAreaProjector=function(a,b,c){var d=this,f=function(a,b,c){var e=k.Plot._scaledAccessor(d.x())(a,b,c),f=k.Plot._scaledAccessor(d.y())(a,b,c);return h.Math.isValidNumber(e)&&h.Math.isValidNumber(f)};return function(g,h,i){var j=e.svg.area().x(function(b,c){return a(b,c,i)}).y1(function(a,c){return b(a,c,i)}).y0(function(a,b){return c(a,b,i)}).interpolate(d.interpolator()).defined(function(a,b){return f(a,b,i)});return j(g)}},b._Y0_KEY="y0",b}(j.Line);b.Area=l},function(a,b,c){"use strict";var d;!function(a){a.MAIN="main",a.RESET="reset"}(d=b.Animator||(b.Animator={}))},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(6),g=c(9),h=c(3),i=c(10),j=c(0),k=c(16),l=c(2),m=c(15),n=function(a){function b(){a.call(this),this._interpolator="linear",this._autorangeSmooth=!1,this._croppedRenderingEnabled=!0,this._downsamplingEnabled=!1,this.addClass("line-plot");var b=new f.Easing;b.stepDuration(l.Plot._ANIMATION_MAX_DURATION),b.easingMode("exp-in-out"),b.maxTotalDuration(l.Plot._ANIMATION_MAX_DURATION),this.animator(k.Animator.MAIN,b),this.attr("stroke",(new h.Color).range()[0]),this.attr("stroke-width","2px")}return d(b,a),b.prototype.x=function(b,c){return null==b?a.prototype.x.call(this):(null==c?a.prototype.x.call(this,b):a.prototype.x.call(this,b,c),this._setScaleSnapping(),this)},b.prototype.y=function(b,c){return null==b?a.prototype.y.call(this):(a.prototype.y.call(this,b,c),this._setScaleSnapping(),this)},b.prototype.autorangeMode=function(b){return null==b?a.prototype.autorangeMode.call(this):(a.prototype.autorangeMode.call(this,b),this._setScaleSnapping(),this)},b.prototype.autorangeSmooth=function(a){return null==a?this._autorangeSmooth:(this._autorangeSmooth=a,this._setScaleSnapping(),this)},b.prototype._setScaleSnapping=function(){"x"===this.autorangeMode()&&this.x()&&this.x().scale&&this.x().scale instanceof i.QuantitativeScale&&this.x().scale.snappingDomainEnabled(!this.autorangeSmooth()),"y"===this.autorangeMode()&&this.y()&&this.y().scale&&this.y().scale instanceof i.QuantitativeScale&&this.y().scale.snappingDomainEnabled(!this.autorangeSmooth())},b.prototype.interpolator=function(a){return null==a?this._interpolator:(this._interpolator=a,this.render(),this)},b.prototype.downsamplingEnabled=function(a){return null==a?this._downsamplingEnabled:(this._downsamplingEnabled=a,this)},b.prototype.croppedRenderingEnabled=function(a){return null==a?this._croppedRenderingEnabled:(this._croppedRenderingEnabled=a,this.render(),this)},b.prototype._createDrawer=function(a){return new g.Line(a)},b.prototype._extentsForProperty=function(b){var c=a.prototype._extentsForProperty.call(this,b);if(!this._autorangeSmooth)return c;if(this.autorangeMode()!==b)return c;if("x"!==this.autorangeMode()&&"y"!==this.autorangeMode())return c;var d,f=this._getEdgeIntersectionPoints();return d="y"===this.autorangeMode()?f.left.concat(f.right).map(function(a){return a.y}):f.top.concat(f.bottom).map(function(a){return a.x}),c.map(function(a){return e.extent(e.merge([a,d]))})},b.prototype._getEdgeIntersectionPoints=function(){var a=this;if(!(this.y().scale instanceof i.QuantitativeScale&&this.x().scale instanceof i.QuantitativeScale))return{left:[],right:[],top:[],bottom:[]};var b=this.y().scale,c=this.x().scale,d={left:[],right:[],top:[],bottom:[]},e=c.scale(c.domain()[0]),f=c.scale(c.domain()[1]),g=b.scale(b.domain()[0]),h=b.scale(b.domain()[1]);return this.datasets().forEach(function(i){for(var j,k,l,m,n,o,p,q,r=i.data(),s=1;s<r.length;s++)n=p||c.scale(a.x().accessor(r[s-1],s-1,i)),o=q||b.scale(a.y().accessor(r[s-1],s-1,i)),p=c.scale(a.x().accessor(r[s],s,i)),q=b.scale(a.y().accessor(r[s],s,i)),n<e==e<=p&&(j=e-n,k=p-n,m=q-o,l=j*m/k,d.left.push({x:e,y:b.invert(o+l)})),n<f==f<=p&&(j=f-n,k=p-n,m=q-o,l=j*m/k,d.right.push({x:f,y:b.invert(o+l)})),o<h==h<=q&&(k=p-n,l=h-o,m=q-o,j=l*k/m,d.top.push({x:c.invert(n+j),y:h})),o<g==g<=q&&(k=p-n,l=g-o,m=q-o,j=l*k/m,d.bottom.push({x:c.invert(n+j),y:g}))}),d},b.prototype._getResetYFunction=function(){var a=this.y().scale.domain(),b=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]),d=b<0&&b||c>0&&c||0,e=this.y().scale.scale(d);return function(a,b,c){return e}},b.prototype._generateDrawSteps=function(){var a=[];if(this._animateOnNextRender()){var b=this._generateAttrToProjector();b.d=this._constructLineProjector(l.Plot._scaledAccessor(this.x()),this._getResetYFunction()),a.push({attrToProjector:b,animator:this._getAnimator(k.Animator.RESET)})}return a.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(k.Animator.MAIN)}),a},b.prototype._generateAttrToProjector=function(){var b=a.prototype._generateAttrToProjector.call(this);return Object.keys(b).forEach(function(a){if("d"!==a){var c=b[a];b[a]=function(a,b,d){return a.length>0?c(a[0],b,d):null}}}),b},b.prototype.entitiesAt=function(a){var b=this.entityNearestByXThenY(a);return null!=b?[b]:[]},b.prototype.entitiesIn=function(a,b){var c,d;if(null==b){var e=a;c={min:e.topLeft.x,max:e.bottomRight.x},d={min:e.topLeft.y,max:e.bottomRight.y}}else c=a,d=b;var f=l.Plot._scaledAccessor(this.x()),g=l.Plot._scaledAccessor(this.y());return this.entities().filter(function(a){var b=a.datum,e=a.index,h=a.dataset,i=f(b,e,h),j=g(b,e,h);return c.min<=i&&i<=c.max&&d.min<=j&&j<=d.max})},b.prototype.entityNearestByXThenY=function(a){var b,c=this,d=1/0,e=1/0,f=this.bounds();return this.entities().forEach(function(g){if(c._entityVisibleOnPlot(g,f)){var h=Math.abs(a.x-g.position.x),i=Math.abs(a.y-g.position.y);(h<d||h===d&&i<e)&&(b=g,d=h,e=i)}}),b},b.prototype._propertyProjectors=function(){var b=a.prototype._propertyProjectors.call(this);return b.d=this._constructLineProjector(l.Plot._scaledAccessor(this.x()),l.Plot._scaledAccessor(this.y())),b},b.prototype._constructLineProjector=function(a,b){var c=this,d=function(a,b,d){var e=l.Plot._scaledAccessor(c.x())(a,b,d),f=l.Plot._scaledAccessor(c.y())(a,b,d);return null!=e&&!j.Math.isNaN(e)&&null!=f&&!j.Math.isNaN(f)};return function(f,g,h){return e.svg.line().x(function(b,c){return a(b,c,h)}).y(function(a,c){return b(a,c,h)}).interpolate(c.interpolator()).defined(function(a,b){return d(a,b,h)})(f)}},b.prototype._getDataToDraw=function(){var a=this,b=new j.Map;return this.datasets().forEach(function(c){var d=c.data();if(!a._croppedRenderingEnabled&&!a._downsamplingEnabled)return void b.set(c,[d]);var e=d.map(function(a,b){return b});a._croppedRenderingEnabled&&(e=a._filterCroppedRendering(c,e)),a._downsamplingEnabled&&(e=a._filterDownsampling(c,e)),b.set(c,[e.map(function(a,b){return d[a]})])}),b},b.prototype._filterCroppedRendering=function(a,b){for(var c=this,d=l.Plot._scaledAccessor(this.x()),e=l.Plot._scaledAccessor(this.y()),f=a.data(),g=[],h=function(a,b){return j.Math.inRange(a,0,c.width())&&j.Math.inRange(b,0,c.height())},i=0;i<b.length;i++){var k=d(f[b[i]],b[i],a),m=e(f[b[i]],b[i],a),n=h(k,m);if(!n&&null!=b[i-1]&&null!=f[b[i-1]]){var o=d(f[b[i-1]],b[i-1],a),p=e(f[b[i-1]],b[i-1],a);n=n||h(o,p)}if(!n&&null!=b[i+1]&&null!=f[b[i+1]]){var q=d(f[b[i+1]],b[i+1],a),r=e(f[b[i+1]],b[i+1],a);n=n||h(q,r)}n&&g.push(b[i])}return g},b.prototype._filterDownsampling=function(a,b){if(0===b.length)return[];for(var c=a.data(),d=l.Plot._scaledAccessor(this.x()),e=l.Plot._scaledAccessor(this.y()),f=[b[0]],g=function(f,g){var h=d(c[b[f]],b[f],a),i=e(c[b[f]],b[f],a),j=d(c[b[f+1]],b[f+1],a),k=e(c[b[f+1]],b[f+1],a);if(g===1/0)return Math.floor(h)===Math.floor(j);var l=i+(j-h)*g;return Math.floor(k)===Math.floor(l)},h=0;h<b.length-1;){for(var i=b[h],j=d(c[b[h]],b[h],a),k=e(c[b[h]],b[h],a),m=d(c[b[h+1]],b[h+1],a),n=e(c[b[h+1]],b[h+1],a),o=Math.floor(j)===Math.floor(m)?1/0:(n-k)/(m-j),p=b[h],q=o===1/0?k:j,r=p,s=q,t=!0;h<b.length-1&&(t||g(h,o));){h++,t=!1;var u=o===1/0?e(c[b[h]],b[h],a):d(c[b[h]],b[h],a);u>s&&(s=u,r=b[h]),u<q&&(q=u,p=b[h])}var v=b[h];p!==i&&f.push(p),r!==p&&r!==i&&f.push(r),v!==i&&v!==p&&v!==r&&f.push(v)}return f},b}(m.XYPlot);b.Line=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(14),g=c(0),h=c(17),i=[0,1],j=function(a){function b(){a.call(this),this._range=[0,1],this._d3Scale=e.scale.ordinal(),this._d3Scale.range(i),this._d3TransformationScale=e.scale.linear(),this._d3TransformationScale.domain(i);var c=.3;this._innerPadding=b._convertToPlottableInnerPadding(c),this._outerPadding=b._convertToPlottableOuterPadding(.5,c)}return d(b,a),b.prototype.cloneWithoutProviders=function(){var a=(new b).domain(this.domain()).range(this.range()).innerPadding(this.innerPadding()).outerPadding(this.outerPadding());return a._d3TransformationScale.domain(this._d3TransformationScale.domain()),a},b.prototype.extentOfValues=function(a){return g.Array.uniq(a)},b.prototype._getExtent=function(){return g.Array.uniq(this._getAllIncludedValues())},b.prototype.domain=function(b){return a.prototype.domain.call(this,b)},b.prototype.invertRange=function(a){void 0===a&&(a=this.range());var b=this._d3Scale.rangeBand(),c=this.invertedTransformation(a[0])-b/2,d=this.invertedTransformation(a[1])-b/2,f=e.bisect(this._d3Scale.range(),c),g=e.bisect(this._d3Scale.range(),d);return this._d3Scale.domain().slice(f,g)},b.prototype.range=function(b){return a.prototype.range.call(this,b)},b._convertToPlottableInnerPadding=function(a){return 1/(1-a)-1},b._convertToPlottableOuterPadding=function(a,b){return a/(1-b)},b.prototype._setBands=function(){var a=1-1/(1+this.innerPadding()),b=this.outerPadding()/(1+this.innerPadding());this._d3Scale.rangeBands(i,a,b)},b.prototype.rangeBand=function(){return this._rescaleBand(this._d3Scale.rangeBand())},b.prototype.stepWidth=function(){return this._rescaleBand(this._d3Scale.rangeBand()*(1+this.innerPadding()))},b.prototype.innerPadding=function(a){return null==a?this._innerPadding:(this._innerPadding=a,this.range(this.range()),this._dispatchUpdate(),this)},b.prototype.outerPadding=function(a){return null==a?this._outerPadding:(this._outerPadding=a,this.range(this.range()),this._dispatchUpdate(),this)},b.prototype.scale=function(a){var b=this._d3Scale(a)+this._d3Scale.rangeBand()/2;return this._d3TransformationScale(b)},b.prototype.zoom=function(a,b){var c=this,d=function(d){return c._d3TransformationScale.invert(f.zoomAt(d,a,b))};this._d3TransformationScale.domain(this._d3TransformationScale.range().map(d)),this._dispatchUpdate()},b.prototype.pan=function(a){var b=this,c=function(c){return b._d3TransformationScale.invert(c+a)};this._d3TransformationScale.domain(this._d3TransformationScale.range().map(c)),this._dispatchUpdate()},b.prototype.scaleTransformation=function(a){return this._d3TransformationScale(a)},b.prototype.invertedTransformation=function(a){return this._d3TransformationScale.invert(a)},b.prototype.getTransformationDomain=function(){return this._d3TransformationScale.domain()},b.prototype._getDomain=function(){return this._backingScaleDomain()},b.prototype._backingScaleDomain=function(a){return null==a?this._d3Scale.domain():(this._d3Scale.domain(a),this._setBands(),this)},b.prototype._getRange=function(){return this._range},b.prototype._setRange=function(a){this._range=a,this._d3TransformationScale.range(a),this._setBands()},b.prototype._rescaleBand=function(a){return Math.abs(this._d3TransformationScale(a)-this._d3TransformationScale(0))},b}(h.Scale);b.Category=j},function(a,b,c){"use strict";function d(a){var b;try{b=a.node().getBBox()}catch(c){b={x:0,y:0,width:0,height:0}}return b}function e(a){null!=window.requestAnimationFrame?window.requestAnimationFrame(a):setTimeout(a,b.SCREEN_REFRESH_RATE_MILLISECONDS)}function f(a){var b=window.getComputedStyle(a);return o(b,"width")+o(b,"padding-left")+o(b,"padding-right")+o(b,"border-left-width")+o(b,"border-right-width")}function g(a){var b=window.getComputedStyle(a);return o(b,"height")+o(b,"padding-top")+o(b,"padding-bottom")+o(b,"border-top-width")+o(b,"border-bottom-width")}function h(a,b,c){var d=p.transform(a.attr("transform"));return null==b?d.translate:(c=null==c?0:c,d.translate[0]=b,d.translate[1]=c,a.attr("transform",d.toString()),a)}function i(a,b){return!(q.floor(a.right)<=q.ceil(b.left))&&(!(q.ceil(a.left)>=q.floor(b.right))&&(!(q.floor(a.bottom)<=q.ceil(b.top))&&!(q.ceil(a.top)>=q.floor(b.bottom))))}function j(a,b){return q.floor(b.left)<=q.ceil(a.left)&&q.floor(b.top)<=q.ceil(a.top)&&q.floor(a.right)<=q.ceil(b.right)&&q.floor(a.bottom)<=q.ceil(b.bottom)}function k(a){var b=a.ownerSVGElement;return null!=b?b:"svg"===a.nodeName.toLowerCase()?a:null}function l(){return"plottableClipPath"+ ++r}function m(a,b,c,d){void 0===d&&(d=.5);var e=n(a),f=n(b);return c.x+c.width>=e.min-d&&c.x<=e.max+d&&c.y+c.height>=f.min-d&&c.y<=f.max+d}function n(a){if("number"==typeof a){var b=a;return{min:b,max:b}}var c=a;if(c instanceof Object&&"min"in c&&"max"in c)return c;throw new Error("input '"+a+"' can't be parsed as an Range")}function o(a,b){var c=a.getPropertyValue(b),d=parseFloat(c);return d||0}var p=c(1),q=window.Math;b.elementBBox=d,b.SCREEN_REFRESH_RATE_MILLISECONDS=1e3/60,b.requestAnimationFramePolyfill=e,b.elementWidth=f,b.elementHeight=g,b.translate=h,b.clientRectsOverlap=i,b.clientRectInside=j,b.boundingSVG=k;var r=0;b.generateUniqueClipPathId=l,b.intersectsBBox=m},function(a,b,c){"use strict";var d=function(){function a(){"function"==typeof window.Set?this._es6Set=new window.Set:this._values=[],this.size=0}return a.prototype.add=function(a){return null!=this._es6Set?(this._es6Set.add(a),this.size=this._es6Set.size,this):(this.has(a)||(this._values.push(a),this.size=this._values.length),this)},a.prototype["delete"]=function(a){if(null!=this._es6Set){var b=this._es6Set["delete"](a);return this.size=this._es6Set.size,b}var c=this._values.indexOf(a);return c!==-1&&(this._values.splice(c,1),this.size=this._values.length,!0)},a.prototype.has=function(a){return null!=this._es6Set?this._es6Set.has(a):this._values.indexOf(a)!==-1},a.prototype.forEach=function(a,b){var c=this;if(null!=this._es6Set){var d=function(d,e){return a.call(b,d,e,c)};return void this._es6Set.forEach(d,b)}this._values.forEach(function(d){a.call(b,d,d,c)})},a}();b.Set=d},function(a,b,c){"use strict";var d=c(13),e=function(){function a(a,b){this.textMeasurer=this.getTextMeasurer(a,b)}return a.prototype.measure=function(b){return void 0===b&&(b=a.HEIGHT_TEXT),this.textMeasurer(b)},a.prototype.checkSelectionIsText=function(a){return"text"===a[0][0].tagName||!a.select("text").empty()},a.prototype.getTextMeasurer=function(a,b){var c=this;if(this.checkSelectionIsText(a)){var d,e=a.node().parentNode;return d="text"===a[0][0].tagName?a:a.select("text"),a.remove(),function(b){e.appendChild(a.node());var f=c.measureBBox(d,b);return a.remove(),f}}var f=a.append("text");return b&&f.classed(b,!0),f.remove(),function(b){a.node().appendChild(f.node());var d=c.measureBBox(f,b);return f.remove(),d}},a.prototype.measureBBox=function(a,b){a.text(b);var c=d.DOM.getBBox(a);return{width:c.width,height:c.height}},a}();e.HEIGHT_TEXT="bqpdl",b.AbstractMeasurer=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(13),f=c(43),g=function(a){function b(b,c,d){var f=a.call(this,b,c,d)||this;return f.cache=new e.Cache(function(a){return f._measureCharacterNotFromCache(a)}),f}return d(b,a),b.prototype._measureCharacterNotFromCache=function(b){return a.prototype._measureCharacter.call(this,b)},b.prototype._measureCharacter=function(a){return this.cache.get(a)},b.prototype.reset=function(){this.cache.clear()},b}(f.CharacterMeasurer);b.CacheCharacterMeasurer=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(44),g=function(a){function b(){return a.apply(this,arguments)||this}return d(b,a),b.prototype._measureCharacter=function(b){return a.prototype._measureLine.call(this,b)},b.prototype._measureLine=function(a){var b=this,c=a.split("").map(function(a){return b._measureCharacter(a)});return{height:e.max(c,function(a){return a.height}),width:e.sum(c,function(a){return a.width})}},b}(f.Measurer);b.CharacterMeasurer=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(41),g=function(a){function b(b,c,d){void 0===c&&(c=null),void 0===d&&(d=!1);var e=a.call(this,b,c)||this;return e.useGuards=d,e}return d(b,a),b.prototype._addGuards=function(a){return f.AbstractMeasurer.HEIGHT_TEXT+a+f.AbstractMeasurer.HEIGHT_TEXT},b.prototype._measureLine=function(b,c){void 0===c&&(c=!1);var d=this.useGuards||c||/^[\t ]$/.test(b),e=d?this._addGuards(b):b,f=a.prototype.measure.call(this,e);return f.width-=d?2*this.getGuardWidth():0,f},b.prototype.measure=function(a){var b=this;if(void 0===a&&(a=f.AbstractMeasurer.HEIGHT_TEXT),""===a.trim())return{width:0,height:0};var c=a.trim().split("\n").map(function(a){return b._measureLine(a)});return{height:e.sum(c,function(a){return a.height}),width:e.max(c,function(a){return a.width})}},b.prototype.getGuardWidth=function(){return null==this.guardWidth&&(this.guardWidth=a.prototype.measure.call(this).width),this.guardWidth},b}(f.AbstractMeasurer);b.Measurer=g},function(a,b,c){"use strict";var d=c(13),e=function(){function a(){this.maxLines(1/0),this.textTrimming("ellipsis"),this.allowBreakingWords(!0),this._tokenizer=new d.Tokenizer,this._breakingCharacter="-"}return a.prototype.maxLines=function(a){return null==a?this._maxLines:(this._maxLines=a,this)},a.prototype.textTrimming=function(a){if(null==a)return this._textTrimming;if("ellipsis"!==a&&"none"!==a)throw new Error(a+" - unsupported text trimming option.");return this._textTrimming=a,this},a.prototype.allowBreakingWords=function(a){return null==a?this._allowBreakingWords:(this._allowBreakingWords=a,this)},a.prototype.wrap=function(a,b,c,d){var e=this;void 0===d&&(d=1/0);var f={noBrokeWords:0,noLines:0,originalText:a,truncatedText:"",wrappedText:""},g={availableLines:Math.min(Math.floor(d/b.measure().height),this._maxLines),availableWidth:c,canFitText:!0,currentLine:"",wrapping:f},h=a.split("\n");return h.reduce(function(a,c,d){return e.breakLineToFitWidth(a,c,d!==h.length-1,b)},g).wrapping},a.prototype.breakLineToFitWidth=function(a,b,c,e){var f=this;a.canFitText||""===a.wrapping.truncatedText||(a.wrapping.truncatedText+="\n");var g=this._tokenizer.tokenize(b);a=g.reduce(function(a,b){return f.wrapNextToken(b,a,e)},a);var h=d.StringMethods.trimEnd(a.currentLine);return a.wrapping.noLines+=+(""!==h),a.wrapping.noLines===a.availableLines&&"none"!==this._textTrimming&&c?a.canFitText=!1:a.wrapping.wrappedText+=h,a.currentLine="\n",a},a.prototype.canFitToken=function(a,b,c){var d=this,e=this._allowBreakingWords?a.split("").map(function(b,c){return c!==a.length-1?b+d._breakingCharacter:b}):[a];return c.measure(a).width<=b||e.every(function(a){return c.measure(a).width<=b})},a.prototype.addEllipsis=function(a,b,c){if("none"===this._textTrimming)return{remainingToken:"",wrappedToken:a};var e=a.substring(0).trim(),f=c.measure(e).width,g=c.measure("...").width,h=a.length>0&&"\n"===a[0]?"\n":"";if(b<=g){var i=g/3,j=Math.floor(b/i);return{remainingToken:a,wrappedToken:h+"...".substr(0,j)}}for(;f+g>b;)e=d.StringMethods.trimEnd(e.substr(0,e.length-1)),f=c.measure(e).width;return{remainingToken:d.StringMethods.trimEnd(a.substring(e.length),"-").trim(),wrappedToken:h+e+"..."}},a.prototype.wrapNextToken=function(a,b,c){if(!b.canFitText||b.availableLines===b.wrapping.noLines||!this.canFitToken(a,b.availableWidth,c))return this.finishWrapping(a,b,c);for(var e=a;e;){var f=this.breakTokenToFitInWidth(e,b.currentLine,b.availableWidth,c);if(b.currentLine=f.line,e=f.remainingToken,null!=e){if(b.wrapping.noBrokeWords+=+f.breakWord,++b.wrapping.noLines,b.availableLines===b.wrapping.noLines){var g=this.addEllipsis(b.currentLine,b.availableWidth,c);return b.wrapping.wrappedText+=g.wrappedToken,b.wrapping.truncatedText+=g.remainingToken+e,b.currentLine="\n",b}b.wrapping.wrappedText+=d.StringMethods.trimEnd(b.currentLine),b.currentLine="\n"}}return b},a.prototype.finishWrapping=function(a,b,c){if(b.canFitText&&b.availableLines!==b.wrapping.noLines&&this._allowBreakingWords&&"none"!==this._textTrimming){var d=this.addEllipsis(b.currentLine+a,b.availableWidth,c);b.wrapping.wrappedText+=d.wrappedToken,b.wrapping.truncatedText+=d.remainingToken,b.wrapping.noBrokeWords+=+(d.remainingToken.length<a.length),b.wrapping.noLines+=+(d.wrappedToken.length>0),b.currentLine=""}else b.wrapping.truncatedText+=a;return b.canFitText=!1,b},a.prototype.breakTokenToFitInWidth=function(a,b,c,d,e){if(void 0===e&&(e=this._breakingCharacter),d.measure(b+a).width<=c)return{breakWord:!1,line:b+a,remainingToken:null};if(""===a.trim())return{breakWord:!1,line:b,remainingToken:""};if(!this._allowBreakingWords)return{breakWord:!1,line:b,remainingToken:a};for(var f=0;f<a.length&&d.measure(b+a.substring(0,f+1)+e).width<=c;)++f;var g="";return f>0&&(g=e),{breakWord:f>0,line:b+a.substring(0,f)+g,remainingToken:a.substring(f)}},a}();b.Wrapper=e},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(51)),d(c(52)),d(c(22))},function(a,b,c){"use strict";var d=c(0),e=function(){function a(a,b){void 0===a&&(a=[]),void 0===b&&(b={}),this._data=a,this._metadata=b,this._callbacks=new d.CallbackSet}return a.prototype.onUpdate=function(a){return this._callbacks.add(a),this},a.prototype.offUpdate=function(a){return this._callbacks["delete"](a),this},a.prototype.data=function(a){return null==a?this._data:(this._data=a,this._callbacks.callCallbacks(this),this)},a.prototype.metadata=function(a){return null==a?this._metadata:(this._metadata=a,this._callbacks.callCallbacks(this),this)},a}();b.Dataset=e},function(a,b,c){"use strict";b.version="3.0.0-beta.1"},function(a,b,c){"use strict";var d=function(){function a(){this._startDelay=a._DEFAULT_START_DELAY_MILLISECONDS,this._stepDuration=a._DEFAULT_STEP_DURATION_MILLISECONDS,this._stepDelay=a._DEFAULT_ITERATIVE_DELAY_MILLISECONDS,this._maxTotalDuration=a._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS,this._easingMode=a._DEFAULT_EASING_MODE}return a.prototype.totalTime=function(a){var b=this._getAdjustedIterativeDelay(a);return this.startDelay()+b*Math.max(a-1,0)+this.stepDuration()},a.prototype.animate=function(a,b){var c=this,d=a[0].length,e=this._getAdjustedIterativeDelay(d);return a.transition().ease(this.easingMode()).duration(this.stepDuration()).delay(function(a,b){return c.startDelay()+e*b}).attr(b)},a.prototype.startDelay=function(a){return null==a?this._startDelay:(this._startDelay=a,this)},a.prototype.stepDuration=function(a){return null==a?Math.min(this._stepDuration,this._maxTotalDuration):(this._stepDuration=a,this)},a.prototype.stepDelay=function(a){return null==a?this._stepDelay:(this._stepDelay=a,this)},a.prototype.maxTotalDuration=function(a){return null==a?this._maxTotalDuration:(this._maxTotalDuration=a,this)},a.prototype.easingMode=function(a){return null==a?this._easingMode:(this._easingMode=a,this)},a.prototype._getAdjustedIterativeDelay=function(a){var b=this.maxTotalDuration()-this.stepDuration();b=Math.max(b,0);var c=b/Math.max(a-1,1);return Math.min(this.stepDelay(),c)},a._DEFAULT_START_DELAY_MILLISECONDS=0,a._DEFAULT_STEP_DURATION_MILLISECONDS=300,a._DEFAULT_ITERATIVE_DELAY_MILLISECONDS=15,a._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS=1/0,a._DEFAULT_EASING_MODE="exp-out",a}();b.Easing=d},function(a,b,c){"use strict";var d=function(){function a(){}return a.prototype.totalTime=function(a){return 0},a.prototype.animate=function(a,b){return a.attr(b)},a}();b.Null=d},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(18),h=c(0),i=function(a){function b(b,c){void 0===c&&(c="bottom"),a.call(this,b,c),this._tickLabelAngle=0,this._tickLabelShearAngle=0,this.addClass("category-axis")}return d(b,a),Object.defineProperty(b.prototype,"_wrapper",{get:function(){var a=new f.Wrapper;return null!=this._tickLabelMaxLines&&a.maxLines(this._tickLabelMaxLines),a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"_writer",{get:function(){return new f.Writer(this._measurer,this._wrapper)},enumerable:!0,configurable:!0}),b.prototype._setup=function(){a.prototype._setup.call(this),this._measurer=new f.CacheMeasurer(this._tickLabelContainer)},b.prototype._rescale=function(){return this.redraw()},b.prototype.requestedSpace=function(a,b){var c=this.isHorizontal()?0:this._tickSpaceRequired()+this.margin(),d=this.isHorizontal()?this._tickSpaceRequired()+this.margin():0;if(0===this._scale.domain().length)return{minWidth:0,minHeight:0};if(this.annotationsEnabled()){var e=this._annotationTierHeight()*this.annotationTierCount();this.isHorizontal()?d+=e:c+=e}var f=this._measureTickLabels(a,b);return{minWidth:f.usedWidth+c,
minHeight:f.usedHeight+d}},b.prototype._coreSize=function(){var a=this.isHorizontal()?this.height():this.width(),b=this.isHorizontal()?this.requestedSpace(this.width(),this.height()).minHeight:this.requestedSpace(this.width(),this.height()).minWidth,c=this.margin()+this._annotationTierHeight(),d=b-c;return Math.min(d,a)},b.prototype._getTickValues=function(){return this.getDownsampleInfo().domain},b.prototype.getDownsampleInfo=function(a,c){void 0===a&&(a=this._scale),void 0===c&&(c=a.invertRange());var d=0===this._tickLabelAngle?1:1/Math.cos(this._tickLabelShearAngle/180*Math.PI),e=b._MINIMUM_WIDTH_PER_LABEL_PX*d,f=Math.ceil(e/a.stepWidth());return{domain:c.filter(function(a,b){return b%f===0}),stepWidth:f*a.stepWidth()}},b.prototype.tickLabelAngle=function(a){if(null==a)return this._tickLabelAngle;if(0!==a&&90!==a&&a!==-90)throw new Error("Angle "+a+" not supported; only 0, 90, and -90 are valid values");return this._tickLabelAngle=a,this.redraw(),this},b.prototype.tickLabelShearAngle=function(a){if(null==a)return this._tickLabelShearAngle;if(a<-80||a>80)throw new Error("Angle "+a+" not supported; Must be between [-80, 80]");return this._tickLabelShearAngle=a,this.redraw(),this},b.prototype.tickLabelMaxWidth=function(a){return 0===arguments.length?this._tickLabelMaxWidth:(this._tickLabelMaxWidth=a,this.redraw(),this)},b.prototype.tickLabelMaxLines=function(a){return 0===arguments.length?this._tickLabelMaxLines:(this._tickLabelMaxLines=a,this.redraw(),this)},b.prototype._tickSpaceRequired=function(){return this._maxLabelTickLength()+this.tickLabelPadding()},b.prototype._drawTicks=function(a,b){var c,d,f=this;switch(this.tickLabelAngle()){case 0:c={left:"right",right:"left",top:"center",bottom:"center"},d={left:"center",right:"center",top:"bottom",bottom:"top"};break;case 90:c={left:"center",right:"center",top:"right",bottom:"left"},d={left:"top",right:"bottom",top:"center",bottom:"center"};break;case-90:c={left:"center",right:"center",top:"left",bottom:"right"},d={left:"bottom",right:"top",top:"center",bottom:"center"}}b.each(function(b){var g=f.isHorizontal()?a:f.width()-f._tickSpaceRequired(),h=f.isHorizontal()?f.height()-f._tickSpaceRequired():a,i={selection:e.select(this),xAlign:c[f.orientation()],yAlign:d[f.orientation()],textRotation:f.tickLabelAngle(),textShear:f.tickLabelShearAngle()};if(null!=f._tickLabelMaxWidth){if("left"===f.orientation()&&g>f._tickLabelMaxWidth){var j=g-f._tickLabelMaxWidth,k=i.selection.attr("transform")+" translate("+j+", 0)";i.selection.attr("transform",k)}g=Math.min(g,f._tickLabelMaxWidth)}f._writer.write(f.formatter()(b),g,h,i)})},b.prototype._measureTickLabels=function(a,b){var c=this,d=this._scale,f=d.cloneWithoutProviders().range([0,this.isHorizontal()?a:b]),g=this.getDownsampleInfo(f),i=g.domain,j=g.stepWidth,k=a-this._tickSpaceRequired();this.isHorizontal()&&(k=j,0!==this._tickLabelAngle&&(k=b-this._tickSpaceRequired()),k=Math.max(k,0));var l=j;this.isHorizontal()&&(l=b-this._tickSpaceRequired(),0!==this._tickLabelAngle&&(l=a-this._tickSpaceRequired()),l=Math.max(l,0)),null!=this._tickLabelMaxWidth&&(k=Math.min(k,this._tickLabelMaxWidth));var m=i.map(function(a){return c._wrapper.wrap(c.formatter()(a),c._measurer,k,l)}),n=this.isHorizontal()&&0===this._tickLabelAngle?e.sum:h.Math.max,o=this.isHorizontal()&&0===this._tickLabelAngle?h.Math.max:e.sum,p=n(m,function(a){return c._measurer.measure(a.wrappedText).width},0),q=o(m,function(a){return c._measurer.measure(a.wrappedText).height},0);return 0!==this._tickLabelAngle&&(r=[q,p],p=r[0],q=r[1]),{usedWidth:p,usedHeight:q};var r},b.prototype.renderImmediately=function(){var b=this;a.prototype.renderImmediately.call(this);var c=this._scale,d=this.getDownsampleInfo(c),e=d.domain,f=d.stepWidth,i=this._tickLabelContainer.selectAll("."+g.Axis.TICK_LABEL_CLASS).data(e,function(a){return a}),j=f;this.isHorizontal()&&null!=this._tickLabelMaxWidth&&(j=Math.min(j,this._tickLabelMaxWidth));var k=function(a,d){var e=c.scale(a)-j/2,f=b.isHorizontal()?e:0,g=b.isHorizontal()?0:e;return"translate("+f+","+g+")"};i.enter().append("g").classed(g.Axis.TICK_LABEL_CLASS,!0),i.exit().remove(),i.attr("transform",k),i.text(""),this._drawTicks(f,i);var l="right"===this.orientation()?this._tickSpaceRequired():0,m="bottom"===this.orientation()?this._tickSpaceRequired():0;return h.DOM.translate(this._tickLabelContainer,l,m),this._showAllTickMarks(),this._showAllTickLabels(),this._hideTickMarksWithoutLabel(),this},b.prototype.computeLayout=function(b,c,d){return this._measurer.reset(),a.prototype.computeLayout.call(this,b,c,d),this.isHorizontal()||this._scale.range([0,this.height()]),this},b._MINIMUM_WIDTH_PER_LABEL_PX=15,b}(g.Axis);b.Category=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(18),h=c(8),i=c(0),j=function(a){function b(b,c){a.call(this,b,c),this._tickLabelPositioning="center",this._usesTextWidthApproximation=!1,this.formatter(h.general())}return d(b,a),b.prototype._setup=function(){a.prototype._setup.call(this),this._measurer=new f.CacheMeasurer(this._tickLabelContainer,g.Axis.TICK_LABEL_CLASS),this._wrapper=(new f.Wrapper).maxLines(1)},b.prototype._computeWidth=function(){var a=this._usesTextWidthApproximation?this._computeApproximateTextWidth():this._computeExactTextWidth();return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+a:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+a)},b.prototype._computeExactTextWidth=function(){var a=this,b=this._getTickValues(),c=b.map(function(b){var c=a.formatter()(b);return a._measurer.measure(c).width});return i.Math.max(c,0)},b.prototype._computeApproximateTextWidth=function(){var a=this,b=this._getTickValues(),c=this._measurer.measure("M").width,d=b.map(function(b){var d=a.formatter()(b);return d.length*c});return i.Math.max(d,0)},b.prototype._computeHeight=function(){var a=this._measurer.measure().height;return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+a:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+a)},b.prototype._getTickValues=function(){var a=this._scale,b=a.domain(),c=b[0]<=b[1]?b[0]:b[1],d=b[0]>=b[1]?b[0]:b[1];return c===b[0]?a.ticks().filter(function(a){return a>=c&&a<=d}):a.ticks().filter(function(a){return a>=c&&a<=d}).reverse()},b.prototype._rescale=function(){if(this._isSetup){if(!this.isHorizontal()){var a=this._computeWidth();if(a>this.width()||a<this.width()-this.margin())return void this.redraw()}this.render()}},b.prototype.renderImmediately=function(){var b=this;a.prototype.renderImmediately.call(this);var c={x:0,y:0,dx:"0em",dy:"0.3em"},d=this._maxLabelTickLength(),e=this.tickLabelPadding(),f="middle",h=0,i=0,j=0,k=0;if(this.isHorizontal())switch(this._tickLabelPositioning){case"left":f="end",h=-e,k=e;break;case"center":k=d+e;break;case"right":f="start",h=e,k=e}else switch(this._tickLabelPositioning){case"top":c.dy="-0.3em",j=e,i=-e;break;case"center":j=d+e;break;case"bottom":c.dy="1em",j=e,i=e}var l=this._generateTickMarkAttrHash();switch(this.orientation()){case"bottom":c.x=l.x1,c.dy="0.95em",i=l.y1+k;break;case"top":c.x=l.x1,c.dy="-.25em",i=l.y1-k;break;case"left":f="end",h=l.x1-j,c.y=l.y1;break;case"right":f="start",h=l.x1+j,c.y=l.y1}var m=this._getTickValues(),n=this._tickLabelContainer.selectAll("."+g.Axis.TICK_LABEL_CLASS).data(m);n.enter().append("text").classed(g.Axis.TICK_LABEL_CLASS,!0),n.exit().remove(),n.style("text-anchor",f).style("visibility","inherit").attr(c).text(function(a){return b.formatter()(a)});var o="translate("+h+", "+i+")";return this._tickLabelContainer.attr("transform",o),this._showAllTickMarks(),this.showEndTickLabels()||this._hideEndTickLabels(),this._hideOverflowingTickLabels(),this._hideOverlappingTickLabels(),"bottom"!==this._tickLabelPositioning&&"top"!==this._tickLabelPositioning&&"left"!==this._tickLabelPositioning&&"right"!==this._tickLabelPositioning||this._hideTickMarksWithoutLabel(),this},b.prototype.tickLabelPosition=function(a){if(null==a)return this._tickLabelPositioning;var b=a.toLowerCase();if(this.isHorizontal()){if("left"!==b&&"center"!==b&&"right"!==b)throw new Error(b+" is not a valid tick label position for a horizontal NumericAxis")}else if("top"!==b&&"center"!==b&&"bottom"!==b)throw new Error(b+" is not a valid tick label position for a vertical NumericAxis");return this._tickLabelPositioning=b,this.redraw(),this},b.prototype.usesTextWidthApproximation=function(a){return null==a?this._usesTextWidthApproximation:(this._usesTextWidthApproximation=a,this)},b.prototype._hideEndTickLabels=function(){var a=this._boundingBox.node().getBoundingClientRect(),b=this._tickLabelContainer.selectAll("."+g.Axis.TICK_LABEL_CLASS);if(0!==b[0].length){var c=b[0][0];i.DOM.clientRectInside(c.getBoundingClientRect(),a)||e.select(c).style("visibility","hidden");var d=b[0][b[0].length-1];i.DOM.clientRectInside(d.getBoundingClientRect(),a)||e.select(d).style("visibility","hidden")}},b.prototype._hideOverlappingTickLabels=function(){for(var a=this._tickLabelContainer.selectAll("."+g.Axis.TICK_LABEL_CLASS).filter(function(a,b){var c=e.select(this).style("visibility");return"inherit"===c||"visible"===c}),b=a[0].map(function(a){return a.getBoundingClientRect()}),c=1;!this._hasOverlapWithInterval(c,b)&&c<b.length;)c+=1;a.each(function(a,b){var d=e.select(this);b%c!==0&&d.style("visibility","hidden")})},b.prototype._hasOverlapWithInterval=function(a,b){var c=this.tickLabelPadding();"bottom"!==this._tickLabelPositioning&&"top"!==this._tickLabelPositioning&&"left"!==this._tickLabelPositioning&&"right"!==this._tickLabelPositioning||(c*=3);for(var d=0;d<b.length-a;d+=a){var e=b[d],f=b[d+a];if(this.isHorizontal()){if(e.right+c>=f.left)return!1}else if(e.top-c<=f.bottom)return!1}return!0},b}(g.Axis);b.Numeric=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(33),f=c(14),g=c(0),h=function(a){function b(b){var c=this;a.call(this,b),this._detectionRadius=3,this._enabled=!0,this.addClass("drag-line-layer"),this.addClass("enabled"),this._dragInteraction=new f.Drag,this._dragInteraction.attachTo(this);var d=function(a){return c._isVertical()&&c.pixelPosition()-c.detectionRadius()<=a.x&&a.x<=c.pixelPosition()+c.detectionRadius()||!c._isVertical()&&c.pixelPosition()-c.detectionRadius()<=a.y&&a.y<=c.pixelPosition()+c.detectionRadius()},e=!1,h=function(a){d(a)&&(e=!0,c._dragStartCallbacks.callCallbacks(c))};this._dragInteraction.onDragStart(h);var i=function(a,b){e&&(c._setPixelPositionWithoutChangingMode(c._isVertical()?b.x:b.y),c._dragCallbacks.callCallbacks(c))};this._dragInteraction.onDrag(i);var j=function(a,b){e&&(e=!1,c._dragEndCallbacks.callCallbacks(c))};this._dragInteraction.onDragEnd(j),this._disconnectInteraction=function(){c._dragInteraction.offDragStart(h),c._dragInteraction.offDrag(i),c._dragInteraction.offDragEnd(j),c._dragInteraction.detachFrom(c)},this._dragStartCallbacks=new g.CallbackSet,this._dragCallbacks=new g.CallbackSet,this._dragEndCallbacks=new g.CallbackSet}return d(b,a),b.prototype._setup=function(){a.prototype._setup.call(this),this._detectionEdge=this.content().append("line").style({opacity:0,stroke:"pink","pointer-events":"visibleStroke"}).classed("drag-edge",!0)},b.prototype.renderImmediately=function(){return a.prototype.renderImmediately.call(this),this._detectionEdge.attr({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition(),"stroke-width":2*this._detectionRadius}),this},b.prototype.detectionRadius=function(a){if(null==a)return this._detectionRadius;if(a<0)throw new Error("detection radius cannot be negative.");return this._detectionRadius=a,this.render(),this},b.prototype.enabled=function(a){return null==a?this._enabled:(this._enabled=a,a?this.addClass("enabled"):this.removeClass("enabled"),this._dragInteraction.enabled(a),this)},b.prototype.onDragStart=function(a){return this._dragStartCallbacks.add(a),this},b.prototype.offDragStart=function(a){return this._dragStartCallbacks["delete"](a),this},b.prototype.onDrag=function(a){return this._dragCallbacks.add(a),this},b.prototype.offDrag=function(a){return this._dragCallbacks["delete"](a),this},b.prototype.onDragEnd=function(a){return this._dragEndCallbacks.add(a),this},b.prototype.offDragEnd=function(a){return this._dragEndCallbacks["delete"](a),this},b.prototype.destroy=function(){var b=this;a.prototype.destroy.call(this),this._dragStartCallbacks.forEach(function(a){return b._dragStartCallbacks["delete"](a)}),this._dragCallbacks.forEach(function(a){return b._dragCallbacks["delete"](a)}),this._dragEndCallbacks.forEach(function(a){return b._dragEndCallbacks["delete"](a)}),this._disconnectInteraction()},b}(e.GuideLineLayer);b.DragLineLayer=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(10),f=c(5),g=function(a){function b(b,c){var d=this;if(null!=b&&!e.QuantitativeScale.prototype.isPrototypeOf(b))throw new Error("xScale needs to inherit from Scale.QuantitativeScale");if(null!=c&&!e.QuantitativeScale.prototype.isPrototypeOf(c))throw new Error("yScale needs to inherit from Scale.QuantitativeScale");a.call(this),this.addClass("gridlines"),this._xScale=b,this._yScale=c,this._renderCallback=function(a){return d.render()},this._xScale&&this._xScale.onUpdate(this._renderCallback),this._yScale&&this._yScale.onUpdate(this._renderCallback)}return d(b,a),b.prototype.destroy=function(){return a.prototype.destroy.call(this),this._xScale&&this._xScale.offUpdate(this._renderCallback),this._yScale&&this._yScale.offUpdate(this._renderCallback),this},b.prototype._setup=function(){a.prototype._setup.call(this),this._xLinesContainer=this.content().append("g").classed("x-gridlines",!0),this._yLinesContainer=this.content().append("g").classed("y-gridlines",!0)},b.prototype.renderImmediately=function(){return a.prototype.renderImmediately.call(this),this._redrawXLines(),this._redrawYLines(),this},b.prototype.computeLayout=function(b,c,d){return a.prototype.computeLayout.call(this,b,c,d),null!=this._xScale&&this._xScale.range([0,this.width()]),null!=this._yScale&&this._yScale.range([this.height(),0]),this},b.prototype._redrawXLines=function(){var a=this;if(this._xScale){var b=this._xScale.ticks(),c=function(b){return a._xScale.scale(b)},d=this._xLinesContainer.selectAll("line").data(b);d.enter().append("line"),d.attr("x1",c).attr("y1",0).attr("x2",c).attr("y2",this.height()).classed("zeroline",function(a){return 0===a}),d.exit().remove()}},b.prototype._redrawYLines=function(){var a=this;if(this._yScale){var b=this._yScale.ticks(),c=function(b){return a._yScale.scale(b)},d=this._yLinesContainer.selectAll("line").data(b);d.enter().append("line"),d.attr("x1",0).attr("y1",c).attr("x2",this.width()).attr("y2",c).classed("zeroline",function(a){return 0===a}),d.exit().remove()}},b}(f.Component);b.Gridlines=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(4),f=c(19),g=c(8),h=c(0),i=c(5),j=function(a){function b(b){var c=this;if(a.call(this),this._textPadding=5,null==b)throw new Error("InterpolatedColorLegend requires a interpolatedColorScale");this._scale=b,this._redrawCallback=function(a){return c.redraw()},this._scale.onUpdate(this._redrawCallback),this._formatter=g.general(),this._orientation="horizontal",this._expands=!1,this.addClass("legend"),this.addClass("interpolated-color-legend")}return d(b,a),b.prototype.destroy=function(){a.prototype.destroy.call(this),this._scale.offUpdate(this._redrawCallback)},b.prototype.formatter=function(a){return void 0===a?this._formatter:(this._formatter=a,this.redraw(),this)},b.prototype.expands=function(a){return null==a?this._expands:(this._expands=a,this.redraw(),this)},b._ensureOrientation=function(a){if(a=a.toLowerCase(),"horizontal"===a||"left"===a||"right"===a)return a;throw new Error('"'+a+'" is not a valid orientation for InterpolatedColorLegend')},b.prototype.orientation=function(a){return null==a?this._orientation:(this._orientation=b._ensureOrientation(a),this.redraw(),this)},b.prototype.fixedWidth=function(){return!this.expands()||this._isVertical()},b.prototype.fixedHeight=function(){return!this.expands()||!this._isVertical()},b.prototype._generateTicks=function(a){void 0===a&&(a=b._DEFAULT_NUM_SWATCHES);var c=this._scale.domain();if(1===a)return[c[0]];for(var d=(c[1]-c[0])/(a-1),e=[],f=0;f<a;f++)e.push(c[0]+d*f);return e},b.prototype._setup=function(){a.prototype._setup.call(this),this._swatchContainer=this.content().append("g").classed("swatch-container",!0),this._swatchBoundingBox=this.content().append("rect").classed("swatch-bounding-box",!0),this._lowerLabel=this.content().append("g").classed(b.LEGEND_LABEL_CLASS,!0),this._upperLabel=this.content().append("g").classed(b.LEGEND_LABEL_CLASS,!0),this._measurer=new e.Measurer(this.content()),this._wrapper=new e.Wrapper,this._writer=new e.Writer(this._measurer,this._wrapper)},b.prototype.requestedSpace=function(a,c){var d,e,f=this,g=this._measurer.measure().height,i=g,j=this._scale.domain(),k=j.map(function(a){return f._measurer.measure(f._formatter(a)).width}),l=b._DEFAULT_NUM_SWATCHES;if(this._isVertical()){var m=h.Math.max(k,0);e=i+g+this._textPadding+m+this._textPadding,d=l*g}else d=i+g+i,e=this._textPadding+k[0]+l*g+k[1]+this._textPadding;return{minWidth:e,minHeight:d}},b.prototype._isVertical=function(){return"horizontal"!==this._orientation},b.prototype.renderImmediately=function(){var b=this;a.prototype.renderImmediately.call(this);var c,d,e,g,h,i,j=this._scale.domain(),k=this._formatter(j[0]),l=this._measurer.measure(k).width,m=this._formatter(j[1]),n=this._measurer.measure(m).width,o=this._measurer.measure().height,p=this._textPadding,q={x:0,y:0},r={x:0,y:0},s={selection:this._lowerLabel,xAlign:"center",yAlign:"center",textRotation:0},t={selection:this._upperLabel,xAlign:"center",yAlign:"center",textRotation:0},u={x:0,y:0,width:0,height:0};if(this._isVertical()){i=Math.floor(this.height());var v=Math.max(l,n);h=(this.width()-v-2*this._textPadding)/2,c=Math.max(this.width()-h-2*p-v,0),d=1,g=function(a,c){return b.height()-(c+1)},t.yAlign="top",q.y=0,s.yAlign="bottom",r.y=0,"left"===this._orientation?(e=function(a,b){return p+v+p},t.xAlign="right",q.x=-(h+c+p),s.xAlign="right",r.x=-(h+c+p)):(e=function(a,b){return h},t.xAlign="left",q.x=h+c+p,s.xAlign="left",r.x=h+c+p),u.width=c,u.height=i*d}else h=Math.max(p,(this.height()-o)/2),i=Math.max(Math.floor(this.width()-4*p-l-n),0),c=1,d=Math.max(this.height()-2*h,0),e=function(a,b){return Math.floor(l+2*p)+b},g=function(a,b){return h},t.xAlign="right",q.x=-p,s.xAlign="left",r.x=p,u.y=h,u.width=i*c,u.height=d;u.x=e(null,0),this._upperLabel.text(""),this._writer.write(m,this.width(),this.height(),t);var w="translate("+q.x+", "+q.y+")";this._upperLabel.attr("transform",w),this._lowerLabel.text(""),this._writer.write(k,this.width(),this.height(),s);var x="translate("+r.x+", "+r.y+")";this._lowerLabel.attr("transform",x),this._swatchBoundingBox.attr(u);var y=this._generateTicks(i),z=this._swatchContainer.selectAll("rect.swatch").data(y),A=z.enter().append("rect").classed("swatch",!0);return z.exit().remove(),z.attr({fill:function(a,c){return b._scale.scale(a)},width:c,height:d,x:e,y:g,"shape-rendering":"crispEdges"}),f.ADD_TITLE_ELEMENTS&&A.append("title").text(function(a){return b._formatter(a)}),this},b._DEFAULT_NUM_SWATCHES=11,b.LEGEND_LABEL_CLASS="legend-label",b}(i.Component);b.InterpolatedColorLegend=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(4),f=c(5),g=function(a){function b(b,c){void 0===b&&(b=""),void 0===c&&(c=0),a.call(this),this.addClass("label"),this.text(b),this.angle(c),this.xAlignment("center").yAlignment("center"),this._padding=0}return d(b,a),b.prototype.requestedSpace=function(a,b){var c=this._measurer.measure(this._text),d=(0===this.angle()?c.width:c.height)+2*this.padding(),e=(0===this.angle()?c.height:c.width)+2*this.padding();return{minWidth:d,minHeight:e}},b.prototype._setup=function(){a.prototype._setup.call(this),this._textContainer=this.content().append("g"),this._measurer=new e.CacheMeasurer(this._textContainer),this._wrapper=new e.Wrapper,this._writer=new e.Writer(this._measurer,this._wrapper),this.text(this._text)},b.prototype.text=function(a){if(null==a)return this._text;if("string"!=typeof a)throw new Error("Label.text() only takes strings as input");return this._text=a,this.redraw(),this},b.prototype.angle=function(a){if(null==a)return this._angle;if(a%=360,a>180?a-=360:a<-180&&(a+=360),a!==-90&&0!==a&&90!==a)throw new Error(a+" is not a valid angle for Label");return this._angle=a,this.redraw(),this},b.prototype.padding=function(a){if(null==a)return this._padding;if(a=+a,a<0)throw new Error(a+" is not a valid padding value. Cannot be less than 0.");return this._padding=a,this.redraw(),this},b.prototype.fixedWidth=function(){return!0},b.prototype.fixedHeight=function(){return!0},b.prototype.renderImmediately=function(){a.prototype.renderImmediately.call(this),this._textContainer.selectAll("g").remove();var b=this._measurer.measure(this._text),c=Math.max(Math.min((this.height()-b.height)/2,this.padding()),0),d=Math.max(Math.min((this.width()-b.width)/2,this.padding()),0);this._textContainer.attr("transform","translate("+d+","+c+")");var e=this.width()-2*d,f=this.height()-2*c,g={selection:this._textContainer,xAlign:this.xAlignment(),yAlign:this.yAlignment(),textRotation:this.angle()};return this._writer.write(this._text,e,f,g),this},b}(f.Component);b.Label=g;var h=function(a){function b(c,d){a.call(this,c,d),this.addClass(b.TITLE_LABEL_CLASS)}return d(b,a),b.TITLE_LABEL_CLASS="title-label",b}(g);b.TitleLabel=h;var i=function(a){function b(c,d){a.call(this,c,d),this.addClass(b.AXIS_LABEL_CLASS)}return d(b,a),b.AXIS_LABEL_CLASS="axis-label",b}(g);b.AxisLabel=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(19),h=c(8),i=c(25),j=c(0),k=c(5),l=function(){function a(a,b,c){void 0===a&&(a=[]),void 0===b&&(b=0),void 0===c&&(c=1/0),this.columns=a,this.bottomPadding=b,this.maxWidth=c}return a.prototype.addColumn=function(a){var b=a.width,c=this.getWidthAvailable();a.width=Math.min(c,b),this.columns.push(a)},a.prototype.getBounds=function(a){for(var b=this.columns[a],c=0,d=0;d<a;d++)c+=this.columns[d].width;return{topLeft:{x:c,y:0},bottomRight:{x:c+b.width,y:b.height}}},a.prototype.getHeight=function(){return j.Math.max(this.columns.map(function(a){var b=a.height;return b}),0)+this.bottomPadding},a.prototype.getWidth=function(){return Math.min(this.columns.reduce(function(a,b){var c=b.width;return a+c},0),this.maxWidth)},a.prototype.getWidthAvailable=function(){var a=this.getWidth();return Math.max(this.maxWidth-a,0)},a}(),m=function(){function a(a,b,c,d){void 0===a&&(a=1/0),void 0===b&&(b=1/0),void 0===c&&(c=0),void 0===d&&(d=[]),this.maxWidth=a,this.maxHeight=b,this.padding=c,this.rows=d}return a.prototype.addRow=function(a){a.maxWidth=this.maxWidth-2*this.padding,this.rows.push(a)},a.prototype.getColumnBounds=function(a,b){var c=this.getRowBounds(a),d=this.rows[a].getBounds(b);return d.topLeft.x+=c.topLeft.x,d.bottomRight.x+=c.topLeft.x,d.topLeft.y+=c.topLeft.y,d.bottomRight.y+=c.topLeft.y,d},a.prototype.getRowBounds=function(a){for(var b=this.padding,c=this.padding,d=0;d<a;d++)c+=this.rows[d].getHeight();var e={topLeft:{x:b,y:c},bottomRight:{x:b+this.rows[a].getWidth(),y:c+this.rows[a].getHeight()}};return e},a.prototype.getHeight=function(){return Math.min(this.rows.reduce(function(a,b){return a+b.getHeight()},0)+2*this.padding,this.maxHeight)},a.prototype.getWidth=function(){return Math.min(j.Math.max(this.rows.map(function(a){return a.getWidth()}),0)+2*this.padding,this.maxWidth)},a}(),n=function(a){function b(b){var c=this;if(a.call(this),this._padding=5,this._rowBottomPadding=3,this.addClass("legend"),this.maxEntriesPerRow(1),null==b)throw new Error("Legend requires a colorScale");this._colorScale=b,this._redrawCallback=function(a){return c.redraw()},this._colorScale.onUpdate(this._redrawCallback),this._formatter=h.identity(),this.maxLinesPerEntry(1),this.xAlignment("right").yAlignment("top"),this.comparator(function(a,b){var d=c._colorScale.domain().slice().map(function(a){return c._formatter(a)});return d.indexOf(a)-d.indexOf(b)}),this._symbolFactoryAccessor=function(){return i.circle()},this._symbolOpacityAccessor=function(){return 1}}return d(b,a),b.prototype._setup=function(){a.prototype._setup.call(this);var c=this.content().append("g").classed(b.LEGEND_ROW_CLASS,!0),d=c.append("g").classed(b.LEGEND_ENTRY_CLASS,!0);d.append("text"),this._measurer=new f.Measurer(c),this._wrapper=(new f.Wrapper).maxLines(this.maxLinesPerEntry()),this._writer=new f.Writer(this._measurer,this._wrapper).addTitleElement(g.ADD_TITLE_ELEMENTS)},b.prototype.formatter=function(a){return null==a?this._formatter:(this._formatter=a,this.redraw(),this)},b.prototype.maxEntriesPerRow=function(a){return null==a?this._maxEntriesPerRow:(this._maxEntriesPerRow=a,this.redraw(),this)},b.prototype.maxLinesPerEntry=function(a){return null==a?this._maxLinesPerEntry:(this._maxLinesPerEntry=a,this.redraw(),this)},b.prototype.maxWidth=function(a){return null==a?this._maxWidth:(this._maxWidth=a,this.redraw(),this)},b.prototype.comparator=function(a){return null==a?this._comparator:(this._comparator=a,this.redraw(),this)},b.prototype.colorScale=function(a){return null!=a?(this._colorScale.offUpdate(this._redrawCallback),this._colorScale=a,this._colorScale.onUpdate(this._redrawCallback),this.redraw(),this):this._colorScale},b.prototype.destroy=function(){a.prototype.destroy.call(this),this._colorScale.offUpdate(this._redrawCallback)},b.prototype._buildLegendTable=function(a,b){var c=this,d=this._measurer.measure().height,e=new m(a,b,this._padding),f=this._colorScale.domain().slice().sort(function(a,b){return c._comparator(c._formatter(a),c._formatter(b))}),g=new l;return e.addRow(g),g.bottomPadding=this._rowBottomPadding,f.forEach(function(a,b){g.columns.length/2===c.maxEntriesPerRow()&&(g=new l,g.bottomPadding=c._rowBottomPadding,e.addRow(g));var f=g.getWidthAvailable(),h=c._formatter(a),i=c._measurer.measure(h).width,j=f-d-i<0;j&&g.columns.length>1&&(g=new l,g.bottomPadding=c._rowBottomPadding,e.addRow(g));var k={width:d,height:d,data:{name:a,type:"symbol"}};g.addColumn(k),f=g.getWidthAvailable();var m=Math.min(f,i);c._wrapper.maxLines(c.maxLinesPerEntry());var n=c._wrapper.wrap(h,c._measurer,m).noLines,o=n*d,p={width:m,height:o,data:{name:a,type:"text"}};g.addColumn(p)}),e},b.prototype.requestedSpace=function(a,b){var c=this._buildLegendTable(j.Math.min([this.maxWidth(),a],a),b);return{minHeight:c.getHeight(),minWidth:c.getWidth()}},b.prototype.entitiesAt=function(a){var c=this;if(!this._isSetup)return[];var d=this._buildLegendTable(this.width(),this.height());return d.rows.reduce(function(f,g,h){if(0!==f.length)return f;var i=d.getRowBounds(h),k=j.Math.within(a,i);return k?g.columns.reduce(function(f,g,i){var k=d.getColumnBounds(h,i),l=j.Math.within(a,k);if(l){var m=c.content().selectAll("."+b.LEGEND_ROW_CLASS)[0][h],n=e.select(m).selectAll("."+b.LEGEND_ENTRY_CLASS)[0][Math.floor(i/2)],o=e.select(n).select("."+b.LEGEND_SYMBOL_CLASS),p=e.transform(e.select(m).attr("transform")).translate,q=e.transform(o.attr("transform")).translate;return[{datum:g.data.name,position:{x:p[0]+q[0],y:p[1]+q[1]},selection:e.select(n),component:c}]}return f},f):f},[])},b.prototype.renderImmediately=function(){var c=this;a.prototype.renderImmediately.call(this);var d=this._buildLegendTable(this.width(),this.height());this._colorScale.domain().slice().sort(function(a,b){return c._comparator(c._formatter(a),c._formatter(b))});this.content().selectAll("*").remove();var f=this.content().selectAll("g."+b.LEGEND_ROW_CLASS).data(d.rows);f.enter().append("g").classed(b.LEGEND_ROW_CLASS,!0),f.exit().remove(),f.attr("transform",function(a,b){var c=d.getRowBounds(b);return"translate("+c.topLeft.x+", "+c.topLeft.y+")"});var g=f.selectAll("g."+b.LEGEND_ENTRY_CLASS).data(function(a){for(var b=[],c=0;c<a.columns.length;c+=2)b.push([a.columns[c],a.columns[c+1]]);return b}),h=g.enter().append("g").classed(b.LEGEND_ENTRY_CLASS,!0);h.append("path").attr("d",function(a,b,d){var e=a[0];return c.symbol()(e.data.name,d)(.6*e.height)}).attr("transform",function(a,b,c){var e=a[0],f=d.rows[c].columns.indexOf(e),g=d.getColumnBounds(c,f);return"translate("+(g.topLeft.x+e.width/2)+", "+e.height/2+")"}).attr("fill",function(a){return c._colorScale.scale(a[0].data.name)}).attr("opacity",function(a,b,d){return c.symbolOpacity()(a[0].data.name,d)}).classed(b.LEGEND_SYMBOL_CLASS,!0);var i=this;return h.append("g").classed("text-container",!0).attr("transform",function(a,b,c){var e=a[1],f=d.rows[c].columns.indexOf(e),g=d.getColumnBounds(c,f);return"translate("+g.topLeft.x+", 0)"}).each(function(a,b,c){var d=e.select(this),f=a[1],g={selection:d,xAlign:"left",yAlign:"top",textRotation:0};i._writer.write(i._formatter(f.data.name),f.width,i.height(),g)}),g.exit().remove(),this},b.prototype.symbol=function(a){return null==a?this._symbolFactoryAccessor:(this._symbolFactoryAccessor=a,this.render(),this)},b.prototype.symbolOpacity=function(a){return null==a?this._symbolOpacityAccessor:("number"==typeof a?this._symbolOpacityAccessor=function(){return a}:this._symbolOpacityAccessor=a,this.render(),this)},b.prototype.fixedWidth=function(){return!0},b.prototype.fixedHeight=function(){return!0},b.LEGEND_ROW_CLASS="legend-row",b.LEGEND_ENTRY_CLASS="legend-entry",b.LEGEND_SYMBOL_CLASS="legend-symbol",b}(k.Component);b.Legend=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(2),f=c(0),g=c(32),h=function(a){function b(){a.apply(this,arguments)}return d(b,a),b.prototype.entityNearest=function(a){var b,c=1/0;return this.components().forEach(function(d){var e=d,g=e.entityNearest(a);if(null!=g){var h=f.Math.distanceSquared(g.position,a);h<=c&&(c=h,b=g)}}),b},b.prototype.append=function(b){if(null!=b&&!(b instanceof e.Plot))throw new Error("Plot Group only accepts plots");return a.prototype.append.call(this,b),this},b}(g.Group);b.PlotGroup=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(0),g=c(23),h=function(a){function b(b){var c=this;void 0===b&&(b=[]),a.call(this),this._rowPadding=0,this._columnPadding=0,this._rows=[],this._rowWeights=[],this._columnWeights=[],this._nRows=0,this._nCols=0,this._calculatedLayout=null,this.addClass("table"),b.forEach(function(a,b){a.forEach(function(a,d){null!=a&&c.add(a,b,d)})})}return d(b,a),b.prototype._forEach=function(a){for(var b=0;b<this._nRows;b++)for(var c=0;c<this._nCols;c++)null!=this._rows[b][c]&&a(this._rows[b][c])},b.prototype.has=function(a){for(var b=0;b<this._nRows;b++)for(var c=0;c<this._nCols;c++)if(this._rows[b][c]===a)return!0;
return!1},b.prototype.componentAt=function(a,b){return a<0||a>=this._nRows||b<0||b>=this._nCols?null:this._rows[a][b]},b.prototype.add=function(a,b,c){if(null==a)throw Error("Cannot add null to a table cell");if(!this.has(a)){var d=this._rows[b]&&this._rows[b][c];if(null!=d)throw new Error("cell is occupied");a.detach(),this._nRows=Math.max(b+1,this._nRows),this._nCols=Math.max(c+1,this._nCols),this._padTableToSize(this._nRows,this._nCols),this._rows[b][c]=a,this._adoptAndAnchor(a),this.redraw()}return this},b.prototype._remove=function(a){for(var b=0;b<this._nRows;b++)for(var c=0;c<this._nCols;c++)if(this._rows[b][c]===a)return this._rows[b][c]=null,!0;return!1},b.prototype._iterateLayout=function(a,c,d){void 0===d&&(d=!1);for(var g,h,i,j,k,l=this._rows,m=e.transpose(this._rows),n=a-this._columnPadding*(this._nCols-1),o=c-this._rowPadding*(this._nRows-1),p=b._calcComponentWeights(this._rowWeights,l,function(a){return null==a||a.fixedHeight()}),q=b._calcComponentWeights(this._columnWeights,m,function(a){return null==a||a.fixedWidth()}),r=q.map(function(a){return 0===a?.5:a}),s=p.map(function(a){return 0===a?.5:a}),t=b._calcProportionalSpace(r,n),u=b._calcProportionalSpace(s,o),v=f.Array.createFilledArray(0,this._nCols),w=f.Array.createFilledArray(0,this._nRows),x=0;;){var y=f.Array.add(w,u),z=f.Array.add(v,t);i=this._determineGuarantees(z,y,d),v=i.guaranteedWidths,w=i.guaranteedHeights,j=i.wantsWidthArr.some(function(a){return a}),k=i.wantsHeightArr.some(function(a){return a});var A=g,B=h;g=n-e.sum(i.guaranteedWidths),h=o-e.sum(i.guaranteedHeights);var C=void 0;j?(C=i.wantsWidthArr.map(function(a){return a?.1:0}),C=f.Array.add(C,q)):C=q;var D=void 0;k?(D=i.wantsHeightArr.map(function(a){return a?.1:0}),D=f.Array.add(D,p)):D=p,t=b._calcProportionalSpace(C,g),u=b._calcProportionalSpace(D,h),x++;var E=g>0&&g!==A,F=h>0&&h!==B;if(!E&&!F)break;if(x>5)break}return g=n-e.sum(i.guaranteedWidths),h=o-e.sum(i.guaranteedHeights),t=b._calcProportionalSpace(q,g),u=b._calcProportionalSpace(p,h),{colProportionalSpace:t,rowProportionalSpace:u,guaranteedWidths:i.guaranteedWidths,guaranteedHeights:i.guaranteedHeights,wantsWidth:j,wantsHeight:k}},b.prototype._determineGuarantees=function(a,b,c){void 0===c&&(c=!1);var d=f.Array.createFilledArray(0,this._nCols),e=f.Array.createFilledArray(0,this._nRows),g=f.Array.createFilledArray(!1,this._nCols),h=f.Array.createFilledArray(!1,this._nRows);return this._rows.forEach(function(f,i){f.forEach(function(f,j){var k;k=null!=f?f.requestedSpace(a[j],b[i]):{minWidth:0,minHeight:0};var l=c?Math.min(k.minWidth,a[j]):k.minWidth;d[j]=Math.max(d[j],l);var m=c?Math.min(k.minHeight,b[i]):k.minHeight;e[i]=Math.max(e[i],m);var n=k.minWidth>a[j];g[j]=g[j]||n;var o=k.minHeight>b[i];h[i]=h[i]||o})}),{guaranteedWidths:d,guaranteedHeights:e,wantsWidthArr:g,wantsHeightArr:h}},b.prototype.requestedSpace=function(a,b){return this._calculatedLayout=this._iterateLayout(a,b),{minWidth:e.sum(this._calculatedLayout.guaranteedWidths),minHeight:e.sum(this._calculatedLayout.guaranteedHeights)}},b.prototype.computeLayout=function(b,c,d){var g=this;a.prototype.computeLayout.call(this,b,c,d);var h=e.sum(this._calculatedLayout.guaranteedWidths),i=e.sum(this._calculatedLayout.guaranteedHeights),j=this._calculatedLayout;(h>this.width()||i>this.height())&&(j=this._iterateLayout(this.width(),this.height(),!0));var k=0,l=f.Array.add(j.rowProportionalSpace,j.guaranteedHeights),m=f.Array.add(j.colProportionalSpace,j.guaranteedWidths);return this._rows.forEach(function(a,b){var c=0;a.forEach(function(a,d){null!=a&&a.computeLayout({x:c,y:k},m[d],l[b]),c+=m[d]+g._columnPadding}),k+=l[b]+g._rowPadding}),this},b.prototype.rowPadding=function(a){if(null==a)return this._rowPadding;if(!f.Math.isValidNumber(a)||a<0)throw Error("rowPadding must be a non-negative finite value");return this._rowPadding=a,this.redraw(),this},b.prototype.columnPadding=function(a){if(null==a)return this._columnPadding;if(!f.Math.isValidNumber(a)||a<0)throw Error("columnPadding must be a non-negative finite value");return this._columnPadding=a,this.redraw(),this},b.prototype.rowWeight=function(a,b){if(null==b)return this._rowWeights[a];if(!f.Math.isValidNumber(b)||b<0)throw Error("rowWeight must be a non-negative finite value");return this._rowWeights[a]=b,this.redraw(),this},b.prototype.columnWeight=function(a,b){if(null==b)return this._columnWeights[a];if(!f.Math.isValidNumber(b)||b<0)throw Error("columnWeight must be a non-negative finite value");return this._columnWeights[a]=b,this.redraw(),this},b.prototype.fixedWidth=function(){var a=e.transpose(this._rows);return b._fixedSpace(a,function(a){return null==a||a.fixedWidth()})},b.prototype.fixedHeight=function(){return b._fixedSpace(this._rows,function(a){return null==a||a.fixedHeight()})},b.prototype._padTableToSize=function(a,b){for(var c=0;c<a;c++){void 0===this._rows[c]&&(this._rows[c]=[],this._rowWeights[c]=null);for(var d=0;d<b;d++)void 0===this._rows[c][d]&&(this._rows[c][d]=null)}for(var d=0;d<b;d++)void 0===this._columnWeights[d]&&(this._columnWeights[d]=null)},b._calcComponentWeights=function(a,b,c){return a.map(function(a,d){if(null!=a)return a;var e=b[d].map(c),f=e.reduce(function(a,b){return a&&b},!0);return f?0:1})},b._calcProportionalSpace=function(a,b){var c=e.sum(a);return 0===c?f.Array.createFilledArray(0,a.length):a.map(function(a){return b*a/c})},b._fixedSpace=function(a,b){var c=function(a){return a.reduce(function(a,b){return a&&b},!0)},d=function(a){return c(a.map(b))};return c(a.map(d))},b}(g.ComponentContainer);b.Table=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(26),f=function(a){function b(){a.call(this),this.addClass("x-drag-box-layer"),this._hasCorners=!1}return d(b,a),b.prototype.computeLayout=function(b,c,d){return a.prototype.computeLayout.call(this,b,c,d),this._setBounds(this.bounds()),this},b.prototype._setBounds=function(b){a.prototype._setBounds.call(this,{topLeft:{x:b.topLeft.x,y:0},bottomRight:{x:b.bottomRight.x,y:this.height()}})},b.prototype._setResizableClasses=function(a){a&&this.enabled()?this.addClass("x-resizable"):this.removeClass("x-resizable")},b.prototype.yScale=function(b){if(null==b)return a.prototype.yScale.call(this);throw new Error("yScales cannot be set on an XDragBoxLayer")},b.prototype.yExtent=function(b){if(null==b)return a.prototype.yExtent.call(this);throw new Error("XDragBoxLayer has no yExtent")},b}(e.DragBoxLayer);b.XDragBoxLayer=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(26),f=function(a){function b(){a.call(this),this.addClass("y-drag-box-layer"),this._hasCorners=!1}return d(b,a),b.prototype.computeLayout=function(b,c,d){return a.prototype.computeLayout.call(this,b,c,d),this._setBounds(this.bounds()),this},b.prototype._setBounds=function(b){a.prototype._setBounds.call(this,{topLeft:{x:0,y:b.topLeft.y},bottomRight:{x:this.width(),y:b.bottomRight.y}})},b.prototype._setResizableClasses=function(a){a&&this.enabled()?this.addClass("y-resizable"):this.removeClass("y-resizable")},b.prototype.xScale=function(b){if(null==b)return a.prototype.xScale.call(this);throw new Error("xScales cannot be set on an YDragBoxLayer")},b.prototype.xExtent=function(b){if(null==b)return a.prototype.xExtent.call(this);throw new Error("YDragBoxLayer has no xExtent")},b}(e.DragBoxLayer);b.YDragBoxLayer=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(20),f=function(a){function b(){var c=this;a.call(this),this._eventToProcessingFunction[b._KEYDOWN_EVENT_NAME]=function(a){return c._processKeydown(a)},this._eventToProcessingFunction[b._KEYUP_EVENT_NAME]=function(a){return c._processKeyup(a)}}return d(b,a),b.getDispatcher=function(){var a=document[b._DISPATCHER_KEY];return null==a&&(a=new b,document[b._DISPATCHER_KEY]=a),a},b.prototype._processKeydown=function(a){this._callCallbacksForEvent(b._KEYDOWN_EVENT_NAME,a.keyCode,a)},b.prototype._processKeyup=function(a){this._callCallbacksForEvent(b._KEYUP_EVENT_NAME,a.keyCode,a)},b.prototype.onKeyDown=function(a){return this._addCallbackForEvent(b._KEYDOWN_EVENT_NAME,a),this},b.prototype.offKeyDown=function(a){return this._removeCallbackForEvent(b._KEYDOWN_EVENT_NAME,a),this},b.prototype.onKeyUp=function(a){return this._addCallbackForEvent(b._KEYUP_EVENT_NAME,a),this},b.prototype.offKeyUp=function(a){return this._removeCallbackForEvent(b._KEYUP_EVENT_NAME,a),this},b._DISPATCHER_KEY="__Plottable_Dispatcher_Key",b._KEYDOWN_EVENT_NAME="keydown",b._KEYUP_EVENT_NAME="keyup",b}(e.Dispatcher);b.Key=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(0),f=c(20),g=function(a){function b(c){var d=this;a.call(this),this._translator=e.ClientToSVGTranslator.getTranslator(c),this._lastMousePosition={x:-1,y:-1};var f=function(a){return d._measureAndDispatch(a,b._MOUSEMOVE_EVENT_NAME,"page")};this._eventToProcessingFunction[b._MOUSEOVER_EVENT_NAME]=f,this._eventToProcessingFunction[b._MOUSEMOVE_EVENT_NAME]=f,this._eventToProcessingFunction[b._MOUSEOUT_EVENT_NAME]=f,this._eventToProcessingFunction[b._MOUSEDOWN_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._MOUSEDOWN_EVENT_NAME)},this._eventToProcessingFunction[b._MOUSEUP_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._MOUSEUP_EVENT_NAME,"page")},this._eventToProcessingFunction[b._WHEEL_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._WHEEL_EVENT_NAME)},this._eventToProcessingFunction[b._DBLCLICK_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._DBLCLICK_EVENT_NAME)}}return d(b,a),b.getDispatcher=function(a){var c=e.DOM.boundingSVG(a),d=c[b._DISPATCHER_KEY];return null==d&&(d=new b(c),c[b._DISPATCHER_KEY]=d),d},b.prototype.onMouseMove=function(a){return this._addCallbackForEvent(b._MOUSEMOVE_EVENT_NAME,a),this},b.prototype.offMouseMove=function(a){return this._removeCallbackForEvent(b._MOUSEMOVE_EVENT_NAME,a),this},b.prototype.onMouseDown=function(a){return this._addCallbackForEvent(b._MOUSEDOWN_EVENT_NAME,a),this},b.prototype.offMouseDown=function(a){return this._removeCallbackForEvent(b._MOUSEDOWN_EVENT_NAME,a),this},b.prototype.onMouseUp=function(a){return this._addCallbackForEvent(b._MOUSEUP_EVENT_NAME,a),this},b.prototype.offMouseUp=function(a){return this._removeCallbackForEvent(b._MOUSEUP_EVENT_NAME,a),this},b.prototype.onWheel=function(a){return this._addCallbackForEvent(b._WHEEL_EVENT_NAME,a),this},b.prototype.offWheel=function(a){return this._removeCallbackForEvent(b._WHEEL_EVENT_NAME,a),this},b.prototype.onDblClick=function(a){return this._addCallbackForEvent(b._DBLCLICK_EVENT_NAME,a),this},b.prototype.offDblClick=function(a){return this._removeCallbackForEvent(b._DBLCLICK_EVENT_NAME,a),this},b.prototype._measureAndDispatch=function(a,b,c){if(void 0===c&&(c="element"),"page"!==c&&"element"!==c)throw new Error("Invalid scope '"+c+"', must be 'element' or 'page'");if("page"===c||this.eventInsideSVG(a)){var d=this._translator.computePosition(a.clientX,a.clientY);null!=d&&(this._lastMousePosition=d,this._callCallbacksForEvent(b,this.lastMousePosition(),a))}},b.prototype.eventInsideSVG=function(a){return this._translator.insideSVG(a)},b.prototype.lastMousePosition=function(){return this._lastMousePosition},b._DISPATCHER_KEY="__Plottable_Dispatcher_Mouse",b._MOUSEOVER_EVENT_NAME="mouseover",b._MOUSEMOVE_EVENT_NAME="mousemove",b._MOUSEOUT_EVENT_NAME="mouseout",b._MOUSEDOWN_EVENT_NAME="mousedown",b._MOUSEUP_EVENT_NAME="mouseup",b._WHEEL_EVENT_NAME="wheel",b._DBLCLICK_EVENT_NAME="dblclick",b}(f.Dispatcher);b.Mouse=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(0),f=c(20),g=function(a){function b(c){var d=this;a.call(this),this._translator=e.ClientToSVGTranslator.getTranslator(c),this._eventToProcessingFunction[b._TOUCHSTART_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._TOUCHSTART_EVENT_NAME,"page")},this._eventToProcessingFunction[b._TOUCHMOVE_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._TOUCHMOVE_EVENT_NAME,"page")},this._eventToProcessingFunction[b._TOUCHEND_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._TOUCHEND_EVENT_NAME,"page")},this._eventToProcessingFunction[b._TOUCHCANCEL_EVENT_NAME]=function(a){return d._measureAndDispatch(a,b._TOUCHCANCEL_EVENT_NAME,"page")}}return d(b,a),b.getDispatcher=function(a){var c=e.DOM.boundingSVG(a),d=c[b._DISPATCHER_KEY];return null==d&&(d=new b(c),c[b._DISPATCHER_KEY]=d),d},b.prototype.onTouchStart=function(a){return this._addCallbackForEvent(b._TOUCHSTART_EVENT_NAME,a),this},b.prototype.offTouchStart=function(a){return this._removeCallbackForEvent(b._TOUCHSTART_EVENT_NAME,a),this},b.prototype.onTouchMove=function(a){return this._addCallbackForEvent(b._TOUCHMOVE_EVENT_NAME,a),this},b.prototype.offTouchMove=function(a){return this._removeCallbackForEvent(b._TOUCHMOVE_EVENT_NAME,a),this},b.prototype.onTouchEnd=function(a){return this._addCallbackForEvent(b._TOUCHEND_EVENT_NAME,a),this},b.prototype.offTouchEnd=function(a){return this._removeCallbackForEvent(b._TOUCHEND_EVENT_NAME,a),this},b.prototype.onTouchCancel=function(a){return this._addCallbackForEvent(b._TOUCHCANCEL_EVENT_NAME,a),this},b.prototype.offTouchCancel=function(a){return this._removeCallbackForEvent(b._TOUCHCANCEL_EVENT_NAME,a),this},b.prototype._measureAndDispatch=function(a,b,c){if(void 0===c&&(c="element"),"page"!==c&&"element"!==c)throw new Error("Invalid scope '"+c+"', must be 'element' or 'page'");if("element"!==c||this.eventInsideSVG(a)){for(var d=a.changedTouches,e={},f=[],g=0;g<d.length;g++){var h=d[g],i=h.identifier,j=this._translator.computePosition(h.clientX,h.clientY);null!=j&&(e[i]=j,f.push(i))}f.length>0&&this._callCallbacksForEvent(b,f,e,a)}},b.prototype.eventInsideSVG=function(a){return this._translator.insideSVG(a)},b._DISPATCHER_KEY="__Plottable_Dispatcher_Touch",b._TOUCHSTART_EVENT_NAME="touchstart",b._TOUCHMOVE_EVENT_NAME="touchmove",b._TOUCHEND_EVENT_NAME="touchend",b._TOUCHCANCEL_EVENT_NAME="touchcancel",b}(f.Dispatcher);b.Touch=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(7),f=function(a){function b(b){a.call(this,b),this._className="arc fill",this._svgElementName="path"}return d(b,a),b.prototype._applyDefaultAttributes=function(b){a.prototype._applyDefaultAttributes.call(this,b),b.style("stroke","none")},b}(e.Drawer);b.Arc=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(7),f=function(a){function b(b){a.call(this,b),this._className="arc outline",this._svgElementName="path"}return d(b,a),b.prototype._applyDefaultAttributes=function(b){a.prototype._applyDefaultAttributes.call(this,b),b.style("fill","none")},b}(e.Drawer);b.ArcOutline=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(7),g=function(a){function b(b){a.call(this,b),this._className="area",this._svgElementName="path"}return d(b,a),b.prototype._applyDefaultAttributes=function(b){a.prototype._applyDefaultAttributes.call(this,b),b.style("stroke","none")},b.prototype.selectionForIndex=function(a){return e.select(this.selection()[0][0])},b}(f.Drawer);b.Area=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(7),g=function(a){function b(b){a.call(this,b),this._className="line",this._svgElementName="path"}return d(b,a),b.prototype._applyDefaultAttributes=function(b){a.prototype._applyDefaultAttributes.call(this,b),b.style("fill","none")},b.prototype.selectionForIndex=function(a){return e.select(this.selection()[0][0])},b}(f.Drawer);b.Line=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(7),f=function(a){function b(b){a.call(this,b),this._svgElementName="rect"}return d(b,a),b}(e.Drawer);b.Rectangle=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(7),f=function(a){function b(b){a.call(this,b),this._svgElementName="line"}return d(b,a),b}(e.Drawer);b.Segment=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(7),f=function(a){function b(b){a.call(this,b),this._svgElementName="path",this._className="symbol"}return d(b,a),b}(e.Drawer);b.Symbol=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(11),f=c(0),g=c(12),h=function(a){function b(){var b=this;a.apply(this,arguments),this._clickedDown=!1,this._onClickCallbacks=new f.CallbackSet,this._mouseDownCallback=function(a,c){return b._handleClickDown(a,c)},this._mouseUpCallback=function(a,c){return b._handleClickUp(a,c)},this._touchStartCallback=function(a,c,d){return b._handleClickDown(c[a[0]],d)},this._touchEndCallback=function(a,c,d){return b._handleClickUp(c[a[0]],d)},this._touchCancelCallback=function(a,c){return b._clickedDown=!1}}return d(b,a),b.prototype._anchor=function(b){a.prototype._anchor.call(this,b),this._mouseDispatcher=e.Mouse.getDispatcher(b.content().node()),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._touchDispatcher=e.Touch.getDispatcher(b.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},b.prototype._unanchor=function(){a.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null},b.prototype._handleClickDown=function(a,b){var c=this._translateToComponentSpace(a);this._isInsideComponent(c)&&(this._clickedDown=!0)},b.prototype._handleClickUp=function(a,b){var c=this._translateToComponentSpace(a);this._clickedDown&&this._isInsideComponent(c)&&this._onClickCallbacks.callCallbacks(c,b),this._clickedDown=!1},b.prototype.onClick=function(a){return this._onClickCallbacks.add(a),this},b.prototype.offClick=function(a){return this._onClickCallbacks["delete"](a),this},b}(g.Interaction);b.Click=h},function(a,b,c){"use strict";var d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(11),g=c(0),h=c(12);!function(a){a[a.NotClicked=0]="NotClicked",a[a.SingleClicked=1]="SingleClicked",a[a.DoubleClicked=2]="DoubleClicked"}(d||(d={}));var i=function(a){function b(){var b=this;a.apply(this,arguments),this._clickState=d.NotClicked,this._clickedDown=!1,this._onDoubleClickCallbacks=new g.CallbackSet,this._mouseDownCallback=function(a){return b._handleClickDown(a)},this._mouseUpCallback=function(a){return b._handleClickUp(a)},this._dblClickCallback=function(a){return b._handleDblClick()},this._touchStartCallback=function(a,c){return b._handleClickDown(c[a[0]])},this._touchEndCallback=function(a,c){return b._handleClickUp(c[a[0]])},this._touchCancelCallback=function(a,c){return b._handleClickCancel()}}return e(b,a),b.prototype._anchor=function(b){a.prototype._anchor.call(this,b),this._mouseDispatcher=f.Mouse.getDispatcher(b.content().node()),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._mouseDispatcher.onDblClick(this._dblClickCallback),this._touchDispatcher=f.Touch.getDispatcher(b.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},b.prototype._unanchor=function(){a.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher.offDblClick(this._dblClickCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null},b.prototype._handleClickDown=function(a){var c=this._translateToComponentSpace(a);this._isInsideComponent(c)&&(this._clickState===d.SingleClicked&&b._pointsEqual(c,this._clickedPoint)||(this._clickState=d.NotClicked),this._clickedPoint=c,this._clickedDown=!0)},b.prototype._handleClickUp=function(a){var c=this._translateToComponentSpace(a);this._clickedDown&&b._pointsEqual(c,this._clickedPoint)?this._clickState=this._clickState===d.NotClicked?d.SingleClicked:d.DoubleClicked:this._clickState=d.NotClicked,this._clickedDown=!1},b.prototype._handleDblClick=function(){this._clickState===d.DoubleClicked&&(this._onDoubleClickCallbacks.callCallbacks(this._clickedPoint),this._clickState=d.NotClicked)},b.prototype._handleClickCancel=function(){this._clickState=d.NotClicked,this._clickedDown=!1},b._pointsEqual=function(a,b){return a.x===b.x&&a.y===b.y},b.prototype.onDoubleClick=function(a){return this._onDoubleClickCallbacks.add(a),this},b.prototype.offDoubleClick=function(a){return this._onDoubleClickCallbacks["delete"](a),this},b}(h.Interaction);b.DoubleClick=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(11),f=c(0),g=c(12),h=function(a){function b(){var b=this;a.apply(this,arguments),this._dragging=!1,this._constrainedToComponent=!0,this._dragStartCallbacks=new f.CallbackSet,this._dragCallbacks=new f.CallbackSet,this._dragEndCallbacks=new f.CallbackSet,this._mouseDownCallback=function(a,c){return b._startDrag(a,c)},this._mouseMoveCallback=function(a,c){return b._doDrag(a,c)},this._mouseUpCallback=function(a,c){return b._endDrag(a,c)},this._touchStartCallback=function(a,c,d){return b._startDrag(c[a[0]],d)},this._touchMoveCallback=function(a,c,d){return b._doDrag(c[a[0]],d)},this._touchEndCallback=function(a,c,d){return b._endDrag(c[a[0]],d)}}return d(b,a),b.prototype._anchor=function(b){a.prototype._anchor.call(this,b),this._mouseDispatcher=e.Mouse.getDispatcher(this._componentAttachedTo.content().node()),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseMove(this._mouseMoveCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._touchDispatcher=e.Touch.getDispatcher(this._componentAttachedTo.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchMove(this._touchMoveCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback)},b.prototype._unanchor=function(){a.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseMove(this._mouseMoveCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchMove(this._touchMoveCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher=null},b.prototype._translateAndConstrain=function(a){var b=this._translateToComponentSpace(a);return this._constrainedToComponent?{x:f.Math.clamp(b.x,0,this._componentAttachedTo.width()),y:f.Math.clamp(b.y,0,this._componentAttachedTo.height())}:b},b.prototype._startDrag=function(a,b){if(!(b instanceof MouseEvent&&0!==b.button)){var c=this._translateToComponentSpace(a);this._isInsideComponent(c)&&(b.preventDefault(),this._dragging=!0,this._dragOrigin=c,this._dragStartCallbacks.callCallbacks(this._dragOrigin))}},b.prototype._doDrag=function(a,b){this._dragging&&this._dragCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(a))},b.prototype._endDrag=function(a,b){b instanceof MouseEvent&&0!==b.button||this._dragging&&(this._dragging=!1,this._dragEndCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(a)))},b.prototype.constrainedToComponent=function(a){return null==a?this._constrainedToComponent:(this._constrainedToComponent=a,this)},b.prototype.onDragStart=function(a){return this._dragStartCallbacks.add(a),this},b.prototype.offDragStart=function(a){return this._dragStartCallbacks["delete"](a),this},b.prototype.onDrag=function(a){return this._dragCallbacks.add(a),this},b.prototype.offDrag=function(a){return this._dragCallbacks["delete"](a),this},b.prototype.onDragEnd=function(a){return this._dragEndCallbacks.add(a),this},b.prototype.offDragEnd=function(a){return this._dragEndCallbacks["delete"](a),this},b}(g.Interaction);b.Drag=h},function(a,b,c){"use strict";function d(a,b,c){return c-(c-a)*b}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(1),g=c(11),h=c(3),i=c(0),j=c(12),k=c(14);b.zoomAt=d;var l=function(a){function b(b,c){var d=this;a.call(this),this._wheelCallback=function(a,b){return d._handleWheelEvent(a,b)},this._touchStartCallback=function(a,b,c){return d._handleTouchStart(a,b,c)},this._touchMoveCallback=function(a,b,c){return d._handlePinch(a,b,c)},this._touchEndCallback=function(a,b,c){return d._handleTouchEnd(a,b,c)},this._touchCancelCallback=function(a,b,c){return d._handleTouchEnd(a,b,c)},this._panEndCallbacks=new i.CallbackSet,this._zoomEndCallbacks=new i.CallbackSet,this._xScales=new i.Set,this._yScales=new i.Set,this._dragInteraction=new k.Drag,this._setupDragInteraction(),this._touchIds=f.map(),this._minDomainExtents=new i.Map,this._maxDomainExtents=new i.Map,this._minDomainValues=new i.Map,this._maxDomainValues=new i.Map,null!=b&&this.addXScale(b),null!=c&&this.addYScale(c)}return e(b,a),b.prototype.pan=function(a){var b=this;this.xScales().forEach(function(c){c.pan(b._constrainedTranslation(c,a.x))}),this.yScales().forEach(function(c){c.pan(b._constrainedTranslation(c,a.y))})},b.prototype.zoom=function(a,b){this.xScales().forEach(function(c){var d=c.range(),e=void 0===b?(d[1]-d[0])/2:b.x;c.zoom(a,e)}),this.yScales().forEach(function(c){var d=c.range(),e=void 0===b?(d[1]-d[0])/2:b.y;c.zoom(a,e)})},b.prototype._anchor=function(b){a.prototype._anchor.call(this,b),this._dragInteraction.attachTo(b),this._mouseDispatcher=g.Mouse.getDispatcher(this._componentAttachedTo.content().node()),this._mouseDispatcher.onWheel(this._wheelCallback),this._touchDispatcher=g.Touch.getDispatcher(this._componentAttachedTo.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchMove(this._touchMoveCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},b.prototype._unanchor=function(){a.prototype._unanchor.call(this),this._mouseDispatcher.offWheel(this._wheelCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchMove(this._touchMoveCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null,this._dragInteraction.detachFrom(this._componentAttachedTo)},b.prototype._handleTouchStart=function(a,b,c){for(var d=0;d<a.length&&this._touchIds.size()<2;d++){var e=a[d];this._touchIds.set(e.toString(),this._translateToComponentSpace(b[e]))}},b.prototype._handlePinch=function(a,c,d){var e=this;if(!(this._touchIds.size()<2)){var f=this._touchIds.values();if(this._isInsideComponent(this._translateToComponentSpace(f[0]))&&this._isInsideComponent(this._translateToComponentSpace(f[1]))){var g=b._pointDistance(f[0],f[1]);if(0!==g){a.forEach(function(a){e._touchIds.has(a.toString())&&e._touchIds.set(a.toString(),e._translateToComponentSpace(c[a]))});var h=this._touchIds.values(),i=b._pointDistance(h[0],h[1]);if(0!==i){var j=g/i,k=h.map(function(a,b){return{x:(a.x-f[b].x)/j,y:(a.y-f[b].y)/j}}),l=b.centerPoint(f[0],f[1]),m=l.x,n=l.y;this.xScales().forEach(function(a){var b=e._constrainedZoom(a,j,m);m=b.centerPoint,j=b.zoomAmount}),this.yScales().forEach(function(a){var b=e._constrainedZoom(a,j,n);n=b.centerPoint,j=b.zoomAmount});var o=f.map(function(a,b){return{x:k[b].x*j+a.x,y:k[b].y*j+a.y}}),p={x:m-(o[0].x+o[1].x)/2,y:n-(o[0].y+o[1].y)/2};this.zoom(j,{x:m,y:n}),this.pan(p)}}}}},b.centerPoint=function(a,b){var c=Math.min(a.x,b.x),d=Math.max(a.x,b.x),e=Math.min(a.y,b.y),f=Math.max(a.y,b.y);return{x:(c+d)/2,y:(f+e)/2}},b._pointDistance=function(a,b){var c=Math.min(a.x,b.x),d=Math.max(a.x,b.x),e=Math.min(a.y,b.y),f=Math.max(a.y,b.y);return Math.sqrt(Math.pow(d-c,2)+Math.pow(f-e,2))},b.prototype._handleTouchEnd=function(a,b,c){var d=this;a.forEach(function(a){d._touchIds.remove(a.toString())}),this._touchIds.size()>0&&this._zoomEndCallbacks.callCallbacks()},b.prototype._handleWheelEvent=function(a,c){var d=this,e=this._translateToComponentSpace(a);if(this._isInsideComponent(e)){c.preventDefault();var f=c.deltaY*(c.deltaMode?b._PIXELS_PER_LINE:1),g=Math.pow(2,.002*f),h=e.x,i=e.y;this.xScales().forEach(function(a){var b=d._constrainedZoom(a,g,h);h=b.centerPoint,g=b.zoomAmount}),this.yScales().forEach(function(a){var b=d._constrainedZoom(a,g,i);i=b.centerPoint,g=b.zoomAmount}),this.zoom(g,{x:h,y:i}),this._zoomEndCallbacks.callCallbacks()}},b.prototype._isRangeReversed=function(a){var b=a.range();return b[1]<b[0]},b.prototype._constrainedZoom=function(a,b,c){return b=this._constrainZoomExtents(a,b),this._constrainZoomValues(a,b,c)},b.prototype._constrainZoomExtents=function(a,b){var c=b>1,d=c?this.maxDomainExtent(a):this.minDomainExtent(a);if(null==d)return b;var e=a.getTransformationDomain(),f=e[0],g=e[1],h=Math.abs(g-f),i=c?Math.min:Math.max;return i(b,d/h)},b.prototype._constrainZoomValues=function(a,b,c){if(b<=1)return{centerPoint:c,zoomAmount:b};var e=this._isRangeReversed(a),f=this.minDomainValue(a),g=this.maxDomainValue(a);if(null==f&&null==g)return{centerPoint:c,zoomAmount:b};var h=a.getTransformationDomain(),i=h[0],j=h[1];if(null!=g){var k=a.scaleTransformation(g),l=a.scaleTransformation(j),m=d(l,b,c);
m>k!=e&&(c=this._getZoomCenterForTarget(l,b,k))}if(null!=f){var n=a.scaleTransformation(f),o=a.scaleTransformation(i),p=d(o,b,c);p<n!=e&&(c=this._getZoomCenterForTarget(o,b,n))}if(null!=g&&null!=g){var k=a.scaleTransformation(g),l=a.scaleTransformation(j),m=d(l,b,c),n=a.scaleTransformation(f),o=a.scaleTransformation(i),p=d(o,b,c);if(m>k!=e||p<n!=e){var q=l-o+n-k;0===q?(c=(l+o)/2,b=1):(c=(l*n-o*k)/q,b=(k-n)/(l-o))}}return{centerPoint:c,zoomAmount:b}},b.prototype._getZoomCenterForTarget=function(a,b,c){return(a*b-c)/(b-1)},b.prototype._setupDragInteraction=function(){var a=this;this._dragInteraction.constrainedToComponent(!1);var b;this._dragInteraction.onDragStart(function(){return b=null}),this._dragInteraction.onDrag(function(c,d){if(!(a._touchIds.size()>=2)){var e={x:(null==b?c.x:b.x)-d.x,y:(null==b?c.y:b.y)-d.y};a.pan(e),b=d}}),this._dragInteraction.onDragEnd(function(){return a._panEndCallbacks.callCallbacks()})},b.prototype._constrainedTranslation=function(a,b){var c=a.getTransformationDomain(),d=c[0],e=c[1],f=this._isRangeReversed(a);if(b>0!==f){var g=this.maxDomainValue(a);if(null!=g){var h=a.scaleTransformation(e),i=a.scaleTransformation(g);b=(f?Math.max:Math.min)(h+b,i)-h}}else{var g=this.minDomainValue(a);if(null!=g){var j=a.scaleTransformation(d),k=a.scaleTransformation(g);b=(f?Math.min:Math.max)(j+b,k)-j}}return b},b.prototype._nonLinearScaleWithExtents=function(a){return!(null==this.minDomainExtent(a)||null==this.maxDomainExtent(a)||a instanceof h.Linear||a instanceof h.Time)},b.prototype.xScales=function(a){var b=this;if(null==a){var c=[];return this._xScales.forEach(function(a){c.push(a)}),c}return this._xScales=new i.Set,a.forEach(function(a){b.addXScale(a)}),this},b.prototype.yScales=function(a){var b=this;if(null==a){var c=[];return this._yScales.forEach(function(a){c.push(a)}),c}return this._yScales=new i.Set,a.forEach(function(a){b.addYScale(a)}),this},b.prototype.addXScale=function(a){return this._xScales.add(a),this},b.prototype.removeXScale=function(a){return this._xScales["delete"](a),this._minDomainExtents["delete"](a),this._maxDomainExtents["delete"](a),this._minDomainValues["delete"](a),this._maxDomainValues["delete"](a),this},b.prototype.addYScale=function(a){return this._yScales.add(a),this},b.prototype.removeYScale=function(a){return this._yScales["delete"](a),this._minDomainExtents["delete"](a),this._maxDomainExtents["delete"](a),this._minDomainValues["delete"](a),this._maxDomainValues["delete"](a),this},b.prototype.minDomainExtent=function(a,b){if(null==b)return this._minDomainExtents.get(a);if(b.valueOf()<0)throw new Error("extent must be non-negative");var c=this.maxDomainExtent(a);if(null!=c&&c.valueOf()<b.valueOf())throw new Error("minDomainExtent must be smaller than maxDomainExtent for the same Scale");return this._nonLinearScaleWithExtents(a)&&i.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior."),this._minDomainExtents.set(a,b),this},b.prototype.maxDomainExtent=function(a,b){if(null==b)return this._maxDomainExtents.get(a);if(b.valueOf()<=0)throw new Error("extent must be positive");var c=this.minDomainExtent(a);if(null!=c&&b.valueOf()<c.valueOf())throw new Error("maxDomainExtent must be larger than minDomainExtent for the same Scale");return this._nonLinearScaleWithExtents(a)&&i.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior."),this._maxDomainExtents.set(a,b),this},b.prototype.minDomainValue=function(a,b){return null==b?this._minDomainValues.get(a):(this._minDomainValues.set(a,b),this)},b.prototype.maxDomainValue=function(a,b){return null==b?this._maxDomainValues.get(a):(this._maxDomainValues.set(a,b),this)},b.prototype.setMinMaxDomainValuesTo=function(a){this._minDomainValues["delete"](a),this._maxDomainValues["delete"](a);var b=a.getTransformationDomain(),c=b[0],d=b[1];return this.minDomainValue(a,c),this.maxDomainValue(a,d),this},b.prototype.onPanEnd=function(a){return this._panEndCallbacks.add(a),this},b.prototype.offPanEnd=function(a){return this._panEndCallbacks["delete"](a),this},b.prototype.onZoomEnd=function(a){return this._zoomEndCallbacks.add(a),this},b.prototype.offZoomEnd=function(a){return this._zoomEndCallbacks["delete"](a),this},b._PIXELS_PER_LINE=120,b}(j.Interaction);b.PanZoom=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(11),f=c(0),g=c(12),h=function(a){function b(){var b=this;a.apply(this,arguments),this._overComponent=!1,this._pointerEnterCallbacks=new f.CallbackSet,this._pointerMoveCallbacks=new f.CallbackSet,this._pointerExitCallbacks=new f.CallbackSet,this._mouseMoveCallback=function(a,c){return b._handleMouseEvent(a,c)},this._touchStartCallback=function(a,c,d){return b._handleTouchEvent(c[a[0]],d)}}return d(b,a),b.prototype._anchor=function(b){a.prototype._anchor.call(this,b),this._mouseDispatcher=e.Mouse.getDispatcher(this._componentAttachedTo.content().node()),this._mouseDispatcher.onMouseMove(this._mouseMoveCallback),this._touchDispatcher=e.Touch.getDispatcher(this._componentAttachedTo.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback)},b.prototype._unanchor=function(){a.prototype._unanchor.call(this),this._mouseDispatcher.offMouseMove(this._mouseMoveCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher=null},b.prototype._handleMouseEvent=function(a,b){var c=this._mouseDispatcher.eventInsideSVG(b);this._handlePointerEvent(a,c)},b.prototype._handleTouchEvent=function(a,b){var c=this._touchDispatcher.eventInsideSVG(b);this._handlePointerEvent(a,c)},b.prototype._handlePointerEvent=function(a,b){var c=this._translateToComponentSpace(a),d=this._isInsideComponent(c);d&&b?(this._overComponent||this._pointerEnterCallbacks.callCallbacks(c),this._pointerMoveCallbacks.callCallbacks(c)):this._overComponent&&this._pointerExitCallbacks.callCallbacks(c),this._overComponent=d&&b},b.prototype.onPointerEnter=function(a){return this._pointerEnterCallbacks.add(a),this},b.prototype.offPointerEnter=function(a){return this._pointerEnterCallbacks["delete"](a),this},b.prototype.onPointerMove=function(a){return this._pointerMoveCallbacks.add(a),this},b.prototype.offPointerMove=function(a){return this._pointerMoveCallbacks["delete"](a),this},b.prototype.onPointerExit=function(a){return this._pointerExitCallbacks.add(a),this},b.prototype.offPointerExit=function(a){return this._pointerExitCallbacks["delete"](a),this},b}(g.Interaction);b.Pointer=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(3),f=c(0),g=c(21),h=c(2),i=function(a){function b(b){void 0===b&&(b=g.Bar.ORIENTATION_VERTICAL),a.call(this,b),this._clusterOffsets=new f.Map}return d(b,a),b.prototype._generateAttrToProjector=function(){var b=this,c=a.prototype._generateAttrToProjector.call(this),d=this._makeInnerScale(),e=function(a,b){return d.rangeBand()};c.width=this._isVertical?e:c.width,c.height=this._isVertical?c.height:e;var f=c.x,g=c.y;return c.x=this._isVertical?function(a,c,d){return f(a,c,d)+b._clusterOffsets.get(d)}:function(a,b,c){return f(a,b,c)},c.y=this._isVertical?function(a,b,c){return g(a,b,c)}:function(a,c,d){return g(a,c,d)+b._clusterOffsets.get(d)},c},b.prototype._updateClusterPosition=function(){var a=this,b=this._makeInnerScale();this.datasets().forEach(function(c,d){return a._clusterOffsets.set(c,b.scale(String(d))-b.rangeBand()/2)})},b.prototype._makeInnerScale=function(){var a=new e.Category;a.domain(this.datasets().map(function(a,b){return String(b)}));var b=h.Plot._scaledAccessor(this.attr("width"));return a.range([0,b(null,0,null)]),a},b.prototype._getDataToDraw=function(){return this._updateClusterPosition(),a.prototype._getDataToDraw.call(this)},b}(g.Bar);b.ClusteredBar=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(6),h=c(9),i=c(8),j=c(3),k=c(0),l=c(2),m=function(a){function b(){var b=this;a.call(this),this._startAngle=0,this._endAngle=2*Math.PI,this._labelFormatter=i.identity(),this._labelsEnabled=!1,this.innerRadius(0),this.outerRadius(function(){var a=b._pieCenter();return Math.min(Math.max(b.width()-a.x,a.x),Math.max(b.height()-a.y,a.y))}),this.addClass("pie-plot"),this.attr("fill",function(a,b){return String(b)},new j.Color),this._strokeDrawers=new k.Map}return d(b,a),b.prototype._setup=function(){var b=this;a.prototype._setup.call(this),this._strokeDrawers.forEach(function(a){return a.renderArea(b._renderArea.append("g"))})},b.prototype.computeLayout=function(b,c,d){a.prototype.computeLayout.call(this,b,c,d);var e=this._pieCenter();this._renderArea.attr("transform","translate("+e.x+","+e.y+")");var f=Math.min(Math.max(this.width()-e.x,e.x),Math.max(this.height()-e.y,e.y));return null!=this.innerRadius().scale&&this.innerRadius().scale.range([0,f]),null!=this.outerRadius().scale&&this.outerRadius().scale.range([0,f]),this},b.prototype.addDataset=function(b){return a.prototype.addDataset.call(this,b),this},b.prototype._addDataset=function(b){if(1===this.datasets().length)return k.Window.warn("Only one dataset is supported in Pie plots"),this;this._updatePieAngles();var c=new h.ArcOutline(b);return this._isSetup&&c.renderArea(this._renderArea.append("g")),this._strokeDrawers.set(b,c),a.prototype._addDataset.call(this,b),this},b.prototype.removeDataset=function(b){return a.prototype.removeDataset.call(this,b),this},b.prototype._removeDatasetNodes=function(b){a.prototype._removeDatasetNodes.call(this,b),this._strokeDrawers.get(b).remove()},b.prototype._removeDataset=function(b){return a.prototype._removeDataset.call(this,b),this._startAngles=[],this._endAngles=[],this},b.prototype.selections=function(b){var c=this;void 0===b&&(b=this.datasets());var d=a.prototype.selections.call(this,b)[0];return b.forEach(function(a){var b=c._strokeDrawers.get(a);null!=b&&b.renderArea().selectAll(b.selector()).each(function(){d.push(this)})}),e.selectAll(d)},b.prototype._onDatasetUpdate=function(){a.prototype._onDatasetUpdate.call(this),this._updatePieAngles(),this.render()},b.prototype._createDrawer=function(a){return new h.Arc(a)},b.prototype.entities=function(b){var c=this;void 0===b&&(b=this.datasets());var d=a.prototype.entities.call(this,b);return d.forEach(function(a){a.position.x+=c.width()/2,a.position.y+=c.height()/2;var b=c._strokeDrawers.get(a.dataset).selectionForIndex(a.index);a.selection[0].push(b[0][0])}),d},b.prototype.sectorValue=function(a,c){return null==a?this._propertyBindings.get(b._SECTOR_VALUE_KEY):(this._bindProperty(b._SECTOR_VALUE_KEY,a,c),this._updatePieAngles(),this.render(),this)},b.prototype.innerRadius=function(a,c){return null==a?this._propertyBindings.get(b._INNER_RADIUS_KEY):(this._bindProperty(b._INNER_RADIUS_KEY,a,c),this.render(),this)},b.prototype.outerRadius=function(a,c){return null==a?this._propertyBindings.get(b._OUTER_RADIUS_KEY):(this._bindProperty(b._OUTER_RADIUS_KEY,a,c),this.render(),this)},b.prototype.startAngle=function(a){return null==a?this._startAngle:(this._startAngle=a,this._updatePieAngles(),this.render(),this)},b.prototype.endAngle=function(a){return null==a?this._endAngle:(this._endAngle=a,this._updatePieAngles(),this.render(),this)},b.prototype.labelsEnabled=function(a){return null==a?this._labelsEnabled:(this._labelsEnabled=a,this.render(),this)},b.prototype.labelFormatter=function(a){return null==a?this._labelFormatter:(this._labelFormatter=a,this.render(),this)},b.prototype.entitiesAt=function(a){var b={x:this.width()/2,y:this.height()/2},c={x:a.x-b.x,y:a.y-b.y},d=this._sliceIndexForPoint(c);return null==d?[]:[this.entities()[d]]},b.prototype._propertyProjectors=function(){var b=this,c=a.prototype._propertyProjectors.call(this),d=l.Plot._scaledAccessor(this.innerRadius()),f=l.Plot._scaledAccessor(this.outerRadius());return c.d=function(a,c,g){return e.svg.arc().innerRadius(d(a,c,g)).outerRadius(f(a,c,g)).startAngle(b._startAngles[c]).endAngle(b._endAngles[c])(a,c)},c},b.prototype._updatePieAngles=function(){if(null!=this.sectorValue()&&0!==this.datasets().length){var a=l.Plot._scaledAccessor(this.sectorValue()),b=this.datasets()[0],c=this._getDataToDraw().get(b),d=e.layout.pie().sort(null).startAngle(this._startAngle).endAngle(this._endAngle).value(function(c,d){return a(c,d,b)})(c);this._startAngles=d.map(function(a){return a.startAngle}),this._endAngles=d.map(function(a){return a.endAngle})}},b.prototype._pieCenter=function(){var a,b,c,d,e=this._startAngle<this._endAngle?this._startAngle:this._endAngle,f=this._startAngle<this._endAngle?this._endAngle:this._startAngle,g=Math.sin(e),h=Math.cos(e),i=Math.sin(f),j=Math.cos(f);return g>=0&&i>=0?h>=0&&j>=0?(a=h,b=0,d=0,c=i):h<0&&j<0?(a=0,b=-j,d=0,c=g):h>=0&&j<0?(a=h,b=-j,d=0,c=g):h<0&&j>=0&&(a=1,b=1,d=1,c=Math.max(g,i)):g>=0&&i<0?h>=0&&j>=0?(a=Math.max(h,j),b=1,d=1,c=1):h<0&&j<0?(a=0,b=1,d=-i,c=g):h>=0&&j<0?(a=h,b=1,d=-i,c=1):h<0&&j>=0&&(a=j,b=1,d=1,c=g):g<0&&i>=0?h>=0&&j>=0?(a=1,b=0,d=-g,c=i):h<0&&j<0?(a=1,b=Math.max(-h,-j),d=1,c=1):h>=0&&j<0?(a=1,b=-j,d=-g,c=1):h<0&&j>=0&&(a=1,b=-h,d=1,c=i):g<0&&i<0&&(h>=0&&j>=0?(a=j,b=0,d=-g,c=0):h<0&&j<0?(a=0,b=-h,d=-i,c=0):h>=0&&j<0?(a=1,b=1,d=Math.max(h,-j),c=1):h<0&&j>=0&&(a=j,b=-h,d=1,c=0)),{x:d+c==0?0:d/(d+c)*this.width(),y:a+b==0?0:a/(a+b)*this.height()}},b.prototype._getDataToDraw=function(){var c=a.prototype._getDataToDraw.call(this);if(0===this.datasets().length)return c;var d=l.Plot._scaledAccessor(this.sectorValue()),e=this.datasets()[0],f=c.get(e),g=f.filter(function(a,c){return b._isValidData(d(a,c,e))});return c.set(e,g),c},b._isValidData=function(a){return k.Math.isValidNumber(a)&&a>=0},b.prototype._pixelPoint=function(a,c,d){var f=l.Plot._scaledAccessor(this.sectorValue());if(!b._isValidData(f(a,c,d)))return{x:NaN,y:NaN};var g=l.Plot._scaledAccessor(this.innerRadius())(a,c,d),h=l.Plot._scaledAccessor(this.outerRadius())(a,c,d),i=(g+h)/2,j=e.layout.pie().sort(null).value(function(a,c){var e=f(a,c,d);return b._isValidData(e)?e:0}).startAngle(this._startAngle).endAngle(this._endAngle)(d.data()),k=j[c].startAngle,m=j[c].endAngle,n=(k+m)/2;return{x:i*Math.sin(n),y:-i*Math.cos(n)}},b.prototype._additionalPaint=function(a){var b=this;this._renderArea.select(".label-area").remove(),this._labelsEnabled&&k.Window.setTimeout(function(){return b._drawLabels()},a);var c=this._generateStrokeDrawSteps(),d=this._getDataToDraw();this.datasets().forEach(function(a){return b._strokeDrawers.get(a).draw(d.get(a),c)})},b.prototype._generateStrokeDrawSteps=function(){var a=this._generateAttrToProjector();return[{attrToProjector:a,animator:new g.Null}]},b.prototype._sliceIndexForPoint=function(a){var b=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2)),c=Math.acos(-a.y/b);a.x<0&&(c=2*Math.PI-c);for(var d,e=0;e<this._startAngles.length;e++)if(this._startAngles[e]<c&&this._endAngles[e]>c){d=e;break}if(void 0!==d){var f=this.datasets()[0],g=f.data()[d],h=this.innerRadius().accessor(g,d,f),i=this.outerRadius().accessor(g,d,f);if(b>h&&b<i)return d}return null},b.prototype._drawLabels=function(){var a=this,b=this._generateAttrToProjector(),c=this._renderArea.append("g").classed("label-area",!0),d=new f.CacheMeasurer(c),e=new f.Writer(d),g=this.datasets()[0],h=this._getDataToDraw().get(g);h.forEach(function(f,h){var i=a.sectorValue().accessor(f,h,g);if(k.Math.isValidNumber(i)){i=a._labelFormatter(i);var j=d.measure(i),l=(a._endAngles[h]+a._startAngles[h])/2,m=a.outerRadius().accessor(f,h,g);a.outerRadius().scale&&(m=a.outerRadius().scale.scale(m));var n=a.innerRadius().accessor(f,h,g);a.innerRadius().scale&&(n=a.innerRadius().scale.scale(n));var o=(m+n)/2,p=Math.sin(l)*o-j.width/2,q=-Math.cos(l)*o-j.height/2,r=[{x:p,y:q},{x:p,y:q+j.height},{x:p+j.width,y:q},{x:p+j.width,y:q+j.height}],s=r.every(function(b){return Math.abs(b.x)<=a.width()/2&&Math.abs(b.y)<=a.height()/2});if(s){var t=r.map(function(b){return a._sliceIndexForPoint(b)});s=t.every(function(a){return a===h})}var u=b.fill(f,h,g),v=1.6*k.Color.contrast("white",u)<k.Color.contrast("black",u),w=c.append("g").attr("transform","translate("+p+","+q+")"),x=v?"dark-label":"light-label";w.classed(x,!0),w.style("visibility",s?"inherit":"hidden"),e.write(i,j.width,j.height,{selection:w,xAlign:"center",yAlign:"center",textRotation:0})}})},b._INNER_RADIUS_KEY="inner-radius",b._OUTER_RADIUS_KEY="outer-radius",b._SECTOR_VALUE_KEY="sector-value",b}(l.Plot);b.Pie=m},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(4),g=c(6),h=c(9),i=c(3),j=c(0),k=c(2),l=c(15),m=function(a){function b(){a.call(this),this._labelsEnabled=!1,this._label=null,this.animator("rectangles",new g.Null),this.addClass("rectangle-plot"),this.attr("fill",(new i.Color).range()[0])}return d(b,a),b.prototype._createDrawer=function(a){return new h.Rectangle(a)},b.prototype._generateAttrToProjector=function(){var c=this,d=a.prototype._generateAttrToProjector.call(this),e=k.Plot._scaledAccessor(this.x()),f=d[b._X2_KEY],g=k.Plot._scaledAccessor(this.y()),h=d[b._Y2_KEY],i=this.x().scale,j=this.y().scale;return null!=f?(d.width=function(a,b,c){return Math.abs(f(a,b,c)-e(a,b,c))},d.x=function(a,b,c){return Math.min(f(a,b,c),e(a,b,c))}):(d.width=function(a,b,d){return c._rectangleWidth(i)},d.x=function(a,b,c){return e(a,b,c)-.5*d.width(a,b,c)}),null!=h?(d.height=function(a,b,c){return Math.abs(h(a,b,c)-g(a,b,c))},d.y=function(a,b,c){return Math.max(h(a,b,c),g(a,b,c))-d.height(a,b,c)}):(d.height=function(a,b,d){return c._rectangleWidth(j)},d.y=function(a,b,c){return g(a,b,c)-.5*d.height(a,b,c)}),delete d[b._X2_KEY],delete d[b._Y2_KEY],d},b.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator("rectangles")}]},b.prototype._updateExtentsForProperty=function(b){a.prototype._updateExtentsForProperty.call(this,b),"x"===b?a.prototype._updateExtentsForProperty.call(this,"x2"):"y"===b&&a.prototype._updateExtentsForProperty.call(this,"y2")},b.prototype._filterForProperty=function(b){return"x2"===b?a.prototype._filterForProperty.call(this,"x"):"y2"===b?a.prototype._filterForProperty.call(this,"y"):a.prototype._filterForProperty.call(this,b)},b.prototype.x=function(c,d){if(null==c)return a.prototype.x.call(this);if(null==d?a.prototype.x.call(this,c):a.prototype.x.call(this,c,d),null!=d){var e=this.x2(),f=e&&e.accessor;null!=f&&this._bindProperty(b._X2_KEY,f,d)}return d instanceof i.Category&&d.innerPadding(0).outerPadding(0),this},b.prototype.x2=function(a){if(null==a)return this._propertyBindings.get(b._X2_KEY);var c=this.x(),d=c&&c.scale;return this._bindProperty(b._X2_KEY,a,d),this.render(),this},b.prototype.y=function(c,d){if(null==c)return a.prototype.y.call(this);if(null==d?a.prototype.y.call(this,c):a.prototype.y.call(this,c,d),null!=d){var e=this.y2(),f=e&&e.accessor;null!=f&&this._bindProperty(b._Y2_KEY,f,d)}return d instanceof i.Category&&d.innerPadding(0).outerPadding(0),this},b.prototype.y2=function(a){if(null==a)return this._propertyBindings.get(b._Y2_KEY);var c=this.y(),d=c&&c.scale;return this._bindProperty(b._Y2_KEY,a,d),this.render(),this},b.prototype.entitiesAt=function(a){var b=this._generateAttrToProjector();return this.entities().filter(function(c){var d=c.datum,e=c.index,f=c.dataset,g=b.x(d,e,f),h=b.y(d,e,f),i=b.width(d,e,f),j=b.height(d,e,f);return g<=a.x&&a.x<=g+i&&h<=a.y&&a.y<=h+j})},b.prototype.entitiesIn=function(a,b){var c,d;if(null==b){var e=a;c={min:e.topLeft.x,max:e.bottomRight.x},d={min:e.topLeft.y,max:e.bottomRight.y}}else c=a,d=b;return this._entitiesIntersecting(c,d)},b.prototype._entityBBox=function(a,b,c,d){return{x:d.x(a,b,c),y:d.y(a,b,c),width:d.width(a,b,c),height:d.height(a,b,c)}},b.prototype._entitiesIntersecting=function(a,b){var c=this,d=[],e=this._generateAttrToProjector();return this.entities().forEach(function(f){j.DOM.intersectsBBox(a,b,c._entityBBox(f.datum,f.index,f.dataset,e))&&d.push(f)}),d},b.prototype.label=function(a){return null==a?this._label:(this._label=a,this.render(),this)},b.prototype.labelsEnabled=function(a){return null==a?this._labelsEnabled:(this._labelsEnabled=a,this.render(),this)},b.prototype._propertyProjectors=function(){var b=a.prototype._propertyProjectors.call(this);return null!=this.x2()&&(b.x2=k.Plot._scaledAccessor(this.x2())),null!=this.y2()&&(b.y2=k.Plot._scaledAccessor(this.y2())),b},b.prototype._pixelPoint=function(a,b,c){var d=this._generateAttrToProjector(),e=d.x(a,b,c),f=d.y(a,b,c),g=d.width(a,b,c),h=d.height(a,b,c),i=e+g/2,j=f+h/2;return{x:i,y:j}},b.prototype._rectangleWidth=function(a){if(a instanceof i.Category)return a.rangeBand();var b=a===this.x().scale?this.x().accessor:this.y().accessor,c=e.set(j.Array.flatten(this.datasets().map(function(a){return a.data().map(function(c,d){return b(c,d,a).valueOf()})}))).values().map(function(a){return+a}),d=j.Math.min(c,0),f=j.Math.max(c,0),g=a.scale(d),h=a.scale(f);return(h-g)/Math.abs(f-d)},b.prototype._getDataToDraw=function(){var a=new j.Map,b=this._generateAttrToProjector();return this.datasets().forEach(function(c){var d=c.data().filter(function(a,d){return j.Math.isValidNumber(b.x(a,d,c))&&j.Math.isValidNumber(b.y(a,d,c))&&j.Math.isValidNumber(b.width(a,d,c))&&j.Math.isValidNumber(b.height(a,d,c))});a.set(c,d)}),a},b.prototype._additionalPaint=function(a){var b=this;this._renderArea.selectAll(".label-area").remove(),this._labelsEnabled&&null!=this.label()&&j.Window.setTimeout(function(){return b._drawLabels()},a)},b.prototype._drawLabels=function(){var a=this,b=this._getDataToDraw();this.datasets().forEach(function(c,d){return a._drawLabel(b,c,d)})},b.prototype._drawLabel=function(a,b,c){var d=this,e=this._generateAttrToProjector(),g=this._renderArea.append("g").classed("label-area",!0),h=new f.CacheMeasurer(g),i=new f.Writer(h),k=this.x().scale.range(),l=this.y().scale.range(),m=Math.min.apply(null,k),n=Math.max.apply(null,k),o=Math.min.apply(null,l),p=Math.max.apply(null,l),q=a.get(b);q.forEach(function(f,k){var l=""+d.label()(f,k,b),q=h.measure(l),r=e.x(f,k,b),s=e.y(f,k,b),t=e.width(f,k,b),u=e.height(f,k,b);if(q.height<=u&&q.width<=t){var v=(t-q.width)/2,w=(u-q.height)/2;r+=v,s+=w;var x={min:r,max:r+q.width},y={min:s,max:s+q.height};if(x.min<m||x.max>n||y.min<o||y.max>p)return;if(d._overlayLabel(x,y,k,c,a))return;var z=e.fill(f,k,b),A=1.6*j.Color.contrast("white",z)<j.Color.contrast("black",z),B=g.append("g").attr("transform","translate("+r+","+s+")"),C=A?"dark-label":"light-label";B.classed(C,!0),i.write(l,q.width,q.height,{selection:B,xAlign:"center",yAlign:"center",textRotation:0})}})},b.prototype._overlayLabel=function(a,b,c,d,e){for(var f=this._generateAttrToProjector(),g=this.datasets(),h=d;h<g.length;h++)for(var i=g[h],k=e.get(i),l=h===d?c+1:0;l<k.length;l++)if(j.DOM.intersectsBBox(a,b,this._entityBBox(k[l],l,i,f)))return!0;return!1},b._X2_KEY="x2",b._Y2_KEY="y2",b}(l.XYPlot);b.Rectangle=m},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(6),f=c(25),g=c(9),h=c(3),i=c(0),j=c(16),k=c(2),l=c(15),m=function(a){function b(){a.call(this),this.addClass("scatter-plot");var b=new e.Easing;b.startDelay(5),b.stepDuration(250),b.maxTotalDuration(k.Plot._ANIMATION_MAX_DURATION),this.animator(j.Animator.MAIN,b),this.attr("opacity",.6),this.attr("fill",(new h.Color).range()[0]),this.size(6);var c=f.circle();this.symbol(function(){return c})}return d(b,a),b.prototype._buildLightweightPlotEntities=function(b){var c=this,d=a.prototype._buildLightweightPlotEntities.call(this,b);return d.map(function(a){var b=k.Plot._scaledAccessor(c.size())(a.datum,a.index,a.dataset);return a.diameter=c._invertedPixelSize({x:b,y:b}),a})},b.prototype._createDrawer=function(a){return new g.Symbol(a)},b.prototype.size=function(a,c){return null==a?this._propertyBindings.get(b._SIZE_KEY):(this._bindProperty(b._SIZE_KEY,a,c),this.render(),this)},b.prototype.symbol=function(a){return null==a?this._propertyBindings.get(b._SYMBOL_KEY):(this._propertyBindings.set(b._SYMBOL_KEY,{accessor:a}),this.render(),this)},b.prototype._generateDrawSteps=function(){var a=[];if(this._animateOnNextRender()){var b=this._generateAttrToProjector(),c=k.Plot._scaledAccessor(this.symbol());b.d=function(a,b,d){return c(a,b,d)(0)},a.push({attrToProjector:b,animator:this._getAnimator(j.Animator.RESET)})}return a.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(j.Animator.MAIN)}),a},b.prototype._entityVisibleOnPlot=function(a,b){var c={min:b.topLeft.x,max:b.bottomRight.x},d={min:b.topLeft.y,max:b.bottomRight.y},e={x:a.position.x-a.diameter.x,y:a.position.y-a.diameter.y,width:a.diameter.x,height:a.diameter.y};return i.DOM.intersectsBBox(c,d,e)},b.prototype._propertyProjectors=function(){var b=a.prototype._propertyProjectors.call(this),c=k.Plot._scaledAccessor(this.x()),d=k.Plot._scaledAccessor(this.y()),e=k.Plot._scaledAccessor(this.size());b.transform=function(a,b,e){return"translate("+c(a,b,e)+","+d(a,b,e)+")"};var f=k.Plot._scaledAccessor(this.symbol());return b.d=function(a,b,c){return f(a,b,c)(e(a,b,c))},b},b.prototype.entitiesIn=function(a,b){var c,d;if(null==b){var e=a;c={min:e.topLeft.x,max:e.bottomRight.x},d={min:e.topLeft.y,max:e.bottomRight.y}}else c=a,d=b;var f=k.Plot._scaledAccessor(this.x()),g=k.Plot._scaledAccessor(this.y());return this.entities().filter(function(a){var b=a.datum,e=a.index,h=a.dataset,i=f(b,e,h),j=g(b,e,h);return c.min<=i&&i<=c.max&&d.min<=j&&j<=d.max})},b.prototype.entitiesAt=function(a){var b=k.Plot._scaledAccessor(this.x()),c=k.Plot._scaledAccessor(this.y()),d=k.Plot._scaledAccessor(this.size());return this.entities().filter(function(e){var f=e.datum,g=e.index,h=e.dataset,i=b(f,g,h),j=c(f,g,h),k=d(f,g,h);return i-k/2<=a.x&&a.x<=i+k/2&&j-k/2<=a.y&&a.y<=j+k/2})},b.prototype._invertedPixelSize=function(a){var b=this._invertPixelPoint(this.origin()),c=this._invertPixelPoint({x:a.x,y:a.y});return{x:Math.abs(c.x-b.x),y:Math.abs(c.y-b.y)}},b._SIZE_KEY="size",b._SYMBOL_KEY="symbol",b}(l.XYPlot);b.Scatter=m},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(6),f=c(9),g=c(3),h=c(2),i=c(15),j=function(a){function b(){a.call(this),this.addClass("segment-plot"),this.attr("stroke",(new g.Color).range()[0]),this.attr("stroke-width","2px")}return d(b,a),b.prototype._createDrawer=function(a){return new f.Segment(a)},b.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new e.Null}]},b.prototype._updateExtentsForProperty=function(b){a.prototype._updateExtentsForProperty.call(this,b),"x"===b?a.prototype._updateExtentsForProperty.call(this,"x2"):"y"===b&&a.prototype._updateExtentsForProperty.call(this,"y2")},b.prototype._filterForProperty=function(b){return"x2"===b?a.prototype._filterForProperty.call(this,"x"):"y2"===b?a.prototype._filterForProperty.call(this,"y"):a.prototype._filterForProperty.call(this,b)},b.prototype.x=function(c,d){if(null==c)return a.prototype.x.call(this);if(null==d)a.prototype.x.call(this,c);else{a.prototype.x.call(this,c,d);var e=this.x2(),f=e&&e.accessor;null!=f&&this._bindProperty(b._X2_KEY,f,d)}return this},b.prototype.x2=function(a){if(null==a)return this._propertyBindings.get(b._X2_KEY);var c=this.x(),d=c&&c.scale;return this._bindProperty(b._X2_KEY,a,d),this.render(),this},b.prototype.y=function(c,d){if(null==c)return a.prototype.y.call(this);if(null==d)a.prototype.y.call(this,c);else{a.prototype.y.call(this,c,d);var e=this.y2(),f=e&&e.accessor;null!=f&&this._bindProperty(b._Y2_KEY,f,d)}return this},b.prototype.y2=function(a){if(null==a)return this._propertyBindings.get(b._Y2_KEY);var c=this.y(),d=c&&c.scale;return this._bindProperty(b._Y2_KEY,a,d),this.render(),this},b.prototype._propertyProjectors=function(){var b=a.prototype._propertyProjectors.call(this);return b.x1=h.Plot._scaledAccessor(this.x()),b.x2=null==this.x2()?h.Plot._scaledAccessor(this.x()):h.Plot._scaledAccessor(this.x2()),b.y1=h.Plot._scaledAccessor(this.y()),b.y2=null==this.y2()?h.Plot._scaledAccessor(this.y()):h.Plot._scaledAccessor(this.y2()),b},b.prototype.entitiesAt=function(a){var b=this.entityNearest(a);return null!=b?[b]:[]},b.prototype.entitiesIn=function(a,b){var c,d;if(null==b){var e=a;c={min:e.topLeft.x,max:e.bottomRight.x},d={min:e.topLeft.y,max:e.bottomRight.y}}else c=a,d=b;return this._entitiesIntersecting(c,d)},b.prototype._entitiesIntersecting=function(a,b){var c=this,d=[],e=this._generateAttrToProjector();return this.entities().forEach(function(f){c._lineIntersectsBox(f,a,b,e)&&d.push(f)}),d},b.prototype._lineIntersectsBox=function(a,b,c,d){var e=this,f=d.x1(a.datum,a.index,a.dataset),g=d.x2(a.datum,a.index,a.dataset),h=d.y1(a.datum,a.index,a.dataset),i=d.y2(a.datum,a.index,a.dataset);if(b.min<=f&&f<=b.max&&c.min<=h&&h<=c.max||b.min<=g&&g<=b.max&&c.min<=i&&i<=c.max)return!0;var j={x:f,y:h},k={x:g,y:i},l=[{x:b.min,y:c.min},{x:b.min,y:c.max},{x:b.max,y:c.max},{x:b.max,y:c.min}],m=l.filter(function(a,b){return 0!==b&&(e._lineIntersectsSegment(j,k,a,l[b-1])&&e._lineIntersectsSegment(a,l[b-1],j,k))});return m.length>0},b.prototype._lineIntersectsSegment=function(a,b,c,d){var e=function(a,b,c){return(b.x-a.x)*(c.y-b.y)-(b.y-a.y)*(c.x-b.x)};return e(a,b,c)*e(a,b,d)<0},b._X2_KEY="x2",b._Y2_KEY="y2",b}(i.XYPlot);b.Segment=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(6),g=c(0),h=c(35),i=c(2),j=function(a){function b(){var b=this;a.call(this),this._baselineValue=0,this._stackingOrder="bottomup",this.addClass("stacked-area-plot"),this.attr("fill-opacity",1),this._stackingResult=new g.Map,this._stackedExtent=[],this._baselineValueProvider=function(){return[b._baselineValue]},this.croppedRenderingEnabled(!1)}return d(b,a),b.prototype.croppedRenderingEnabled=function(b){return null==b?a.prototype.croppedRenderingEnabled.call(this):b===!0?(g.Window.warn("Warning: Stacked Area Plot does not support cropped rendering."),this):a.prototype.croppedRenderingEnabled.call(this,b)},b.prototype._getAnimator=function(a){return new f.Null},b.prototype._setup=function(){a.prototype._setup.call(this),this._baseline=this._renderArea.append("line").classed("baseline",!0)},b.prototype.x=function(b,c){return null==b?a.prototype.x.call(this):(null==c?a.prototype.x.call(this,b):a.prototype.x.call(this,b,c),this._updateStackExtentsAndOffsets(),this)},b.prototype.y=function(b,c){return null==b?a.prototype.y.call(this):(null==c?a.prototype.y.call(this,b):a.prototype.y.call(this,b,c),this._updateStackExtentsAndOffsets(),this)},b.prototype.stackingOrder=function(a){return null==a?this._stackingOrder:(this._stackingOrder=a,this._onDatasetUpdate(),this)},b.prototype.downsamplingEnabled=function(b){return null==b?a.prototype.downsamplingEnabled.call(this):(g.Window.warn("Warning: Stacked Area Plot does not support downsampling"),this)},b.prototype._additionalPaint=function(){var a=this.y().scale.scale(this._baselineValue),b={x1:0,y1:a,x2:this.width(),y2:a};this._getAnimator("baseline").animate(this._baseline,b)},b.prototype._updateYScale=function(){var a=this.y(),b=a&&a.scale;null!=b&&(b.addPaddingExceptionsProvider(this._baselineValueProvider),
b.addIncludedValuesProvider(this._baselineValueProvider))},b.prototype._onDatasetUpdate=function(){return this._updateStackExtentsAndOffsets(),a.prototype._onDatasetUpdate.call(this),this},b.prototype._updateExtentsForProperty=function(b){a.prototype._updateExtentsForProperty.call(this,b),"x"!==b&&"y"!==b||!this._projectorsReady()||this._updateStackExtentsAndOffsets()},b.prototype._extentsForProperty=function(b){var c="y";return b===c?[this._stackedExtent]:a.prototype._extentsForProperty.call(this,b)},b.prototype._updateStackExtentsAndOffsets=function(){if(this._projectorsReady()){var a=this.datasets(),b=this.x().accessor,c=this.y().accessor,d=this._filterForProperty("y");this._checkSameDomain(a,b),this._stackingResult=g.Stacking.stack(a,b,c,this._stackingOrder),this._stackedExtent=g.Stacking.stackedExtent(this._stackingResult,b,d)}},b.prototype._checkSameDomain=function(a,c){var d=a.map(function(a){return e.set(a.data().map(function(b,d){return c(b,d,a).toString()})).values()}),f=b._domainKeys(a,c);d.some(function(a){return a.length!==f.length})&&g.Window.warn("the domains across the datasets are not the same. Plot may produce unintended behavior.")},b._domainKeys=function(a,b){var c=e.set();return a.forEach(function(a){a.data().forEach(function(d,e){c.add(b(d,e,a))})}),c.values()},b.prototype._propertyProjectors=function(){var b=this,c=a.prototype._propertyProjectors.call(this),d=this.y().accessor,e=this.x().accessor,f=function(a,b,c){return g.Stacking.normalizeKey(e(a,b,c))},h=function(a,c,e){return b.y().scale.scale(+d(a,c,e)+b._stackingResult.get(e).get(f(a,c,e)).offset)},j=function(a,c,d){return b.y().scale.scale(b._stackingResult.get(d).get(f(a,c,d)).offset)};return c.d=this._constructAreaProjector(i.Plot._scaledAccessor(this.x()),h,j),c},b.prototype._pixelPoint=function(b,c,d){var e=a.prototype._pixelPoint.call(this,b,c,d),f=this.x().accessor(b,c,d),h=this.y().accessor(b,c,d),i=this.y().scale.scale(+h+this._stackingResult.get(d).get(g.Stacking.normalizeKey(f)).offset);return{x:e.x,y:i}},b}(h.Area);b.StackedArea=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(4),f=c(0),g=c(21),h=function(a){function b(b){void 0===b&&(b=g.Bar.ORIENTATION_VERTICAL),a.call(this,b),this.addClass("stacked-bar-plot"),this._stackingOrder="bottomup",this._stackingResult=new f.Map,this._stackedExtent=[]}return d(b,a),b.prototype.x=function(b,c){return null==b?a.prototype.x.call(this):(null==c?a.prototype.x.call(this,b):a.prototype.x.call(this,b,c),this._updateStackExtentsAndOffsets(),this)},b.prototype.y=function(b,c){return null==b?a.prototype.y.call(this):(null==c?a.prototype.y.call(this,b):a.prototype.y.call(this,b,c),this._updateStackExtentsAndOffsets(),this)},b.prototype.stackingOrder=function(a){return null==a?this._stackingOrder:(this._stackingOrder=a,this._onDatasetUpdate(),this)},b.prototype._setup=function(){a.prototype._setup.call(this),this._labelArea=this._renderArea.append("g").classed(g.Bar._LABEL_AREA_CLASS,!0),this._measurer=new e.CacheMeasurer(this._labelArea),this._writer=new e.Writer(this._measurer)},b.prototype._drawLabels=function(){var c=this;a.prototype._drawLabels.call(this),this._labelArea.selectAll("g").remove();var d=+this.baselineValue(),e=this._isVertical?this.x().scale:this.y().scale,g=this._isVertical?this.y().scale:this.x().scale,h=f.Stacking.stackedExtents(this._stackingResult),i=h.maximumExtents,j=h.minimumExtents,k=this._getBarPixelWidth(),l=[],m=function(a,d,e){var f=e.x,g=e.y,h=d.height,i=d.width,j=c._isVertical?i>k-2*b._LABEL_PADDING:h>k-2*b._LABEL_PADDING,l=f<0||g<0||f+i>c.width()||g+h>c.height()||j;if(!l){var m=c._labelArea.append("g").attr("transform","translate("+f+", "+g+")");m.classed("stacked-bar-label",!0);var n={selection:m,xAlign:"center",yAlign:"center",textRotation:0};c._writer.write(a,d.width,d.height,n)}return j};i.forEach(function(a){if(a.extent!==d){var f=c.labelFormatter()(a.extent),h=c._measurer.measure(f),i=c._isVertical?h.width:h.height,j=c._isVertical?h.height:h.width,k=c._isVertical?e.scale(a.axisValue)-i/2:g.scale(a.extent)+b._STACKED_BAR_LABEL_PADDING,n=c._isVertical?g.scale(a.extent)-j-b._STACKED_BAR_LABEL_PADDING:e.scale(a.axisValue)-i/2;l.push(m(f,h,{x:k,y:n}))}}),j.forEach(function(a){if(a.extent!==d){var f=c.labelFormatter()(a.extent),h=c._measurer.measure(f),i=c._isVertical?h.width:h.height,j=c._isVertical?h.height:h.width,k=c._isVertical?e.scale(a.axisValue)-i/2:g.scale(a.extent)-j-b._STACKED_BAR_LABEL_PADDING,n=c._isVertical?g.scale(a.extent)+b._STACKED_BAR_LABEL_PADDING:e.scale(a.axisValue)-i/2;l.push(m(f,h,{x:k,y:n}))}}),l.some(function(a){return a})&&this._labelArea.selectAll("g").remove()},b.prototype._generateAttrToProjector=function(){var b=this,c=a.prototype._generateAttrToProjector.call(this),d=this._isVertical?"y":"x",e=this._isVertical?"x":"y",g=this._isVertical?this.y().scale:this.x().scale,h=this._propertyBindings.get(d).accessor,i=this._propertyBindings.get(e).accessor,j=function(a,b,c){return f.Stacking.normalizeKey(i(a,b,c))},k=function(a,c,d){return g.scale(b._stackingResult.get(d).get(j(a,c,d)).offset)},l=function(a,c,d){return g.scale(+h(a,c,d)+b._stackingResult.get(d).get(j(a,c,d)).offset)},m=function(a,b,c){return Math.abs(l(a,b,c)-k(a,b,c))};c[this._isVertical?"height":"width"]=m;var n=function(a,b,c){return+h(a,b,c)<0?k(a,b,c):l(a,b,c)};return c[d]=function(a,c,d){return b._isVertical?n(a,c,d):n(a,c,d)-m(a,c,d)},c},b.prototype._onDatasetUpdate=function(){return this._updateStackExtentsAndOffsets(),a.prototype._onDatasetUpdate.call(this),this},b.prototype._updateExtentsForProperty=function(b){a.prototype._updateExtentsForProperty.call(this,b),"x"!==b&&"y"!==b||!this._projectorsReady()||this._updateStackExtentsAndOffsets()},b.prototype._extentsForProperty=function(b){var c=this._isVertical?"y":"x";return b===c?[this._stackedExtent]:a.prototype._extentsForProperty.call(this,b)},b.prototype._updateStackExtentsAndOffsets=function(){if(this._projectorsReady()){var a=this.datasets(),b=this._isVertical?this.x().accessor:this.y().accessor,c=this._isVertical?this.y().accessor:this.x().accessor,d=this._filterForProperty(this._isVertical?"y":"x");this._stackingResult=f.Stacking.stack(a,b,c,this._stackingOrder),this._stackedExtent=f.Stacking.stackedExtent(this._stackingResult,b,d)}},b._STACKED_BAR_LABEL_PADDING=5,b}(g.Bar);b.StackedBar=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(0),f=c(21),g=c(2),h=function(a){function b(){a.call(this),this._connectorsEnabled=!1,this.addClass("waterfall-plot")}return d(b,a),b.prototype.connectorsEnabled=function(a){return null==a?this._connectorsEnabled:(this._connectorsEnabled=a,this)},b.prototype.total=function(a){return null==a?this._propertyBindings.get(b._TOTAL_KEY):(this._bindProperty(b._TOTAL_KEY,a,null),this)},b.prototype._additionalPaint=function(a){var b=this;this._connectorArea.selectAll("line").remove(),this._connectorsEnabled&&e.Window.setTimeout(function(){return b._drawConnectors()},a)},b.prototype._createNodesForDataset=function(c){var d=a.prototype._createNodesForDataset.call(this,c);return this._connectorArea=this._renderArea.append("g").classed(b._CONNECTOR_AREA_CLASS,!0),d},b.prototype._extentsForProperty=function(b){var c="y";return b===c?[this._extent]:a.prototype._extentsForProperty.call(this,b)},b.prototype._generateAttrToProjector=function(){var c=this,d=a.prototype._generateAttrToProjector.call(this),e=this.y().scale,f=g.Plot._scaledAccessor(this.total()),h=this.attr("y");null==h&&(d.y=function(a,b,d){var g=c.y().accessor(a,b,d),h=f(a,b,d);if(h)return Math.min(e.scale(g),e.scale(0));var i=c._subtotals[b];if(0===b)return g<0?e.scale(i-g):e.scale(i);var j=c._subtotals[b-1];return i>j?e.scale(i):e.scale(j)});var i=this.attr("height");return null==i&&(d.height=function(a,b,d){var g=f(a,b,d),h=c.y().accessor(a,b,d);if(g)return Math.abs(e.scale(h)-e.scale(0));var i=c._subtotals[b];if(0===b)return Math.abs(e.scale(i)-e.scale(i-h));var j=c._subtotals[b-1];return Math.abs(e.scale(i)-e.scale(j))}),d["class"]=function(a,d,e){var g="";null!=c.attr("class")&&(g=c.attr("class").accessor(a,d,e)+" ");var h=f(a,d,e);if(h)return g+b._BAR_TOTAL_CLASS;var i=c.y().accessor(a,d,e);return g+(i>0?b._BAR_GROWTH_CLASS:b._BAR_DECLINE_CLASS)},d},b.prototype._onDatasetUpdate=function(){return this._updateSubtotals(),a.prototype._onDatasetUpdate.call(this),this},b.prototype._calculateSubtotalsAndExtent=function(a){var b=this,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=0,f=!1;a.data().forEach(function(g,h){var i=b.y().accessor(g,h,a),j=b.total().accessor(g,h,a);if(j&&0!==h||(e+=i),b._subtotals.push(e),e<c&&(c=e),e>d&&(d=e),j&&(i<c&&(c=i),i>d&&(d=i)),!f&&j){for(var k=i-e,l=0;l<b._subtotals.length;l++)b._subtotals[l]+=k;f=!0,e+=k,c+=k,d+=k}}),this._extent=[c,d]},b.prototype._drawConnectors=function(){for(var a=this._generateAttrToProjector(),c=this.datasets()[0],d=1;d<c.data().length;d++){var e=d-1,f=c.data()[d],g=c.data()[e],h=a.x(g,e,c),i=a.x(f,d,c)+a.width(f,d,c),j=a.y(f,d,c);(this._subtotals[d]>0&&this._subtotals[d]>this._subtotals[e]||this._subtotals[d]<0&&this._subtotals[d]>=this._subtotals[e])&&(j=a.y(f,d,c)+a.height(f,d,c)),this._connectorArea.append("line").classed(b._CONNECTOR_CLASS,!0).attr("x1",h).attr("x2",i).attr("y1",j).attr("y2",j)}},b.prototype._updateSubtotals=function(){var a=this.datasets();if(a.length>0){var b=a[a.length-1];this._subtotals=new Array,this._calculateSubtotalsAndExtent(b)}},b._BAR_DECLINE_CLASS="waterfall-decline",b._BAR_GROWTH_CLASS="waterfall-growth",b._BAR_TOTAL_CLASS="waterfall-total",b._CONNECTOR_CLASS="connector",b._CONNECTOR_AREA_CLASS="connector-area",b._TOTAL_KEY="total",b}(f.Bar);b.Waterfall=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(0),g=c(17),h=function(a){function b(c){a.call(this);var d;switch(c){case null:case void 0:null==b._plottableColorCache&&(b._plottableColorCache=b._getPlottableColors()),d=e.scale.ordinal().range(b._plottableColorCache);break;case"Category10":case"category10":case"10":d=e.scale.category10();break;case"Category20":case"category20":case"20":d=e.scale.category20();break;case"Category20b":case"category20b":case"20b":d=e.scale.category20b();break;case"Category20c":case"category20c":case"20c":d=e.scale.category20c();break;default:throw new Error("Unsupported ColorScale type")}this._d3Scale=d}return d(b,a),b.prototype.extentOfValues=function(a){return f.Array.uniq(a)},b.prototype._getExtent=function(){return f.Array.uniq(this._getAllIncludedValues())},b.invalidateColorCache=function(){b._plottableColorCache=null},b._getPlottableColors=function(){for(var a=[],b=e.select("body").append("plottable-color-tester"),c=f.Color.colorTest(b,""),d=0,g=f.Color.colorTest(b,"plottable-colors-0");null!=g&&d<this._MAXIMUM_COLORS_FROM_CSS&&(g!==c||g!==a[a.length-1]);)a.push(g),d++,g=f.Color.colorTest(b,"plottable-colors-"+d);return b.remove(),a},b.prototype.scale=function(a){var c=this._d3Scale(a),d=this.domain().indexOf(a),e=Math.floor(d/this.range().length),g=Math.log(e*b._LOOP_LIGHTEN_FACTOR+1);return f.Color.lightenColor(c,g)},b.prototype._getDomain=function(){return this._backingScaleDomain()},b.prototype._backingScaleDomain=function(a){return null==a?this._d3Scale.domain():(this._d3Scale.domain(a),this)},b.prototype._getRange=function(){return this._d3Scale.range()},b.prototype._setRange=function(a){this._d3Scale.range(a)},b._LOOP_LIGHTEN_FACTOR=1.6,b._MAXIMUM_COLORS_FROM_CSS=256,b}(g.Scale);b.Color=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(0),g=c(17),h=function(a){function b(c){switch(void 0===c&&(c="linear"),a.call(this),c){case"linear":this._colorScale=e.scale.linear();break;case"log":this._colorScale=e.scale.log();break;case"sqrt":this._colorScale=e.scale.sqrt();break;case"pow":this._colorScale=e.scale.pow()}if(null==this._colorScale)throw new Error("unknown QuantitativeScale scale type "+c);this.range(b.REDS)}return d(b,a),b.prototype.extentOfValues=function(a){var b=e.extent(a);return null==b[0]||null==b[1]?[]:b},b.prototype._d3InterpolatedScale=function(){return this._colorScale.range([0,1]).interpolate(this._interpolateColors())},b.prototype._interpolateColors=function(){var a=this._colorRange;if(a.length<2)throw new Error("Color scale arrays must have at least two elements.");return function(b,c){return function(b){b=Math.max(0,Math.min(1,b));var c=b*(a.length-1),d=Math.floor(c),f=Math.ceil(c),g=c-d;return e.interpolateLab(a[d],a[f])(g)}}},b.prototype._resetScale=function(){this._d3Scale=this._d3InterpolatedScale(),this._autoDomainIfAutomaticMode(),this._dispatchUpdate()},b.prototype.autoDomain=function(){var a=this._getAllIncludedValues();return a.length>0&&this._setDomain([f.Math.min(a,0),f.Math.max(a,0)]),this},b.prototype.scale=function(a){return this._d3Scale(a)},b.prototype._getDomain=function(){return this._backingScaleDomain()},b.prototype._backingScaleDomain=function(a){return null==a?this._d3Scale.domain():(this._d3Scale.domain(a),this)},b.prototype._getRange=function(){return this._colorRange},b.prototype._setRange=function(a){this._colorRange=a,this._resetScale()},b.REDS=["#FFFFFF","#FFF6E1","#FEF4C0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],b.BLUES=["#FFFFFF","#CCFFFF","#A5FFFD","#85F7FB","#6ED3EF","#55A7E0","#417FD0","#2545D3","#0B02E1"],b.POSNEG=["#0B02E1","#2545D3","#417FD0","#55A7E0","#6ED3EF","#85F7FB","#A5FFFD","#CCFFFF","#FFFFFF","#FFF6E1","#FEF4C0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],b}(g.Scale);b.InterpolatedColor=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(10),g=function(a){function b(){a.call(this),this._d3Scale=e.scale.linear()}return d(b,a),b.prototype._defaultExtent=function(){return[0,1]},b.prototype._expandSingleValueDomain=function(a){return a[0]===a[1]?[a[0]-1,a[1]+1]:a},b.prototype.scale=function(a){return this._d3Scale(a)},b.prototype.scaleTransformation=function(a){return this.scale(a)},b.prototype.invertedTransformation=function(a){return this.invert(a)},b.prototype.getTransformationDomain=function(){return this.domain()},b.prototype._getDomain=function(){return this._backingScaleDomain()},b.prototype._backingScaleDomain=function(a){return null==a?this._d3Scale.domain():(this._d3Scale.domain(a),this)},b.prototype._getRange=function(){return this._d3Scale.range()},b.prototype._setRange=function(a){this._d3Scale.range(a)},b.prototype.invert=function(a){return this._d3Scale.invert(a)},b.prototype.defaultTicks=function(){return this._d3Scale.ticks(b._DEFAULT_NUM_TICKS)},b.prototype._niceDomain=function(a,b){return this._d3Scale.copy().domain(a).nice(b).domain()},b}(f.QuantitativeScale);b.Linear=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(0),g=c(3),h=c(10),i=function(a){function b(b){if(void 0===b&&(b=10),a.call(this),this._d3Scale=e.scale.linear(),this._base=b,this._pivot=this._base,this._setDomain(this._defaultExtent()),b<=1)throw new Error("ModifiedLogScale: The base must be > 1")}return d(b,a),b.prototype._adjustedLog=function(a){var b=a<0?-1:1;return a*=b,a<this._pivot&&(a+=(this._pivot-a)/this._pivot),a=Math.log(a)/Math.log(this._base),a*=b},b.prototype._invertedAdjustedLog=function(a){var b=a<0?-1:1;return a*=b,a=Math.pow(this._base,a),a<this._pivot&&(a=this._pivot*(a-1)/(this._pivot-1)),a*=b},b.prototype.scale=function(a){return this._d3Scale(this._adjustedLog(a))},b.prototype.invert=function(a){return this._invertedAdjustedLog(this._d3Scale.invert(a))},b.prototype.scaleTransformation=function(a){return this.scale(a)},b.prototype.invertedTransformation=function(a){return this.invert(a)},b.prototype.getTransformationDomain=function(){return this.domain()},b.prototype._getDomain=function(){return this._untransformedDomain},b.prototype._setDomain=function(b){this._untransformedDomain=b;var c=[this._adjustedLog(b[0]),this._adjustedLog(b[1])];a.prototype._setDomain.call(this,c)},b.prototype._backingScaleDomain=function(a){return null==a?this._d3Scale.domain():(this._d3Scale.domain(a),this)},b.prototype.ticks=function(){var a=function(a,b,c){return[a,b,c].sort(function(a,b){return a-b})[1]},b=f.Math.min(this._untransformedDomain,0),c=f.Math.max(this._untransformedDomain,0),d=b,h=a(b,c,-this._pivot),i=a(b,c,this._pivot),j=c,k=this._logTicks(-h,-d).map(function(a){return-a}).reverse(),l=this._logTicks(i,j),m=Math.max(b,-this._pivot),n=Math.min(c,this._pivot),o=e.scale.linear().domain([m,n]).ticks(this._howManyTicks(m,n)),p=k.concat(o).concat(l);return p.length<=1&&(p=e.scale.linear().domain([b,c]).ticks(g.ModifiedLog._DEFAULT_NUM_TICKS)),p},b.prototype._logTicks=function(a,b){var c=this,d=this._howManyTicks(a,b);if(0===d)return[];var g=Math.floor(Math.log(a)/Math.log(this._base)),h=Math.ceil(Math.log(b)/Math.log(this._base)),i=e.range(h,g,-Math.ceil((h-g)/d)),j=e.range(this._base,1,-(this._base-1)).map(Math.floor),k=f.Array.uniq(j),l=i.map(function(a){return k.map(function(b){return Math.pow(c._base,a-1)*b})}),m=f.Array.flatten(l),n=m.filter(function(c){return a<=c&&c<=b}),o=n.sort(function(a,b){return a-b});return o},b.prototype._howManyTicks=function(a,b){var c=this._adjustedLog(f.Math.min(this._untransformedDomain,0)),d=this._adjustedLog(f.Math.max(this._untransformedDomain,0)),e=this._adjustedLog(a),h=this._adjustedLog(b),i=(h-e)/(d-c),j=Math.ceil(i*g.ModifiedLog._DEFAULT_NUM_TICKS);return j},b.prototype._niceDomain=function(a,b){return a},b.prototype._defaultExtent=function(){return[0,this._base]},b.prototype._expandSingleValueDomain=function(a){if(a[0]===a[1]){var b=a[0];return b>0?[b/this._base,b*this._base]:0===b?[-this._base,this._base]:[b*this._base,b/this._base]}return a},b.prototype._getRange=function(){return this._d3Scale.range()},b.prototype._setRange=function(a){this._d3Scale.range(a)},b.prototype.defaultTicks=function(){return this._d3Scale.ticks(g.ModifiedLog._DEFAULT_NUM_TICKS)},b}(h.QuantitativeScale);b.ModifiedLog=i},function(a,b,c){"use strict";function d(a){if(a<=0)throw new Error("interval must be positive number");return function(b){var c=b.domain(),d=Math.min(c[0],c[1]),e=Math.max(c[0],c[1]),g=Math.ceil(d/a)*a,h=Math.floor((e-g)/a)+1,i=d%a===0?[]:[d],j=f.Math.range(0,h).map(function(b){return g+b*a}),k=e%a===0?[]:[e];return i.concat(j).concat(k)}}function e(){return function(a){var b=a.defaultTicks();return b.filter(function(a,c){return a%1===0||0===c||c===b.length-1})}}var f=c(0);b.intervalTickGenerator=d,b.integerTickGenerator=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(1),f=c(22),g=c(10),h=function(a){function b(){a.call(this),this._d3Scale=e.time.scale(),this.autoDomain()}return d(b,a),b.prototype.tickInterval=function(a,c){var d=e.time.scale(),f=b.timeIntervalToD3Time(a);return d.domain(this.domain()),d.range(this.range()),d.ticks(f,c)},b.prototype._setDomain=function(b){if(b[1]<b[0])throw new Error("Scale.Time domain values must be in chronological order");return a.prototype._setDomain.call(this,b)},b.prototype._defaultExtent=function(){return[new Date("1970-01-01"),new Date("1970-01-02")]},b.prototype._expandSingleValueDomain=function(a){var b=a[0].getTime(),c=a[1].getTime();if(b===c){var d=new Date(b);d.setDate(d.getDate()-1);var e=new Date(c);return e.setDate(e.getDate()+1),[d,e]}return a},b.prototype.scale=function(a){return this._d3Scale(a)},b.prototype.scaleTransformation=function(a){return this.scale(new Date(a))},b.prototype.invertedTransformation=function(a){return this.invert(a).getTime()},b.prototype.getTransformationDomain=function(){var a=this.domain();return[a[0].valueOf(),a[1].valueOf()]},b.prototype._getDomain=function(){return this._backingScaleDomain()},b.prototype._backingScaleDomain=function(a){return null==a?this._d3Scale.domain():(this._d3Scale.domain(a),this)},b.prototype._getRange=function(){return this._d3Scale.range()},b.prototype._setRange=function(a){this._d3Scale.range(a)},b.prototype.invert=function(a){return this._d3Scale.invert(a)},b.prototype.defaultTicks=function(){return this._d3Scale.ticks(b._DEFAULT_NUM_TICKS)},b.prototype._niceDomain=function(a){return this._d3Scale.copy().domain(a).nice().domain()},b.timeIntervalToD3Time=function(a){switch(a){case f.TimeInterval.second:return e.time.second;case f.TimeInterval.minute:return e.time.minute;case f.TimeInterval.hour:return e.time.hour;case f.TimeInterval.day:return e.time.day;case f.TimeInterval.week:return e.time.week;case f.TimeInterval.month:return e.time.month;case f.TimeInterval.year:return e.time.year;default:throw Error("TimeInterval specified does not exist: "+a)}},b}(g.QuantitativeScale);b.Time=h},function(a,b,c){"use strict";function d(a,b){if(a.length!==b.length)throw new Error("attempted to add arrays of unequal length");return a.map(function(c,d){return a[d]+b[d]})}function e(a){var b=h.set(),c=[];return a.forEach(function(a){b.has(String(a))||(b.add(String(a)),c.push(a))}),c}function f(a){return i.prototype.concat.apply([],a)}function g(a,b){for(var c=[],d=0;d<b;d++)c[d]="function"==typeof a?a(d):a;return c}var h=c(1),i=window.Array;b.add=d,b.uniq=e,b.flatten=f,b.createFilledArray=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(40),f=function(a){function b(){a.apply(this,arguments)}return d(b,a),b.prototype.callCallbacks=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];return this.forEach(function(c){c.apply(a,b)}),this},b}(e.Set);b.CallbackSet=f},function(a,b,c){"use strict";var d=c(39),e=function(){function a(a){this._svg=a,this._measureRect=document.createElementNS(a.namespaceURI,"rect"),this._measureRect.setAttribute("class","measure-rect"),this._measureRect.setAttribute("style","opacity: 0; visibility: hidden;"),this._measureRect.setAttribute("width","1"),this._measureRect.setAttribute("height","1"),this._svg.appendChild(this._measureRect)}return a.getTranslator=function(b){var c=d.boundingSVG(b),e=c[a._TRANSLATOR_KEY];return null==e&&(e=new a(c),c[a._TRANSLATOR_KEY]=e),e},a.prototype.computePosition=function(a,b){this._measureRect.setAttribute("x","0"),this._measureRect.setAttribute("y","0");var c=this._measureRect.getBoundingClientRect(),d={x:c.left,y:c.top},e=100;this._measureRect.setAttribute("x",String(e)),this._measureRect.setAttribute("y",String(e)),c=this._measureRect.getBoundingClientRect();var f={x:c.left,y:c.top};if(d.x===f.x||d.y===f.y)return null;var g=(f.x-d.x)/e,h=(f.y-d.y)/e;this._measureRect.setAttribute("x",String((a-d.x)/g)),this._measureRect.setAttribute("y",String((b-d.y)/h)),c=this._measureRect.getBoundingClientRect();var i={x:c.left,y:c.top},j={x:(i.x-d.x)/g,y:(i.y-d.y)/h};return j},a.prototype.insideSVG=function(a){return d.boundingSVG(a.target)===this._svg},a._TRANSLATOR_KEY="__Plottable_ClientToSVGTranslator",a}();b.ClientToSVGTranslator=e},function(a,b,c){"use strict";function d(a,b){var c=g(a)+.05,d=g(b)+.05;return c>d?c/d:d/c}function e(a,b){var c=h.hsl(a).brighter(b);return c.rgb().toString()}function f(a,b){a.classed(b,!0);var c=a.style("background-color");if("transparent"===c)return null;var d=/\((.+)\)/.exec(c)[1].split(",").map(function(a){var b=+a,c=b.toString(16);return b<16?"0"+c:c});if(4===d.length&&"00"===d[3])return null;var e="#"+d.join("");return a.classed(b,!1),e}function g(a){var b=h.rgb(a),c=function(a){return a/=255,a<=.03928?a/12.92:i.pow((a+.055)/1.055,2.4)},d=c(b.r),e=c(b.g),f=c(b.b);return.2126*d+.7152*e+.0722*f}var h=c(1),i=window.Math;b.contrast=d,b.lightenColor=e,b.colorTest=f},function(a,b,c){"use strict";var d=c(27),e=function(){function a(){this._entities=[]}return a.prototype.add=function(a){this._entities.push(a)},a.prototype.entityNearest=function(a,b){var c,e=1/0;if(this._entities.forEach(function(f){if(void 0===b||b(f)!==!1){var g=d.distanceSquared(f.position,a);g<e&&(e=g,c=f)}}),void 0!==c)return c},a.prototype.map=function(a){return this._entities.map(function(b){return a(b)})},a.prototype.forEach=function(a){return this._entities.forEach(a)},a}();b.EntityArray=e},function(a,b,c){"use strict";var d=c(27),e=function(){function a(){"function"==typeof window.Map?this._es6Map=new window.Map:this._keyValuePairs=[]}return a.prototype.set=function(a,b){if(d.isNaN(a))throw new Error("NaN may not be used as a key to the Map");if(null!=this._es6Map)return this._es6Map.set(a,b),this;for(var c=0;c<this._keyValuePairs.length;c++)if(this._keyValuePairs[c].key===a)return this._keyValuePairs[c].value=b,this;return this._keyValuePairs.push({key:a,value:b}),this},a.prototype.get=function(a){if(null!=this._es6Map)return this._es6Map.get(a);for(var b=0;b<this._keyValuePairs.length;b++)if(this._keyValuePairs[b].key===a)return this._keyValuePairs[b].value},a.prototype.has=function(a){if(null!=this._es6Map)return this._es6Map.has(a);for(var b=0;b<this._keyValuePairs.length;b++)if(this._keyValuePairs[b].key===a)return!0;return!1},a.prototype.forEach=function(a,b){var c=this;if(null!=this._es6Map){var d=function(d,e){return a.call(b,d,e,c)};return void this._es6Map.forEach(d,b)}this._keyValuePairs.forEach(function(d){a.call(b,d.value,d.key,c)})},a.prototype["delete"]=function(a){if(null!=this._es6Map)return this._es6Map["delete"](a);for(var b=0;b<this._keyValuePairs.length;b++)if(this._keyValuePairs[b].key===a)return this._keyValuePairs.splice(b,1),!0;return!1},a}();b.Map=e},function(a,b,c){"use strict";function d(a,b,c,d){void 0===d&&(d="bottomup");var e=h.map(),f=h.map(),j=new i.Map;return"topdown"===d&&(a=a.slice(),a.reverse()),a.forEach(function(a){var d=new i.Map;a.data().forEach(function(h,i){var j,k=g(b(h,i,a)),l=+c(h,i,a),m=l>=0?e:f;m.has(k)?(j=m.get(k),m.set(k,j+l)):(j=0,m.set(k,l)),d.set(k,{offset:j,value:l,axisValue:b(h,i,a)})}),j.set(a,d)}),j}function e(a){var b=new i.Map,c=new i.Map;return a.forEach(function(a){a.forEach(function(a,d){var e=i.Math.max([a.offset+a.value,a.offset],a.offset),f=i.Math.min([a.offset+a.value,a.offset],a.offset);b.has(d)?b.get(d).extent<e&&b.set(d,{extent:e,axisValue:a.axisValue}):b.set(d,{extent:e,axisValue:a.axisValue}),c.has(d)?c.get(d).extent>f&&c.set(d,{extent:f,axisValue:a.axisValue}):c.set(d,{extent:f,axisValue:a.axisValue})})}),{maximumExtents:b,minimumExtents:c}}function f(a,b,c){var d=[];a.forEach(function(a,e){e.data().forEach(function(f,h){if(null==c||c(f,h,e)){var i=a.get(g(b(f,h,e)));d.push(i.value+i.offset)}})});var e=i.Math.max(d,0),f=i.Math.min(d,0);return[j.min(f,0),j.max(0,e)]}function g(a){return String(a)}var h=c(1),i=c(0),j=window.Math;b.stack=d,b.stackedExtents=e,b.stackedExtent=f,b.normalizeKey=g},function(a,b,c){"use strict";function d(a){g.SHOW_WARNINGS&&null!=window.console&&(null!=window.console.warn?console.warn(a):null!=window.console.log&&console.log(a))}function e(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];return 0===b?(a(c),-1):window.setTimeout(a,b,c)}function f(a,b,c){void 0===c&&(c=""),d("Method "+a+" has been deprecated in version "+b+". Please refer to the release notes. "+c)}var g=c(19);b.warn=d,b.setTimeout=e,b.deprecated=f},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(28)),d(c(100)),d(c(101))},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(28),f=function(a){function b(){return a.apply(this,arguments)||this}return d(b,a),b.prototype.animate=function(b){var c=b.select(".text-area");c.attr("opacity",0);var d={opacity:1};return this._animate(c,d),a.prototype.animate.call(this,b)},b}(e.BaseAnimator);b.OpacityAnimator=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(13),f=c(28),g=function(a){function b(){var b=a.call(this)||this;return b.direction("bottom"),b}return d(b,a),b.prototype.direction=function(a){if(null==a)return this._direction;if(b.SupportedDirections.indexOf(a)===-1)throw new Error("unsupported direction - "+a);return this._direction=a,this},b.prototype.animate=function(b){var c=e.DOM.getBBox(b),d=b.select(".clip-rect");switch(d.attr("width",0),d.attr("height",0),this._direction){case"top":d.attr("y",c.y+c.height),d.attr("x",c.x),d.attr("width",c.width);break;case"bottom":d.attr("y",c.y),d.attr("x",c.x),d.attr("width",c.width);break;case"left":d.attr("y",c.y),d.attr("x",c.x),d.attr("height",c.height);break;case"right":d.attr("y",c.y),d.attr("x",c.x+c.width),d.attr("height",c.height)}return this._animate(d,c),a.prototype.animate.call(this,b)},b}(f.BaseAnimator);g.SupportedDirections=["top","bottom","left","right"],b.UnveilAnimator=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(13),f=c(42),g=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.dimCache=new e.Cache(function(a){return d._measureNotFromCache(a)}),d}return d(b,a),b.prototype._measureNotFromCache=function(b){return a.prototype.measure.call(this,b)},b.prototype.measure=function(a){return this.dimCache.get(a)},b.prototype.reset=function(){this.dimCache.clear(),a.prototype.reset.call(this)},b}(f.CacheCharacterMeasurer);b.CacheMeasurer=g},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(41)),d(c(42)),d(c(102)),d(c(43)),d(c(44))},function(a,b,c){"use strict";var d=c(1),e=function(){function a(a){this.cache=d.map(),this.compute=a}return a.prototype.get=function(a){return this.cache.has(a)||this.cache.set(a,this.compute(a)),this.cache.get(a)},a.prototype.clear=function(){return this.cache=d.map(),this},a}();b.Cache=e},function(a,b,c){"use strict";var d=c(1),e=function(){function a(){}return a.transform=function(a,b,c){var e=d.transform(a.attr("transform"));return null==b?e.translate:(c=null==c?0:c,e.translate[0]=b,e.translate[1]=c,a.attr("transform",e.toString()),a)},a.getBBox=function(a){var b;try{b=a.node().getBBox()}catch(c){b={height:0,width:0,x:0,y:0}}return b},a}();b.DOM=e},function(a,b,c){"use strict";var d=function(){function a(){}return a.arrayEq=function(a,b){if(null==a||null==b)return a===b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},a.objEq=function(b,c){if(null==b||null==c)return b===c;var d=Object.keys(b).sort(),e=Object.keys(c).sort(),f=d.map(function(a){return b[a]}),g=e.map(function(a){return c[a]});return a.arrayEq(d,e)&&a.arrayEq(f,g)},a.strictEq=function(a,b){return a===b},a}();b.Methods=d},function(a,b,c){"use strict";var d=function(){function a(){}return a.combineWhitespace=function(a){return a.replace(/[ \t]+/g," ")},
a.isNotEmptyString=function(a){return a&&""!==a.trim()},a.trimStart=function(b,c){if(!b)return b;var d=b.split(""),e=c?function(b){return b.split(c).some(a.isNotEmptyString)}:a.isNotEmptyString;return d.reduce(function(a,b){return e(a+b)?a+b:a},"")},a.trimEnd=function(b,c){if(!b)return b;var d=b.split("");return d.reverse(),d=a.trimStart(d.join(""),c).split(""),d.reverse(),d.join("")},a}();b.StringMethods=d},function(a,b,c){"use strict";var d=function(){function a(){this.WordDividerRegExp=new RegExp("\\W"),this.WhitespaceRegExp=new RegExp("\\s")}return a.prototype.tokenize=function(a){var b=this;return a.split("").reduce(function(a,c){return a.slice(0,-1).concat(b.shouldCreateNewToken(a[a.length-1],c))},[""])},a.prototype.shouldCreateNewToken=function(a,b){if(!a)return[b];var c=a[a.length-1];return this.WhitespaceRegExp.test(c)&&this.WhitespaceRegExp.test(b)?[a+b]:this.WhitespaceRegExp.test(c)||this.WhitespaceRegExp.test(b)?[a,b]:this.WordDividerRegExp.test(c)||this.WordDividerRegExp.test(b)?c===b?[a+b]:[a,b]:[a+b]},a}();b.Tokenizer=d},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(110)),d(c(45))},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(45),f=function(a){function b(){return a.apply(this,arguments)||this}return d(b,a),b.prototype.wrap=function(c,d,e,f){var g=this;void 0===f&&(f=1/0);var h=c.split("\n");if(h.length>1)throw new Error("SingleLineWrapper is designed to work only on single line");var i=function(b){return a.prototype.wrap.call(g,c,d,b,f)},j=i(e);if(j.noLines<2)return j;for(var k=0,l=e,m=0;m<b.NO_WRAP_ITERATIONS&&l>k;++m){var n=(l+k)/2,o=i(n);this.areSameResults(j,o)?(l=n,j=o):k=n}return j},b.prototype.areSameResults=function(a,b){return a.noLines===b.noLines&&a.truncatedText===b.truncatedText},b}(e.Wrapper);f.NO_WRAP_ITERATIONS=5,b.SingleLineWrapper=f},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(112))},function(a,b,c){"use strict";var d=c(1),e=c(13),f=function(){function a(b,c){this._writerID=a.nextID++,this._elementID=0,this.measurer(b),c&&this.wrapper(c),this.addTitleElement(!1)}return a.prototype.measurer=function(a){return this._measurer=a,this},a.prototype.wrapper=function(a){return this._wrapper=a,this},a.prototype.addTitleElement=function(a){return this._addTitleElement=a,this},a.prototype.write=function(b,c,f,g){if(a.SupportedRotation.indexOf(g.textRotation)===-1)throw new Error("unsupported rotation - "+g.textRotation+". Supported rotations are "+a.SupportedRotation.join(", "));if(null!=g.textShear&&g.textShear<-80||g.textShear>80)throw new Error("unsupported shear angle - "+g.textShear+". Must be between -80 and 80");var h=Math.abs(Math.abs(g.textRotation)-90)>45,i=h?c:f,j=h?f:c,k=g.textShear||0,l=k*Math.PI/180,m=this._measurer.measure().height,n=m*Math.tan(l),o=i/Math.cos(l)-Math.abs(n),p=j*Math.cos(l),q=e.StringMethods.combineWhitespace(b),r=this._wrapper?this._wrapper.wrap(q,this._measurer,o,p).wrappedText:q,s=r.split("\n"),t=g.selection.append("g").classed("text-container",!0);this._addTitleElement&&t.append("title").text(b);var u=t.append("g").classed("text-area",!0);this.writeLines(s,u,o,n,g.xAlign);var v=a.XOffsetFactor[g.xAlign]*o*Math.sin(l),w=a.YOffsetFactor[g.yAlign]*(p-s.length*m),x=v-w,y=d.transform("");switch(y.rotate=g.textRotation+k,g.textRotation){case 90:y.translate=[c+x,0];break;case-90:y.translate=[-x,f];break;case 180:y.translate=[c,f+x];break;default:y.translate=[0,-x]}u.attr("transform",y.toString()),this.addClipPath(t),g.animator&&g.animator.animate(t)},a.prototype.writeLine=function(b,c,d,f,g,h){var i=c.append("text");i.text(b),g+=d*a.XOffsetFactor[f];var j=a.AnchorConverter[f];i.attr("text-anchor",j).classed("text-line",!0),e.DOM.transform(i,g,h).attr("y","-0.25em")},a.prototype.writeLines=function(a,b,c,d,e){var f=this,g=this._measurer.measure().height;a.forEach(function(a,h){var i=d>0?(h+1)*d:h*d;f.writeLine(a,b,c,e,i,(h+1)*g)})},a.prototype.addClipPath=function(a){var b=this._elementID++,c=/MSIE [5-9]/.test(navigator.userAgent)?"":document.location.href;c=c.split("#")[0];var d="clipPath"+this._writerID+"_"+b;a.select(".text-area").attr("clip-path",'url("'+c+"#"+d+'")');var f=a.append("clipPath").attr("id",d),g=e.DOM.getBBox(a.select(".text-area")),h=f.append("rect");h.classed("clip-rect",!0).attr({height:g.height,width:g.width,x:g.x,y:g.y})},a}();f.nextID=0,f.SupportedRotation=[-90,0,180,90],f.AnchorConverter={center:"middle",left:"start",right:"end"},f.XOffsetFactor={center:.5,left:0,right:1},f.YOffsetFactor={bottom:1,center:.5,top:0},b.Writer=f},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=c(6);b.Animators=e;var f=c(46);b.Axes=f;var g=c(29);b.Components=g;var h=c(19);b.Configs=h;var i=c(8);b.Formatters=i;var j=c(24);b.RenderController=j;var k=c(30);b.RenderPolicies=k;var l=c(25);b.SymbolFactories=l;var m=c(11);b.Dispatchers=m;var n=c(9);b.Drawers=n;var o=c(14);b.Interactions=o;var p=c(16);b.Plots=p;var q=c(3);b.Scales=q;var r=c(0);b.Utils=r,d(c(18));var s=c(22);b.TimeInterval=s.TimeInterval,d(c(5)),d(c(23)),d(c(47));var t=c(48);b.version=t.version,d(c(20)),d(c(7)),d(c(12)),d(c(31)),d(c(15)),d(c(2)),d(c(10)),d(c(17))}])});